import{a as vt}from"./_commonjsHelpers-C4iS2aBk.js";import{r as dt}from"./defaults-BeBqgnWC.js";import{r as pt}from"./sigma-BsJT_GRv.js";import{r as yt}from"./infer-type-BZ77ykGk.js";import{r as mt}from"./getters-CXJ0gpj8.js";var K,nt;function gt(){if(nt)return K;nt=1;function A(M){if(typeof M!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=M}return typeof Symbol<"u"&&(A.prototype[Symbol.iterator]=function(){return this}),A.of=function(){var M=arguments,p=M.length,u=0;return new A(function(){return u>=p?{done:!0}:{done:!1,value:M[u++]}})},A.empty=function(){var M=new A(function(){return{done:!0}});return M},A.fromSequence=function(M){var p=0,u=M.length;return new A(function(){return p>=u?{done:!0}:{done:!1,value:M[p++]}})},A.is=function(M){return M instanceof A?!0:typeof M=="object"&&M!==null&&typeof M.next=="function"},K=A,K}var Z={},ot;function st(){return ot||(ot=1,function(A){var M=Math.pow(2,8)-1,p=Math.pow(2,16)-1,u=Math.pow(2,32)-1,l=Math.pow(2,7)-1,f=Math.pow(2,15)-1,w=Math.pow(2,31)-1;A.getPointerArray=function(e){var i=e-1;if(i<=M)return Uint8Array;if(i<=p)return Uint16Array;if(i<=u)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},A.getSignedPointerArray=function(e){var i=e-1;return i<=l?Int8Array:i<=f?Int16Array:i<=w?Int32Array:Float64Array},A.getNumberType=function(e){return e===(e|0)?Math.sign(e)===-1?e<=127&&e>=-128?Int8Array:e<=32767&&e>=-32768?Int16Array:Int32Array:e<=255?Uint8Array:e<=65535?Uint16Array:Uint32Array:Float64Array};var t={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};A.getMinimalRepresentation=function(e,i){var r=null,s=0,o,y,C,z,d;for(z=0,d=e.length;z<d;z++)C=i?i(e[z]):e[z],y=A.getNumberType(C),o=t[y.name],o>s&&(s=o,r=y);return r},A.isTypedArray=function(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(e)},A.concat=function(){var e=0,i,r,s;for(i=0,s=arguments.length;i<s;i++)e+=arguments[i].length;var o=new arguments[0].constructor(e);for(i=0,r=0;i<s;i++)o.set(arguments[i],r),r+=arguments[i].length;return o},A.indices=function(e){for(var i=A.getPointerArray(e),r=new i(e),s=0;s<e;s++)r[s]=s;return r}}(Z)),Z}var tt,at;function wt(){if(at)return tt;at=1;var A=gt(),M=st().getPointerArray;function p(u,l){arguments.length<2&&(l=u,u=Array);var f=M(l);this.size=0,this.length=l,this.dense=new f(l),this.sparse=new f(l),this.vals=new u(l)}return p.prototype.clear=function(){this.size=0},p.prototype.has=function(u){var l=this.sparse[u];return l<this.size&&this.dense[l]===u},p.prototype.get=function(u){var l=this.sparse[u];if(l<this.size&&this.dense[l]===u)return this.vals[l]},p.prototype.set=function(u,l){var f=this.sparse[u];return f<this.size&&this.dense[f]===u?(this.vals[f]=l,this):(this.dense[this.size]=u,this.sparse[u]=this.size,this.vals[this.size]=l,this.size++,this)},p.prototype.delete=function(u){var l=this.sparse[u];return l>=this.size||this.dense[l]!==u?!1:(l=this.dense[this.size-1],this.dense[this.sparse[u]]=l,this.sparse[l]=this.sparse[u],this.size--,!0)},p.prototype.forEach=function(u,l){l=arguments.length>1?l:this;for(var f=0;f<this.size;f++)u.call(l,this.vals[f],this.dense[f])},p.prototype.keys=function(){var u=this.size,l=this.dense,f=0;return new A(function(){if(f<u){var w=l[f];return f++,{value:w}}return{done:!0}})},p.prototype.values=function(){var u=this.size,l=this.vals,f=0;return new A(function(){if(f<u){var w=l[f];return f++,{value:w}}return{done:!0}})},p.prototype.entries=function(){var u=this.size,l=this.dense,f=this.vals,w=0;return new A(function(){if(w<u){var t=[l[w],f[w]];return w++,{value:t}}return{done:!0}})},typeof Symbol<"u"&&(p.prototype[Symbol.iterator]=p.prototype.entries),p.prototype.inspect=function(){for(var u=new Map,l=0;l<this.size;l++)u.set(this.dense[l],this.vals[l]);return Object.defineProperty(u,"constructor",{value:p,enumerable:!1}),u.length=this.length,this.vals.constructor!==Array&&(u.type=this.vals.constructor.name),u},typeof Symbol<"u"&&(p.prototype[Symbol.for("nodejs.util.inspect.custom")]=p.prototype.inspect),tt=p,tt}var et,ht;function Wt(){if(ht)return et;ht=1;var A=gt(),M=st().getPointerArray;function p(u){var l=M(u);this.start=0,this.size=0,this.capacity=u,this.dense=new l(u),this.sparse=new l(u)}return p.prototype.clear=function(){this.start=0,this.size=0},p.prototype.has=function(u){if(this.size===0)return!1;var l=this.sparse[u],f=l<this.capacity&&l>=this.start&&l<this.start+this.size||l<(this.start+this.size)%this.capacity;return f&&this.dense[l]===u},p.prototype.enqueue=function(u){var l=this.sparse[u];if(this.size!==0){var f=l<this.capacity&&l>=this.start&&l<this.start+this.size||l<(this.start+this.size)%this.capacity;if(f&&this.dense[l]===u)return this}return l=(this.start+this.size)%this.capacity,this.dense[l]=u,this.sparse[u]=l,this.size++,this},p.prototype.dequeue=function(){if(this.size!==0){var u=this.start;this.size--,this.start++,this.start===this.capacity&&(this.start=0);var l=this.dense[u];return this.sparse[l]=this.capacity,l}},p.prototype.forEach=function(u,l){l=arguments.length>1?l:this;for(var f=this.capacity,w=this.size,t=this.start,e=0;e<w;)u.call(l,this.dense[t],e,this),t++,e++,t===f&&(t=0)},p.prototype.values=function(){var u=this.dense,l=this.capacity,f=this.size,w=this.start,t=0;return new A(function(){if(t>=f)return{done:!0};var e=u[w];return w++,t++,w===l&&(w=0),{value:e,done:!1}})},typeof Symbol<"u"&&(p.prototype[Symbol.iterator]=p.prototype.values),p.prototype.inspect=function(){var u=[];return this.forEach(function(l){u.push(l)}),Object.defineProperty(u,"constructor",{value:p,enumerable:!1}),u.capacity=this.capacity,u},typeof Symbol<"u"&&(p.prototype[Symbol.for("nodejs.util.inspect.custom")]=p.prototype.inspect),et=p,et}var it,ut;function bt(){if(ut)return it;ut=1;function A(p){return function(u){return typeof u!="number"&&(u=u.length),Math.floor(p()*u)}}var M=A(Math.random);return M.createRandomIndex=A,it=M,it}var H={},lt;function At(){if(lt)return H;lt=1;var A=st(),M=dt(),p=mt().createEdgeWeightGetter,u=Symbol.for("nodejs.util.inspect.custom"),l={getEdgeWeight:"weight",keepDendrogram:!1,resolution:1};function f(t,e){e=M(e,l);var i=e.resolution,r=p(e.getEdgeWeight).fromEntry,s=(t.size-t.selfLoopCount)*2,o=A.getPointerArray(s),y=A.getPointerArray(t.order+1),C=e.getEdgeWeight?Float64Array:A.getPointerArray(t.size*2);this.C=t.order,this.M=0,this.E=s,this.U=0,this.resolution=i,this.level=0,this.graph=t,this.nodes=new Array(t.order),this.keepDendrogram=e.keepDendrogram,this.neighborhood=new y(s),this.weights=new C(s),this.loops=new C(t.order),this.starts=new o(t.order+1),this.belongings=new y(t.order),this.dendrogram=[],this.mapping=null,this.counts=new y(t.order),this.unused=new y(t.order),this.totalWeights=new C(t.order);var z={},d,h=0,W=0,a=this;t.forEachNode(function(n){a.nodes[h]=n,z[n]=h,W+=t.undirectedDegreeWithoutSelfLoops(n),a.starts[h]=W,a.belongings[h]=h,a.counts[h]=1,h++}),t.forEachEdge(function(n,j,g,I,c,v,m){if(d=r(n,j,g,I,c,v,m),g=z[g],I=z[I],a.M+=d,g===I)a.totalWeights[g]+=d*2,a.loops[g]=d*2;else{a.totalWeights[g]+=d,a.totalWeights[I]+=d;var T=--a.starts[g],b=--a.starts[I];a.neighborhood[T]=I,a.neighborhood[b]=g,a.weights[T]=d,a.weights[b]=d}}),this.starts[h]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}f.prototype.isolate=function(t,e){var i=this.belongings[t];if(this.counts[i]===1)return i;var r=this.unused[--this.U],s=this.loops[t];return this.totalWeights[i]-=e+s,this.totalWeights[r]+=e+s,this.belongings[t]=r,this.counts[i]--,this.counts[r]++,r},f.prototype.move=function(t,e,i){var r=this.belongings[t],s=this.loops[t];this.totalWeights[r]-=e+s,this.totalWeights[i]+=e+s,this.belongings[t]=i;var o=this.counts[r]--===1;this.counts[i]++,o&&(this.unused[this.U++]=r)},f.prototype.computeNodeDegree=function(t){var e,i,r,s=0;for(e=this.starts[t],i=this.starts[t+1];e<i;e++)r=this.weights[e],s+=r;return s},f.prototype.expensiveIsolate=function(t){var e=this.computeNodeDegree(t);return this.isolate(t,e)},f.prototype.expensiveMove=function(t,e){var i=this.computeNodeDegree(t);this.move(t,i,e)},f.prototype.zoomOut=function(){var t=new Array(this.C-this.U),e={},i=this.nodes.length,r=0,s=0,o,y,C,z,d,h,W,a,n;for(o=0,C=this.C;o<C;o++)h=this.belongings[o],h in e||(e[h]=r,t[r]={adj:{},totalWeights:this.totalWeights[h],internalWeights:0},r++),this.belongings[o]=e[h];var j,g;if(this.keepDendrogram){for(j=this.dendrogram[this.level],g=new(A.getPointerArray(r))(i),o=0;o<i;o++)g[o]=this.belongings[j[o]];this.dendrogram.push(g)}else for(o=0;o<i;o++)this.mapping[o]=this.belongings[this.mapping[o]];for(o=0,C=this.C;o<C;o++)for(h=this.belongings[o],a=t[h],n=a.adj,a.internalWeights+=this.loops[o],y=this.starts[o],z=this.starts[o+1];y<z;y++){if(d=this.neighborhood[y],W=this.belongings[d],h===W){a.internalWeights+=this.weights[y];continue}W in n||(n[W]=0),n[W]+=this.weights[y]}for(this.C=r,d=0,h=0;h<r;h++){a=t[h],n=a.adj,h=+h,this.totalWeights[h]=a.totalWeights,this.loops[h]=a.internalWeights,this.counts[h]=1,this.starts[h]=d,this.belongings[h]=h;for(W in n)this.neighborhood[d]=+W,this.weights[d]=n[W],s++,d++}return this.starts[r]=s,this.E=s,this.U=0,this.level++,e},f.prototype.modularity=function(){var t,e,i,r,s,o=0,y=this.M*2,C=new Float64Array(this.C);for(i=0;i<this.C;i++)for(t=this.belongings[i],C[t]+=this.loops[i],r=this.starts[i],s=this.starts[i+1];r<s;r++)e=this.belongings[this.neighborhood[r]],t===e&&(C[t]+=this.weights[r]);for(i=0;i<this.C;i++)o+=C[i]/y-Math.pow(this.totalWeights[i]/y,2)*this.resolution;return o},f.prototype.delta=function(t,e,i,r){var s=this.M,o=this.totalWeights[r];return e+=this.loops[t],i/s-o*e*this.resolution/(2*s*s)},f.prototype.deltaWithOwnCommunity=function(t,e,i,r){var s=this.M,o=this.totalWeights[r];return e+=this.loops[t],i/s-(o-e)*e*this.resolution/(2*s*s)},f.prototype.fastDelta=function(t,e,i,r){var s=this.M,o=this.totalWeights[r];return e+=this.loops[t],i-e*o*this.resolution/(2*s)},f.prototype.fastDeltaWithOwnCommunity=function(t,e,i,r){var s=this.M,o=this.totalWeights[r];return e+=this.loops[t],i-e*(o-e)*this.resolution/(2*s)},f.prototype.bounds=function(t){return[this.starts[t],this.starts[t+1]]},f.prototype.project=function(){var t=this,e={};return t.nodes.slice(0,this.C).forEach(function(i,r){e[i]=Array.from(t.neighborhood.slice(t.starts[r],t.starts[r+1])).map(function(s){return t.nodes[s]})}),e},f.prototype.collect=function(t){arguments.length<1&&(t=this.level);var e={},i=this.keepDendrogram?this.dendrogram[t]:this.mapping,r,s;for(r=0,s=i.length;r<s;r++)e[this.nodes[r]]=i[r];return e},f.prototype.assign=function(t,e){arguments.length<2&&(e=this.level);var i=this.keepDendrogram?this.dendrogram[e]:this.mapping,r,s;for(r=0,s=i.length;r<s;r++)this.graph.setNodeAttribute(this.nodes[r],t,i[r])},f.prototype[u]=function(){var t={};Object.defineProperty(t,"constructor",{value:f,enumerable:!1}),t.C=this.C,t.M=this.M,t.E=this.E,t.U=this.U,t.resolution=this.resolution,t.level=this.level,t.nodes=this.nodes,t.starts=this.starts.slice(0,t.C+1);var e=["neighborhood","weights"],i=["counts","loops","belongings","totalWeights"],r=this;return e.forEach(function(s){t[s]=r[s].slice(0,t.E)}),i.forEach(function(s){t[s]=r[s].slice(0,t.C)}),t.unused=this.unused.slice(0,this.U),this.keepDendrogram?t.dendrogram=this.dendrogram:t.mapping=this.mapping,t};function w(t,e){e=M(e,l);var i=e.resolution,r=p(e.getEdgeWeight).fromEntry,s=(t.size-t.selfLoopCount)*2,o=A.getPointerArray(s),y=A.getPointerArray(t.order+1),C=e.getEdgeWeight?Float64Array:A.getPointerArray(t.size*2);this.C=t.order,this.M=0,this.E=s,this.U=0,this.resolution=i,this.level=0,this.graph=t,this.nodes=new Array(t.order),this.keepDendrogram=e.keepDendrogram,this.neighborhood=new y(s),this.weights=new C(s),this.loops=new C(t.order),this.starts=new o(t.order+1),this.offsets=new o(t.order),this.belongings=new y(t.order),this.dendrogram=[],this.counts=new y(t.order),this.unused=new y(t.order),this.totalInWeights=new C(t.order),this.totalOutWeights=new C(t.order);var z={},d,h=0,W=0,a=this;t.forEachNode(function(n){a.nodes[h]=n,z[n]=h,W+=t.outDegreeWithoutSelfLoops(n),a.starts[h]=W,W+=t.inDegreeWithoutSelfLoops(n),a.offsets[h]=W,a.belongings[h]=h,a.counts[h]=1,h++}),t.forEachEdge(function(n,j,g,I,c,v,m){if(d=r(n,j,g,I,c,v,m),g=z[g],I=z[I],a.M+=d,g===I)a.loops[g]+=d,a.totalInWeights[g]+=d,a.totalOutWeights[g]+=d;else{a.totalOutWeights[g]+=d,a.totalInWeights[I]+=d;var T=--a.starts[g],b=--a.offsets[I];a.neighborhood[T]=I,a.neighborhood[b]=g,a.weights[T]=d,a.weights[b]=d}}),this.starts[h]=this.E,this.keepDendrogram?this.dendrogram.push(this.belongings.slice()):this.mapping=this.belongings.slice()}return w.prototype.bounds=f.prototype.bounds,w.prototype.inBounds=function(t){return[this.offsets[t],this.starts[t+1]]},w.prototype.outBounds=function(t){return[this.starts[t],this.offsets[t]]},w.prototype.project=f.prototype.project,w.prototype.projectIn=function(){var t=this,e={};return t.nodes.slice(0,this.C).forEach(function(i,r){e[i]=Array.from(t.neighborhood.slice(t.offsets[r],t.starts[r+1])).map(function(s){return t.nodes[s]})}),e},w.prototype.projectOut=function(){var t=this,e={};return t.nodes.slice(0,this.C).forEach(function(i,r){e[i]=Array.from(t.neighborhood.slice(t.starts[r],t.offsets[r])).map(function(s){return t.nodes[s]})}),e},w.prototype.isolate=function(t,e,i){var r=this.belongings[t];if(this.counts[r]===1)return r;var s=this.unused[--this.U],o=this.loops[t];return this.totalInWeights[r]-=e+o,this.totalInWeights[s]+=e+o,this.totalOutWeights[r]-=i+o,this.totalOutWeights[s]+=i+o,this.belongings[t]=s,this.counts[r]--,this.counts[s]++,s},w.prototype.move=function(t,e,i,r){var s=this.belongings[t],o=this.loops[t];this.totalInWeights[s]-=e+o,this.totalInWeights[r]+=e+o,this.totalOutWeights[s]-=i+o,this.totalOutWeights[r]+=i+o,this.belongings[t]=r;var y=this.counts[s]--===1;this.counts[r]++,y&&(this.unused[this.U++]=s)},w.prototype.computeNodeInDegree=function(t){var e,i,r,s=0;for(e=this.offsets[t],i=this.starts[t+1];e<i;e++)r=this.weights[e],s+=r;return s},w.prototype.computeNodeOutDegree=function(t){var e,i,r,s=0;for(e=this.starts[t],i=this.offsets[t];e<i;e++)r=this.weights[e],s+=r;return s},w.prototype.expensiveMove=function(t,e){var i=this.computeNodeInDegree(t),r=this.computeNodeOutDegree(t);this.move(t,i,r,e)},w.prototype.zoomOut=function(){var t=new Array(this.C-this.U),e={},i=this.nodes.length,r=0,s=0,o,y,C,z,d,h,W,a,n,j,g,I,c;for(o=0,C=this.C;o<C;o++)h=this.belongings[o],h in e||(e[h]=r,t[r]={inAdj:{},outAdj:{},totalInWeights:this.totalInWeights[h],totalOutWeights:this.totalOutWeights[h],internalWeights:0},r++),this.belongings[o]=e[h];var v,m;if(this.keepDendrogram){for(v=this.dendrogram[this.level],m=new(A.getPointerArray(r))(i),o=0;o<i;o++)m[o]=this.belongings[v[o]];this.dendrogram.push(m)}else for(o=0;o<i;o++)this.mapping[o]=this.belongings[this.mapping[o]];for(o=0,C=this.C;o<C;o++)for(h=this.belongings[o],n=this.offsets[o],a=t[h],I=a.inAdj,c=a.outAdj,a.internalWeights+=this.loops[o],y=this.starts[o],z=this.starts[o+1];y<z;y++){if(d=this.neighborhood[y],W=this.belongings[d],j=y<n,g=j?c:I,h===W){j&&(a.internalWeights+=this.weights[y]);continue}W in g||(g[W]=0),g[W]+=this.weights[y]}for(this.C=r,d=0,h=0;h<r;h++){a=t[h],I=a.inAdj,c=a.outAdj,h=+h,this.totalInWeights[h]=a.totalInWeights,this.totalOutWeights[h]=a.totalOutWeights,this.loops[h]=a.internalWeights,this.counts[h]=1,this.starts[h]=d,this.belongings[h]=h;for(W in c)this.neighborhood[d]=+W,this.weights[d]=c[W],s++,d++;this.offsets[h]=d;for(W in I)this.neighborhood[d]=+W,this.weights[d]=I[W],s++,d++}return this.starts[r]=s,this.E=s,this.U=0,this.level++,e},w.prototype.modularity=function(){var t,e,i,r,s,o=0,y=this.M,C=new Float64Array(this.C);for(i=0;i<this.C;i++)for(t=this.belongings[i],C[t]+=this.loops[i],r=this.starts[i],s=this.offsets[i];r<s;r++)e=this.belongings[this.neighborhood[r]],t===e&&(C[t]+=this.weights[r]);for(i=0;i<this.C;i++)o+=C[i]/y-this.totalInWeights[i]*this.totalOutWeights[i]/Math.pow(y,2)*this.resolution;return o},w.prototype.delta=function(t,e,i,r,s){var o=this.M,y=this.totalInWeights[s],C=this.totalOutWeights[s],z=this.loops[t];return e+=z,i+=z,r/o-(i*y+e*C)*this.resolution/(o*o)},w.prototype.deltaWithOwnCommunity=function(t,e,i,r,s){var o=this.M,y=this.totalInWeights[s],C=this.totalOutWeights[s],z=this.loops[t];return e+=z,i+=z,r/o-(i*(y-e)+e*(C-i))*this.resolution/(o*o)},w.prototype.collect=f.prototype.collect,w.prototype.assign=f.prototype.assign,w.prototype[u]=function(){var t={};Object.defineProperty(t,"constructor",{value:w,enumerable:!1}),t.C=this.C,t.M=this.M,t.E=this.E,t.U=this.U,t.resolution=this.resolution,t.level=this.level,t.nodes=this.nodes,t.starts=this.starts.slice(0,t.C+1);var e=["neighborhood","weights"],i=["counts","offsets","loops","belongings","totalInWeights","totalOutWeights"],r=this;return e.forEach(function(s){t[s]=r[s].slice(0,t.E)}),i.forEach(function(s){t[s]=r[s].slice(0,t.C)}),t.unused=this.unused.slice(0,this.U),this.keepDendrogram?t.dendrogram=this.dendrogram:t.mapping=this.mapping,t},H.UndirectedLouvainIndex=f,H.DirectedLouvainIndex=w,H}var rt,ft;function It(){if(ft)return rt;ft=1;var A=dt(),M=pt(),p=yt(),u=wt(),l=Wt(),f=bt().createRandomIndex,w=At(),t=w.UndirectedLouvainIndex,e=w.DirectedLouvainIndex,i={nodeCommunityAttribute:"community",getEdgeWeight:"weight",fastLocalMoves:!0,randomWalk:!0,resolution:1,rng:Math.random};function r(h,W,a){var n=h.get(W);typeof n>"u"&&(n=0),n+=a,h.set(W,n)}var s=1e-10;function o(h,W,a,n,j){return Math.abs(n-j)<s?h===W?!1:a>h:n>j}function y(h,W,a){var n=new t(W,{getEdgeWeight:a.getEdgeWeight,keepDendrogram:h,resolution:a.resolution}),j=f(a.rng),g=!0,I=!0,c,v,m=new u(Float64Array,n.C),T,b,R,_,U,P,S,D,q,E,N,k,x,L,Q,O,G=0,V=0,B=[],X,F;for(a.fastLocalMoves&&(T=new l(n.C));g;){if(E=n.C,g=!1,I=!0,a.fastLocalMoves){for(F=0,P=a.randomWalk?j(E):0,S=0;S<E;S++,P++)D=P%E,T.enqueue(D);for(;T.size!==0;){for(D=T.dequeue(),V++,N=0,m.clear(),c=n.belongings[D],b=n.starts[D],R=n.starts[D+1];b<R;b++)q=n.neighborhood[b],_=n.weights[b],v=n.belongings[q],N+=_,r(m,v,_);for(L=n.fastDeltaWithOwnCommunity(D,N,m.get(c)||0,c),x=c,U=0;U<m.size;U++)v=m.dense[U],v!==c&&(k=m.vals[U],G++,O=n.fastDelta(D,N,k,v),Q=o(x,c,v,O,L),Q&&(L=O,x=v));if(L<0){if(x=n.isolate(D,N),x===c)continue}else{if(x===c)continue;n.move(D,N,x)}for(g=!0,F++,b=n.starts[D],R=n.starts[D+1];b<R;b++)q=n.neighborhood[b],v=n.belongings[q],v!==x&&T.enqueue(q)}B.push(F)}else for(X=[],B.push(X);I;){for(I=!1,F=0,P=a.randomWalk?j(E):0,S=0;S<E;S++,P++){for(D=P%E,V++,N=0,m.clear(),c=n.belongings[D],b=n.starts[D],R=n.starts[D+1];b<R;b++)q=n.neighborhood[b],_=n.weights[b],v=n.belongings[q],N+=_,r(m,v,_);for(L=n.fastDeltaWithOwnCommunity(D,N,m.get(c)||0,c),x=c,U=0;U<m.size;U++)v=m.dense[U],v!==c&&(k=m.vals[U],G++,O=n.fastDelta(D,N,k,v),Q=o(x,c,v,O,L),Q&&(L=O,x=v));if(L<0){if(x=n.isolate(D,N),x===c)continue}else{if(x===c)continue;n.move(D,N,x)}I=!0,F++}X.push(F),g=I||g}g&&n.zoomOut()}var $={index:n,deltaComputations:G,nodesVisited:V,moves:B};return $}function C(h,W,a){var n=new e(W,{getEdgeWeight:a.getEdgeWeight,keepDendrogram:h,resolution:a.resolution}),j=f(a.rng),g=!0,I=!0,c,v,m=new u(Float64Array,n.C),T,b,R,_,U,P,S,D,q,E,N,k,x,L,Q,O,G,V,B,X=0,F=0,$=[],J,Y;for(a.fastLocalMoves&&(T=new l(n.C));g;){if(k=n.C,g=!1,I=!0,a.fastLocalMoves){for(Y=0,D=a.randomWalk?j(k):0,q=0;q<k;q++,D++)E=D%k,T.enqueue(E);for(;T.size!==0;){for(E=T.dequeue(),F++,x=0,L=0,m.clear(),c=n.belongings[E],b=n.starts[E],R=n.starts[E+1],_=n.offsets[E];b<R;b++)U=b<_,N=n.neighborhood[b],P=n.weights[b],v=n.belongings[N],U?L+=P:x+=P,r(m,v,P);for(G=n.deltaWithOwnCommunity(E,x,L,m.get(c)||0,c),O=c,S=0;S<m.size;S++)v=m.dense[S],v!==c&&(Q=m.vals[S],X++,B=n.delta(E,x,L,Q,v),V=o(O,c,v,B,G),V&&(G=B,O=v));if(G<0){if(O=n.isolate(E,x,L),O===c)continue}else{if(O===c)continue;n.move(E,x,L,O)}for(g=!0,Y++,b=n.starts[E],R=n.starts[E+1];b<R;b++)N=n.neighborhood[b],v=n.belongings[N],v!==O&&T.enqueue(N)}$.push(Y)}else for(J=[],$.push(J);I;){for(I=!1,Y=0,D=a.randomWalk?j(k):0,q=0;q<k;q++,D++){for(E=D%k,F++,x=0,L=0,m.clear(),c=n.belongings[E],b=n.starts[E],R=n.starts[E+1],_=n.offsets[E];b<R;b++)U=b<_,N=n.neighborhood[b],P=n.weights[b],v=n.belongings[N],U?L+=P:x+=P,r(m,v,P);for(G=n.deltaWithOwnCommunity(E,x,L,m.get(c)||0,c),O=c,S=0;S<m.size;S++)v=m.dense[S],v!==c&&(Q=m.vals[S],X++,B=n.delta(E,x,L,Q,v),V=o(O,c,v,B,G),V&&(G=B,O=v));if(G<0){if(O=n.isolate(E,x,L),O===c)continue}else{if(O===c)continue;n.move(E,x,L,O)}I=!0,Y++}J.push(Y),g=I||g}g&&n.zoomOut()}var ct={index:n,deltaComputations:X,nodesVisited:F,moves:$};return ct}function z(h,W,a,n){if(!M(a))throw new Error("graphology-communities-louvain: the given graph is not a valid graphology instance.");var j=p(a);if(j==="mixed")throw new Error("graphology-communities-louvain: cannot run the algorithm on a true mixed graph.");n=A(n,i);var g=0;if(a.size===0){if(h){a.forEachNode(function(b){a.setNodeAttribute(b,n.nodeCommunityAttribute,g++)});return}var I={};return a.forEachNode(function(b){I[b]=g++}),W?{communities:I,count:a.order,deltaComputations:0,dendrogram:null,level:0,modularity:NaN,moves:null,nodesVisited:0,resolution:n.resolution}:I}var c=j==="undirected"?y:C,v=c(W,a,n),m=v.index;if(!W){if(h){m.assign(n.nodeCommunityAttribute);return}return m.collect()}var T={count:m.C,deltaComputations:v.deltaComputations,dendrogram:m.dendrogram,level:m.level,modularity:m.modularity(),moves:v.moves,nodesVisited:v.nodesVisited,resolution:n.resolution};return h?(m.assign(n.nodeCommunityAttribute),T):(T.communities=m.collect(),T)}var d=z.bind(null,!1,!1);return d.assign=z.bind(null,!0,!1),d.detailed=z.bind(null,!1,!0),d.defaults=i,rt=d,rt}var Ct=It();const jt=vt(Ct);export{jt as l};
