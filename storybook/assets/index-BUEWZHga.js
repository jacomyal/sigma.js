import{a as Oe}from"./_commonjsHelpers-C4iS2aBk.js";import{r as _e}from"./sigma-BsJT_GRv.js";import{r as Ie}from"./getters-CXJ0gpj8.js";var oe,ge;function Ge(){if(ge)return oe;ge=1;var y=0,E=1,s=2,t=3,i=4,v=5,f=6,o=7,c=8,L=9,I=0,C=1,K=2,O=0,T=1,S=2,z=3,m=4,D=5,p=6,k=7,P=8,ce=3,j=10,we=3,A=9,fe=10;return oe=function(R,e,N){var le,u,n,w,G,B,Q,H,h,ae,q=e.length,De=N.length,d=R.adjustSizes,Re=R.barnesHutTheta*R.barnesHutTheta,x,_,g,b,F,a,l,r=[];for(n=0;n<q;n+=j)e[n+i]=e[n+s],e[n+v]=e[n+t],e[n+s]=0,e[n+t]=0;if(R.outboundAttractionDistribution){for(x=0,n=0;n<q;n+=j)x+=e[n+f];x/=q/j}if(R.barnesHutOptimize){var V=1/0,$=-1/0,Z=1/0,X=-1/0,W,Y,he;for(n=0;n<q;n+=j)V=Math.min(V,e[n+y]),$=Math.max($,e[n+y]),Z=Math.min(Z,e[n+E]),X=Math.max(X,e[n+E]);var ee=$-V,ne=X-Z;for(ee>ne?(Z-=(ee-ne)/2,X=Z+ee):(V-=(ne-ee)/2,$=V+ne),r[0+O]=-1,r[0+T]=(V+$)/2,r[0+S]=(Z+X)/2,r[0+z]=Math.max($-V,X-Z),r[0+m]=-1,r[0+D]=-1,r[0+p]=0,r[0+k]=0,r[0+P]=0,le=1,n=0;n<q;n+=j)for(u=0,he=ce;;)if(r[u+D]>=0){e[n+y]<r[u+T]?e[n+E]<r[u+S]?W=r[u+D]:W=r[u+D]+A:e[n+E]<r[u+S]?W=r[u+D]+A*2:W=r[u+D]+A*3,r[u+k]=(r[u+k]*r[u+p]+e[n+y]*e[n+f])/(r[u+p]+e[n+f]),r[u+P]=(r[u+P]*r[u+p]+e[n+E]*e[n+f])/(r[u+p]+e[n+f]),r[u+p]+=e[n+f],u=W;continue}else if(r[u+O]<0){r[u+O]=n;break}else{if(r[u+D]=le*A,H=r[u+z]/2,h=r[u+D],r[h+O]=-1,r[h+T]=r[u+T]-H,r[h+S]=r[u+S]-H,r[h+z]=H,r[h+m]=h+A,r[h+D]=-1,r[h+p]=0,r[h+k]=0,r[h+P]=0,h+=A,r[h+O]=-1,r[h+T]=r[u+T]-H,r[h+S]=r[u+S]+H,r[h+z]=H,r[h+m]=h+A,r[h+D]=-1,r[h+p]=0,r[h+k]=0,r[h+P]=0,h+=A,r[h+O]=-1,r[h+T]=r[u+T]+H,r[h+S]=r[u+S]-H,r[h+z]=H,r[h+m]=h+A,r[h+D]=-1,r[h+p]=0,r[h+k]=0,r[h+P]=0,h+=A,r[h+O]=-1,r[h+T]=r[u+T]+H,r[h+S]=r[u+S]+H,r[h+z]=H,r[h+m]=r[u+m],r[h+D]=-1,r[h+p]=0,r[h+k]=0,r[h+P]=0,le+=4,e[r[u+O]+y]<r[u+T]?e[r[u+O]+E]<r[u+S]?W=r[u+D]:W=r[u+D]+A:e[r[u+O]+E]<r[u+S]?W=r[u+D]+A*2:W=r[u+D]+A*3,r[u+p]=e[r[u+O]+f],r[u+k]=e[r[u+O]+y],r[u+P]=e[r[u+O]+E],r[W+O]=r[u+O],r[u+O]=-1,e[n+y]<r[u+T]?e[n+E]<r[u+S]?Y=r[u+D]:Y=r[u+D]+A:e[n+E]<r[u+S]?Y=r[u+D]+A*2:Y=r[u+D]+A*3,W===Y)if(he--){u=W;continue}else{he=ce;break}r[Y+O]=n;break}}if(R.barnesHutOptimize)for(_=R.scalingRatio,n=0;n<q;n+=j)for(u=0;;)if(r[u+D]>=0)if(a=Math.pow(e[n+y]-r[u+k],2)+Math.pow(e[n+E]-r[u+P],2),ae=r[u+z],4*ae*ae/a<Re){if(g=e[n+y]-r[u+k],b=e[n+E]-r[u+P],d===!0?a>0?(l=_*e[n+f]*r[u+p]/a,e[n+s]+=g*l,e[n+t]+=b*l):a<0&&(l=-_*e[n+f]*r[u+p]/Math.sqrt(a),e[n+s]+=g*l,e[n+t]+=b*l):a>0&&(l=_*e[n+f]*r[u+p]/a,e[n+s]+=g*l,e[n+t]+=b*l),u=r[u+m],u<0)break;continue}else{u=r[u+D];continue}else{if(B=r[u+O],B>=0&&B!==n&&(g=e[n+y]-e[B+y],b=e[n+E]-e[B+E],a=g*g+b*b,d===!0?a>0?(l=_*e[n+f]*e[B+f]/a,e[n+s]+=g*l,e[n+t]+=b*l):a<0&&(l=-_*e[n+f]*e[B+f]/Math.sqrt(a),e[n+s]+=g*l,e[n+t]+=b*l):a>0&&(l=_*e[n+f]*e[B+f]/a,e[n+s]+=g*l,e[n+t]+=b*l)),u=r[u+m],u<0)break;continue}else for(_=R.scalingRatio,w=0;w<q;w+=j)for(G=0;G<w;G+=j)g=e[w+y]-e[G+y],b=e[w+E]-e[G+E],d===!0?(a=Math.sqrt(g*g+b*b)-e[w+c]-e[G+c],a>0?(l=_*e[w+f]*e[G+f]/a/a,e[w+s]+=g*l,e[w+t]+=b*l,e[G+s]-=g*l,e[G+t]-=b*l):a<0&&(l=100*_*e[w+f]*e[G+f],e[w+s]+=g*l,e[w+t]+=b*l,e[G+s]-=g*l,e[G+t]-=b*l)):(a=Math.sqrt(g*g+b*b),a>0&&(l=_*e[w+f]*e[G+f]/a/a,e[w+s]+=g*l,e[w+t]+=b*l,e[G+s]-=g*l,e[G+t]-=b*l));for(h=R.gravity/R.scalingRatio,_=R.scalingRatio,n=0;n<q;n+=j)l=0,g=e[n+y],b=e[n+E],a=Math.sqrt(Math.pow(g,2)+Math.pow(b,2)),R.strongGravityMode?a>0&&(l=_*e[n+f]*h):a>0&&(l=_*e[n+f]*h/a),e[n+s]-=g*l,e[n+t]-=b*l;for(_=1*(R.outboundAttractionDistribution?x:1),Q=0;Q<De;Q+=we)w=N[Q+I],G=N[Q+C],H=N[Q+K],F=Math.pow(H,R.edgeWeightInfluence),g=e[w+y]-e[G+y],b=e[w+E]-e[G+E],d===!0?(a=Math.sqrt(g*g+b*b)-e[w+c]-e[G+c],R.linLogMode?R.outboundAttractionDistribution?a>0&&(l=-_*F*Math.log(1+a)/a/e[w+f]):a>0&&(l=-_*F*Math.log(1+a)/a):R.outboundAttractionDistribution?a>0&&(l=-_*F/e[w+f]):a>0&&(l=-_*F)):(a=Math.sqrt(Math.pow(g,2)+Math.pow(b,2)),R.linLogMode?R.outboundAttractionDistribution?a>0&&(l=-_*F*Math.log(1+a)/a/e[w+f]):a>0&&(l=-_*F*Math.log(1+a)/a):R.outboundAttractionDistribution?(a=1,l=-_*F/e[w+f]):(a=1,l=-_*F)),a>0&&(e[w+s]+=g*l,e[w+t]+=b*l,e[G+s]-=g*l,e[G+t]-=b*l);var re,M,ue,J,se,te;if(d===!0)for(n=0;n<q;n+=j)e[n+L]!==1&&(re=Math.sqrt(Math.pow(e[n+s],2)+Math.pow(e[n+t],2)),re>fe&&(e[n+s]=e[n+s]*fe/re,e[n+t]=e[n+t]*fe/re),M=e[n+f]*Math.sqrt((e[n+i]-e[n+s])*(e[n+i]-e[n+s])+(e[n+v]-e[n+t])*(e[n+v]-e[n+t])),ue=Math.sqrt((e[n+i]+e[n+s])*(e[n+i]+e[n+s])+(e[n+v]+e[n+t])*(e[n+v]+e[n+t]))/2,J=.1*Math.log(1+ue)/(1+Math.sqrt(M)),se=e[n+y]+e[n+s]*(J/R.slowDown),e[n+y]=se,te=e[n+E]+e[n+t]*(J/R.slowDown),e[n+E]=te);else for(n=0;n<q;n+=j)e[n+L]!==1&&(M=e[n+f]*Math.sqrt((e[n+i]-e[n+s])*(e[n+i]-e[n+s])+(e[n+v]-e[n+t])*(e[n+v]-e[n+t])),ue=Math.sqrt((e[n+i]+e[n+s])*(e[n+i]+e[n+s])+(e[n+v]+e[n+t])*(e[n+v]+e[n+t]))/2,J=e[n+o]*Math.log(1+ue)/(1+Math.sqrt(M)),e[n+o]=Math.min(1,Math.sqrt(J*(Math.pow(e[n+s],2)+Math.pow(e[n+t],2))/(1+Math.sqrt(M)))),se=e[n+y]+e[n+s]*(J/R.slowDown),e[n+y]=se,te=e[n+E]+e[n+t]*(J/R.slowDown),e[n+E]=te);return{}},oe}var U={},be;function Se(){if(be)return U;be=1;var y=10,E=3;return U.assign=function(s){s=s||{};var t=Array.prototype.slice.call(arguments).slice(1),i,v,f;for(i=0,f=t.length;i<f;i++)if(t[i])for(v in t[i])s[v]=t[i][v];return s},U.validateSettings=function(s){return"linLogMode"in s&&typeof s.linLogMode!="boolean"?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in s&&typeof s.outboundAttractionDistribution!="boolean"?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in s&&typeof s.adjustSizes!="boolean"?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in s&&typeof s.edgeWeightInfluence!="number"?{message:"the `edgeWeightInfluence` setting should be a number."}:"scalingRatio"in s&&!(typeof s.scalingRatio=="number"&&s.scalingRatio>=0)?{message:"the `scalingRatio` setting should be a number >= 0."}:"strongGravityMode"in s&&typeof s.strongGravityMode!="boolean"?{message:"the `strongGravityMode` setting should be a boolean."}:"gravity"in s&&!(typeof s.gravity=="number"&&s.gravity>=0)?{message:"the `gravity` setting should be a number >= 0."}:"slowDown"in s&&!(typeof s.slowDown=="number"||s.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in s&&typeof s.barnesHutOptimize!="boolean"?{message:"the `barnesHutOptimize` setting should be a boolean."}:"barnesHutTheta"in s&&!(typeof s.barnesHutTheta=="number"&&s.barnesHutTheta>=0)?{message:"the `barnesHutTheta` setting should be a number >= 0."}:null},U.graphToByteArrays=function(s,t){var i=s.order,v=s.size,f={},o,c=new Float32Array(i*y),L=new Float32Array(v*E);return o=0,s.forEachNode(function(I,C){f[I]=o,c[o]=C.x,c[o+1]=C.y,c[o+2]=0,c[o+3]=0,c[o+4]=0,c[o+5]=0,c[o+6]=1,c[o+7]=1,c[o+8]=C.size||1,c[o+9]=C.fixed?1:0,o+=y}),o=0,s.forEachEdge(function(I,C,K,O,T,S,z){var m=f[K],D=f[O],p=t(I,C,K,O,T,S,z);c[m+6]+=p,c[D+6]+=p,L[o]=m,L[o+1]=D,L[o+2]=p,o+=E}),{nodes:c,edges:L}},U.assignLayoutChanges=function(s,t,i){var v=0;s.updateEachNodeAttributes(function(f,o){return o.x=t[v],o.y=t[v+1],v+=y,i?i(f,o):o})},U.readGraphPositions=function(s,t){var i=0;s.forEachNode(function(v,f){t[i]=f.x,t[i+1]=f.y,i+=y})},U.collectLayoutChanges=function(s,t,i){for(var v=s.nodes(),f={},o=0,c=0,L=t.length;o<L;o+=y){if(i){var I=Object.assign({},s.getNodeAttributes(v[c]));I.x=t[o],I.y=t[o+1],I=i(v[c],I),f[v[c]]={x:I.x,y:I.y}}else f[v[c]]={x:t[o],y:t[o+1]};c++}return f},U.createWorker=function(t){var i=window.URL||window.webkitURL,v=t.toString(),f=i.createObjectURL(new Blob(["("+v+").call(this);"],{type:"text/javascript"})),o=new Worker(f);return i.revokeObjectURL(f),o},U}var ie,ye;function pe(){return ye||(ye=1,ie={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5}),ie}var ve,Ee;function Le(){if(Ee)return ve;Ee=1;var y=_e(),E=Ie().createEdgeWeightGetter,s=Ge(),t=Se(),i=pe();function v(c,L,I){if(!y(L))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");typeof I=="number"&&(I={iterations:I});var C=I.iterations;if(typeof C!="number")throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(C<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var K=E("getEdgeWeight"in I?I.getEdgeWeight:"weight").fromEntry,O=typeof I.outputReducer=="function"?I.outputReducer:null,T=t.assign({},i,I.settings),S=t.validateSettings(T);if(S)throw new Error("graphology-layout-forceatlas2: "+S.message);var z=t.graphToByteArrays(L,K),m;for(m=0;m<C;m++)s(T,z.nodes,z.edges);if(c){t.assignLayoutChanges(L,z.nodes,O);return}return t.collectLayoutChanges(L,z.nodes)}function f(c){var L=typeof c=="number"?c:c.order;return{barnesHutOptimize:L>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(L)}}var o=v.bind(null,!1);return o.assign=v.bind(null,!0),o.inferSettings=f,ve=o,ve}var Te=Le();const Ce=Oe(Te);export{pe as a,Ce as f,Se as r};
