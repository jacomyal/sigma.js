import{r as ot}from"./is-graph-constructor-BVugt_gr.js";import{r as dt}from"./add-edge-DJG1E9TZ.js";import{r as lt}from"./sigma-BsJT_GRv.js";import{r as gt}from"./infer-type-BZ77ykGk.js";var Z={},X={},et;function ft(){if(et)return X;et=1;var O=/^\s$/,y=/\s*,\s*/,k=/\s*\|\s*/;function e(b){return O.test(b)}function n(b){var g,c,f,u,v=!1,h=!1,l=void 0,x=[],S="";for(f=0,u=b.length;f<u;f++)if(g=b[f],v){if(l===void 0&&(l=""),!S&&g===","){f--,v=!1;continue}if(!h&&g===S){v=!1;continue}if(g==="\\"){if(f+1<u&&(c=b[f+1],c==="r"||c==="t"||c==="n"||c==="\\")){c==="n"?l+=`
`:c==="t"?l+="	":c==="r"?l+="\r":l+="\\",h=!1,f++;continue}h=!0}else l+=g,h=!1}else{if(e(g))continue;if(g===","){l!==void 0&&(x.push(l),l=void 0);continue}g==='"'||g==="'"?S=g:(f--,S=""),v=!0,h=!1}return l!==void 0&&x.push(l),x}function E(b,g){return!b||b==="string"?g:b==="boolean"?g==="true":b==="byte"||b==="short"||b==="integer"||b==="long"||b==="float"||b==="double"?+g:g}function d(b,g){if(b.startsWith("list")){var c=b.slice(4),f;return g.length>=2&&g[0]==="["&&g[g.length-1]==="]"?f=n(g.slice(1,-1)):g.includes("|")?f=g.split(k):g.includes(",")?f=g.split(y):f=[g],f.map(function(u){return E(c,u)})}else return E(b,g)}X.parseListPieces=n,X.parseScalarValue=E,X.parseValue=d;var $=/["'<>&\s]/g;return X.sanitizeTagName=function(g){return g.replace($,"").trim()},X}var H,rt;function ct(){if(rt)return H;rt=1;var O=ot(),y=dt().mergeEdge,k=ft(),e=k.parseValue;function n(c){return c!==c}function E(c){var f=c.getAttribute("hex");if(f)return f;var u=c.getAttribute("a"),v=c.getAttribute("r"),h=c.getAttribute("g"),l=c.getAttribute("b");return u?"rgba("+v+","+h+","+l+","+u+")":"rgb("+v+","+h+","+l+")"}function d(c,f){var u=c.getElementsByTagName("viz:"+f)[0];return u||(u=c.getElementsByTagNameNS("viz",f)[0]),u||(u=c.getElementsByTagName(f)[0]),u}function $(c){for(var f={},u,v,h=0,l=c.length;h<l;h++)u=c[h],u.nodeName!=="#text"&&(v=u.textContent.trim(),v&&(f[u.tagName.toLowerCase()]=u.textContent));return f}function b(c){for(var f={},u={},v,h,l,x=0,S=c.length;x<S;x++)v=c[x],l=v.getAttribute("id")||v.getAttribute("for"),f[l]={id:l,type:v.getAttribute("type")||"string",title:n(+l)?l:v.getAttribute("title")||l},h=v.getElementsByTagName("default")[0],h&&(u[f[l].title]=e(f[l].type,h.textContent));return[f,u]}function g(c,f,u,v){var h={},l=u.getAttribute("label"),x=u.getAttribute("weight"),S=u.getAttribute("kind");l&&(h.label=l),x&&(h.weight=+x),S&&(h.kind=S);for(var q=u.getElementsByTagName("attvalue"),C,B,I,T,P,z,F=0,V=q.length;F<V;F++){if(C=q[F],z=C.getAttribute("id")||C.getAttribute("for"),T=C.getAttribute("value"),B=c[z],B)I=B.title,P=B.type;else if(v)I=z,P="string";else throw new Error('graphology-gexf/parser: Found undeclared attribute "'+z+'"');h[I]=e(P,T)}var D;for(D in f)D in h||(h[D]=f[D]);var t=d(u,"color");t&&(h.color=E(t)),t=d(u,"size"),t&&(h.size=+t.getAttribute("value"));var r,i,s;return t=d(u,"position"),t&&(r=t.getAttribute("x"),i=t.getAttribute("y"),s=t.getAttribute("z"),r&&(h.x=+r),i&&(h.y=+i),s&&(h.z=+s)),t=d(u,"shape"),t&&(h.shape=t.getAttribute("value")),t=d(u,"thickness"),t&&(h.thickness=+t.getAttribute("value")),h}return H=function(f,u){return function(h,l,x){x=x||{};var S=x.addMissingNodes===!0,q=x.allowUndeclaredAttributes===!0,C=x.respectInputGraphType===!0,B,I=l,T,P,z,F,V,D,t,r,i;if(!O(h))throw new Error("graphology-gexf/parser: invalid Graph constructor.");if(typeof l=="string"&&(I=new f().parseFromString(l,"application/xml")),!(I instanceof u))throw new Error("graphology-gexf/parser: source should either be a XML document or a string.");var s=I.getElementsByTagName("graph")[0],o=I.getElementsByTagName("meta")[0],A=o&&o.childNodes||[],m=I.getElementsByTagName("node"),a=I.getElementsByTagName("edge"),N=I.getElementsByTagName("attributes"),L=[],R=[];for(r=0,i=N.length;r<i;r++)T=N[r],T.getAttribute("class")==="node"?L=T.getElementsByTagName("attribute"):T.getAttribute("class")==="edge"&&(R=T.getElementsByTagName("attribute"));var w=s.getAttribute("defaultedgetype")||"undirected";w==="mutual"&&(w="undirected"),P=b(L);var M=P[0],p=P[1];P=b(R);var G=P[0],U=P[1],W=a[0]?a[0].getAttribute("type")||w:"mixed",j=C?{}:{type:W},_=new h(j),ht=$(A),tt=o&&o.getAttribute("lastmodifieddate");for(_.replaceAttributes(ht),tt&&_.setAttribute("lastModifiedDate",tt),r=0,i=m.length;r<i;r++)T=m[r],_.addNode(T.getAttribute("id"),g(M,p,T,q));for(r=0,i=a.length;r<i;r++){if(T=a[r],V=T.getAttribute("id"),z=T.getAttribute("type")||w,D=T.getAttribute("source"),t=T.getAttribute("target"),F=g(G,U,T,q),z!==_.type&&_.type!=="mixed"){if(C)throw new Error("graphology-gexf/parser: one of the file's edges does not respect the input graph type: "+_.type+".");_=_.copy({type:"mixed"})}if(!_.multi&&(z==="directed"&&_.hasDirectedEdge(D,t)||_.hasUndirectedEdge(D,t))){if(C)throw new Error("graphology-gexf/parser: the file contains parallel edges that the input graph type does not allow.");_=_.copy({multi:!0})}if(B=y(_,z!=="directed",V||null,D,t,F),!S&&(B[2]||B[3]))throw new Error("graphology-gexf/parser: one of your gexf file edges points to an inexisting node. Set the parser `addMissingNodes` option to `true` if you do not care.")}return _}},H}var Y,it;function Et(){if(it)return Y;it=1;var O=ct();return Y=O(DOMParser,Document),Y}var J,nt;function mt(){if(nt)return J;nt=1;function O(e){return typeof e!="number"&&!e}function y(e){if(typeof e=="string")return e;if(typeof e=="number")return e+"";if(typeof e=="function")return e();if(e instanceof k)return e.toString();throw Error("Bad Parameter")}function k(e,n){if(!(this instanceof k))return new k;this.name_regex=/[_:A-Za-z][-._:A-Za-z0-9]*/,this.indent=!!e,this.indentString=this.indent&&typeof e=="string"?e:"    ",this.output="",this.stack=[],this.tags=0,this.attributes=0,this.attribute=0,this.texts=0,this.comment=0,this.dtd=0,this.root="",this.pi=0,this.cdata=0,this.started_write=!1,this.writer,this.writer_encoding="UTF-8",typeof n=="function"?this.writer=n:this.writer=function(E,d){this.output+=E}}return k.prototype={toString:function(){return this.flush(),this.output},indenter:function(){if(this.indent){this.write(`
`);for(var e=1;e<this.tags;e++)this.write(this.indentString)}},write:function(){for(var e=0;e<arguments.length;e++)this.writer(arguments[e],this.writer_encoding)},flush:function(){for(var e=this.tags;e>0;e--)this.endElement();this.tags=0},startDocument:function(e,n,E){return this.tags||this.attributes?this:(this.startPI("xml"),this.startAttribute("version"),this.text(typeof e=="string"?e:"1.0"),this.endAttribute(),typeof n=="string"&&(this.startAttribute("encoding"),this.text(n),this.endAttribute(),this.writer_encoding=n),E&&(this.startAttribute("standalone"),this.text("yes"),this.endAttribute()),this.endPI(),this.indent||this.write(`
`),this)},endDocument:function(){return this.attributes&&this.endAttributes(),this},writeElement:function(e,n){return this.startElement(e).text(n).endElement()},writeElementNS:function(e,n,E,d){return d||(d=E),this.startElementNS(e,n,E).text(d).endElement()},startElement:function(e){if(e=y(e),!e.match(this.name_regex)||this.tags===0&&this.root&&this.root!==e)throw Error("Invalid Parameter");return this.attributes&&this.endAttributes(),++this.tags,this.texts=0,this.stack.length>0&&(this.stack[this.stack.length-1].containsTag=!0),this.stack.push({name:e,tags:this.tags}),this.started_write&&this.indenter(),this.write("<",e),this.startAttributes(),this.started_write=!0,this},startElementNS:function(e,n,E){if(e=y(e),n=y(n),!e.match(this.name_regex)||!n.match(this.name_regex))throw Error("Invalid Parameter");return this.attributes&&this.endAttributes(),++this.tags,this.texts=0,this.stack.length>0&&(this.stack[this.stack.length-1].containsTag=!0),this.stack.push({name:e+":"+n,tags:this.tags}),this.started_write&&this.indenter(),this.write("<",e+":"+n),this.startAttributes(),this.started_write=!0,this},endElement:function(){if(!this.tags)return this;var e=this.stack.pop();return this.attributes>0?(this.attribute&&(this.texts&&this.endAttribute(),this.endAttribute()),this.write("/"),this.endAttributes()):(e.containsTag&&this.indenter(),this.write("</",e.name,">")),--this.tags,this.texts=0,this},writeAttribute:function(e,n){return typeof n=="function"&&(n=n()),O(n)?this:this.startAttribute(e).text(n).endAttribute()},writeAttributeNS:function(e,n,E,d){return d||(d=E),typeof d=="function"&&(d=d()),O(d)?this:this.startAttributeNS(e,n,E).text(d).endAttribute()},startAttributes:function(){return this.attributes=1,this},endAttributes:function(){return this.attributes?(this.attribute&&this.endAttribute(),this.attributes=0,this.attribute=0,this.texts=0,this.write(">"),this):this},startAttribute:function(e){if(e=y(e),!e.match(this.name_regex))throw Error("Invalid Parameter");return!this.attributes&&!this.pi?this:this.attribute?this:(this.attribute=1,this.write(" ",e,'="'),this)},startAttributeNS:function(e,n,E){if(e=y(e),n=y(n),!e.match(this.name_regex)||!n.match(this.name_regex))throw Error("Invalid Parameter");return!this.attributes&&!this.pi?this:this.attribute?this:(this.attribute=1,this.write(" ",e+":"+n,'="'),this)},endAttribute:function(){return this.attribute?(this.attribute=0,this.texts=0,this.write('"'),this):this},text:function(e){return e=y(e),!this.tags&&!this.comment&&!this.pi&&!this.cdata?this:this.attributes&&this.attribute?(++this.texts,this.write(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")),this):(this.attributes&&!this.attribute&&this.endAttributes(),this.comment||this.cdata?this.write(e):this.write(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),++this.texts,this.started_write=!0,this)},writeComment:function(e){return this.startComment().text(e).endComment()},startComment:function(){return this.comment?this:(this.attributes&&this.endAttributes(),this.indenter(),this.write("<!--"),this.comment=1,this.started_write=!0,this)},endComment:function(){return this.comment?(this.write("-->"),this.comment=0,this):this},writeDocType:function(e,n,E,d){return this.startDocType(e,n,E,d).endDocType()},startDocType:function(e,n,E,d){if(this.dtd||this.tags)return this;if(e=y(e),n=n&&y(n),E=E&&y(E),d=d&&y(d),!e.match(this.name_regex)||n&&!n.match(/^[\w\-][\w\s\-\/\+\:\.]*/)||E&&!E.match(/^[\w\.][\w\-\/\\\:\.]*/)||d&&!d.match(/[\w\s\<\>\+\.\!\#\-\?\*\,\(\)\|]*/))throw Error("Invalid Parameter");return n=n?' PUBLIC "'+n+'"':E?" SYSTEM":"",E=E?' "'+E+'"':"",d=d?" ["+d+"]":"",this.started_write&&this.indenter(),this.write("<!DOCTYPE ",e,n,E,d),this.root=e,this.dtd=1,this.started_write=!0,this},endDocType:function(){return this.dtd?(this.write(">"),this):this},writePI:function(e,n){return this.startPI(e).text(n).endPI()},startPI:function(e){if(e=y(e),!e.match(this.name_regex))throw Error("Invalid Parameter");return this.pi?this:(this.attributes&&this.endAttributes(),this.started_write&&this.indenter(),this.write("<?",e),this.pi=1,this.started_write=!0,this)},endPI:function(){return this.pi?(this.write("?>"),this.pi=0,this):this},writeCData:function(e){return this.startCData().text(e).endCData()},startCData:function(){return this.cdata?this:(this.attributes&&this.endAttributes(),this.indenter(),this.write("<![CDATA["),this.cdata=1,this.started_write=!0,this)},endCData:function(){return this.cdata?(this.write("]]>"),this.cdata=0,this):this},writeRaw:function(e){return e=y(e),!this.tags&&!this.comment&&!this.pi&&!this.cdata?this:this.attributes&&this.attribute?(++this.texts,this.write(e.replace("&","&amp;").replace('"',"&quot;")),this):(this.attributes&&!this.attribute&&this.endAttributes(),++this.texts,this.write(e),this.started_write=!0,this)}},J=k,J}var Q,st;function bt(){return st||(st=1,Q=mt()),Q}var K,at;function pt(){if(at)return K;at=1;var O=lt(),y=gt(),k=bt(),e=ft().sanitizeTagName,n=new Set(["color","size","x","y","z","shape","thickness"]),E=/^\s*rgba?\s*\(/i,d=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)\s*(?:,\s*([.0-9]*))?\)\s*$/;function $(t){if(!t||typeof t!="string")return{};if(t[0]==="#")return t=t.slice(1),t.length===3?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)}:{r:parseInt(t[0]+t[1],16),g:parseInt(t[2]+t[3],16),b:parseInt(t[4]+t[5],16)};if(E.test(t)){var r={};return t=t.match(d),r.r=+t[1],r.g=+t[2],r.b=+t[3],t[4]&&(r.a=+t[4]),r}return{}}function b(t,r,i){var s={},o;for(o in i)o==="label"?s.label=i.label:t==="edge"&&o==="weight"?s.weight=i.weight:t==="edge"&&o==="kind"?s.kind=i.kind:n.has(o)?(s.viz=s.viz||{},s.viz[o]=i[o]):(s.attributes=s.attributes||{},s.attributes[o]=i[o]);return s}var g=b.bind(null,"node"),c=b.bind(null,"edge");function f(t){return t<=2147483647&&t>=-2147483647}function u(t){return typeof t>"u"||t===null||t===""||t!==t}var v={liststring:0,listdouble:1,listlong:2,listinteger:3,listboolean:4,string:5,double:6,long:7,integer:8,boolean:9,empty:10};function h(t){return u(t)?"empty":typeof t=="boolean"?"boolean":typeof t=="object"?"string":typeof t=="number"?t===(t|0)?f(t)?"integer":"long":"double":"string"}function l(t){for(var r="empty",i=v[r],s,o,A,m=0,a=t.length;m<a;m++)s=t[m],o=h(s),A=v[o],A<i&&(r=o,i=A);return r}function x(t){if(t instanceof Set&&(t=Array.from(t)),Array.isArray(t)){var r=l(t);return r==="empty"?"empty":"list"+r}return h(t)}var S=/[\r\t\n]/g,q="'",C='"';function B(t,r){return t!=="string"||S.test(r)||r.includes(q)?JSON.stringify(r):r.includes(C)?q+r+q:r}function I(t,r,i){if(r.startsWith("list")){i instanceof Set&&(i=Array.from(i));var s=Array.isArray(i)?i:[i],o=r.slice(4);return t==="1.3"?"["+s.map(function(A){return B(o,A)}).join(", ")+"]":s.join("|")}return""+i}function T(t,r){var i=new Array(t.order),s=0;return t.forEachNode(function(o,A){var m=r(o,A);m.key=o,i[s++]=m}),i}function P(t,r){var i=new Array(t.size),s=0;return t.forEachEdge(function(o,A,m,a,N,L,R){var w=r(o,A);w.key=o,w.source=m,w.target=a,w.undirected=R,i[s++]=w}),i}function z(t){for(var r={},i,s,o,A,m=0,a=t.length;m<a;m++)if(i=t[m].attributes,!!i)for(A in i)s=x(i[A]),s!=="empty"&&(o=r[A],o?s!==o&&v[s]<v[o]&&(r[A]=s):r[A]=s);return r}function F(t,r,i){var s;if(Object.keys(r).length){t.startElement("attributes"),t.writeAttribute("class",i);for(s in r)t.startElement("attribute"),t.writeAttribute("id",s),t.writeAttribute("title",s),t.writeAttribute("type",r[s]),t.endElement();t.endElement()}}function V(t,r,i,s,o){var A=!Object.keys(s).length,m,a,N,L,R,w,M,p,G,U,W;for(r.startElement(i+"s"),U=0,W=o.length;U<W;U++){if(m=o[U],w=m.attributes,p=m.viz,r.startElement(i),r.writeAttribute("id",m.key),i==="edge"&&(R=m.undirected?"undirected":"directed",R!==r.defaultEdgeType&&r.writeAttribute("type",R),r.writeAttribute("source",m.source),r.writeAttribute("target",m.target),M=m.weight,(typeof M=="number"&&!isNaN(M)||typeof M=="string")&&r.writeAttribute("weight",m.weight),m.kind&&r.writeAttribute("kind",m.kind)),m.label&&r.writeAttribute("label",m.label),!A&&w){r.startElement("attvalues");for(a in s)if(a in w){if(L=w[a],u(L))continue;r.startElement("attvalue"),r.writeAttribute("for",a),r.writeAttribute("value",I(t,s[a],L)),r.endElement()}r.endElement()}if(p){if(p.color){if(r.startElementNS("viz","color"),t==="1.3"&&p.color.startsWith("#"))r.writeAttribute("hex",p.color);else{N=$(p.color);for(G in N)r.writeAttribute(G,N[G])}r.endElement()}p.size!==void 0&&(r.startElementNS("viz","size"),r.writeAttribute("value",p.size),r.endElement()),(p.x!==void 0||p.y!==void 0||p.z!==void 0)&&(r.startElementNS("viz","position"),p.x!==void 0&&r.writeAttribute("x",p.x),p.y!==void 0&&r.writeAttribute("y",p.y),p.z!==void 0&&r.writeAttribute("z",p.z),r.endElement()),p.shape&&(r.startElementNS("viz","shape"),r.writeAttribute("value",p.shape),r.endElement()),p.thickness!==void 0&&(r.startElementNS("viz","thickness"),r.writeAttribute("value",p.thickness),r.endElement())}r.endElement()}r.endElement()}var D={encoding:"UTF-8",version:"1.2",formatNode:g,formatEdge:c};return K=function(r,i){if(!O(r))throw new Error("graphology-gexf/writer: invalid graphology instance.");i=i||{};var s=i.pretty===!1?!1:"  ",o=i.pedantic===!0,A=i.formatNode||D.formatNode,m=i.formatEdge||D.formatEdge,a=new k(s);a.startDocument("1.0",i.encoding||D.encoding);var N=i.version||D.version;if(N!=="1.2"&&N!=="1.3")throw new Error('graphology-gexf/writer: invalid gexf version "'+N+'". Expecting 1.2 or 1.3.');a.startElement("gexf"),a.writeAttribute("version",N),N==="1.2"?(a.writeAttribute("xmlns","http://www.gexf.net/1.2draft"),a.writeAttribute("xmlns:viz","http:///www.gexf.net/1.1draft/viz")):N==="1.3"&&(a.writeAttribute("xmlns","http://gexf.net/1.3"),a.writeAttribute("xmlns:viz","http://gexf.net/1.3/viz"),a.writeAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),a.writeAttribute("xsi:schemaLocation","http://gexf.net/1.3 http://gexf.net/1.3/gexf.xsd")),a.startElement("meta");var L=r.getAttributes();L.lastModifiedDate&&a.writeAttribute("lastmodifieddate",L.lastModifiedDate);var R,w;for(var M in L)M!=="lastModifiedDate"&&(o&&M!=="creator"&&M!=="description"&&M!=="keywords"||(R=e(M),R&&(w=L[M],(typeof w=="string"||typeof w=="number"||typeof w=="boolean")&&a.writeElement(R,""+w))));a.endElement(),a.startElement("graph");var p=y(r);a.defaultEdgeType=p==="mixed"?"directed":p,a.writeAttribute("defaultedgetype",a.defaultEdgeType);var G=T(r,A),U=P(r,m),W=z(G);F(a,W,"node");var j=z(U);return F(a,j,"edge"),V(N,a,"node",W,G),V(N,a,"edge",j,U),a.toString()},K}var ut;function vt(){return ut||(ut=1,Z.parse=Et(),Z.write=pt()),Z}var xt=vt();export{xt as b};
