import{a as V}from"./_commonjsHelpers-C4iS2aBk.js";import{r as W}from"./sigma-BsJT_GRv.js";import{r as O}from"./defaults-BeBqgnWC.js";import{r as T}from"./getters-CXJ0gpj8.js";var I,Y;function U(){if(Y)return I;Y=1;const{createNodeValueGetter:d,createEdgeValueGetter:l}=T();return I=function(u,o,a){const{nodeXAttribute:i,nodeYAttribute:s}=a,{attraction:b,repulsion:w,gravity:F,inertia:G,maxMove:D}=a.settings;let{shouldSkipNode:v,shouldSkipEdge:A,isNodeFixed:C}=a;C=d(C),v=d(v,!1),A=l(A,!1);const x=u.filterNodes((e,n)=>!v.fromEntry(e,n)),k=x.length;for(let e=0;e<k;e++){const n=x[e],t=u.getNodeAttributes(n),r=o[n];r?o[n]={dx:r.dx*G,dy:r.dy*G,x:t[i]||0,y:t[s]||0}:o[n]={dx:0,dy:0,x:t[i]||0,y:t[s]||0}}if(w)for(let e=0;e<k;e++){const n=x[e],t=o[n];for(let r=e+1;r<k;r++){const f=x[r],c=o[f],q=c.x-t.x,h=c.y-t.y,p=Math.sqrt(q*q+h*h)||1,g=w/p*q,m=w/p*h;t.dx-=g,t.dy-=m,c.dx+=g,c.dy+=m}}if(b&&u.forEachEdge((e,n,t,r,f,c,q)=>{if(t===r||v.fromEntry(t,f)||v.fromEntry(r,c)||A.fromEntry(e,n,t,r,f,c,q))return;const h=o[t],p=o[r],g=p.x-h.x,m=p.y-h.y,M=Math.sqrt(g*g+m*m)||1,R=b*M*g,X=b*M*m;h.dx+=R,h.dy+=X,p.dx-=R,p.dy-=X}),F)for(let e=0;e<k;e++){const n=x[e],t=o[n],{x:r,y:f}=t,c=Math.sqrt(r*r+f*f)||1;o[n].dx-=r*F*c,o[n].dy-=f*F*c}const K=!1;for(let e=0;e<k;e++){const n=x[e],t=o[n],r=Math.sqrt(t.dx*t.dx+t.dy*t.dy);r>D&&(t.dx*=D/r,t.dy*=D/r),C.fromGraph(u,n)?t.fixed=!0:(t.x+=t.dx,t.y+=t.dy,t.fixed=!1)}return{converged:K}},I}var E={},L;function $(){return L||(L=1,E.assignLayoutChanges=function(d,l,y){const{nodeXAttribute:u,nodeYAttribute:o}=y;d.updateEachNodeAttributes((a,i)=>{const s=l[a];return!s||s.fixed||(i[u]=s.x,i[o]=s.y),i},{attributes:["x","y"]})},E.collectLayoutChanges=function(d){const l={};for(const y in d){const u=d[y];l[y]={x:u.x,y:u.y}}return l}),E}var N,j;function z(){return j||(j=1,N={nodeXAttribute:"x",nodeYAttribute:"y",isNodeFixed:"fixed",shouldSkipNode:null,shouldSkipEdge:null,settings:{attraction:5e-4,repulsion:.1,gravity:1e-4,inertia:.6,maxMove:200}}),N}var S,H;function B(){if(H)return S;H=1;const d=W(),l=O(),y=U(),u=$(),o=z();function a(i,s){if(!d(i))throw new Error("graphology-layout-force/worker: the given graph is not a valid graphology instance.");s=l(s,o),this.callbacks={},s.onConverged&&(this.callbacks.onConverged=s.onConverged),this.graph=i,this.params=s,this.nodeStates={},this.frameID=null,this.running=!1,this.killed=!1}return a.prototype.isRunning=function(){return this.running},a.prototype.runFrame=function(){let{converged:i}=y(this.graph,this.nodeStates,this.params);u.assignLayoutChanges(this.graph,this.nodeStates,this.params),i=!1,i?(this.callbacks.onConverged&&this.callbacks.onConverged(),this.stop()):this.frameID=window.requestAnimationFrame(()=>this.runFrame())},a.prototype.stop=function(){return this.running=!1,this.frameID!==null&&(window.cancelAnimationFrame(this.frameID),this.frameID=null),this},a.prototype.start=function(){if(this.killed)throw new Error("graphology-layout-force/worker.start: layout was killed.");this.running||(this.running=!0,this.runFrame())},a.prototype.kill=function(){this.stop(),delete this.nodeStates,this.killed=!0},S=a,S}var J=B();const tt=V(J);export{tt as F};
