import{r as ar}from"./defaults-BeBqgnWC.js";import{r as lr}from"./sigma-BsJT_GRv.js";var H,Z;function ur(){if(Z)return H;Z=1;function k(P){return function(I,s){return I+Math.floor(P()*(s-I+1))}}var C=k(Math.random);return C.createRandom=k,H=C,H}var O,$;function or(){if($)return O;$=1;var k=ur().createRandom;function C(I){var s=k(I);return function(y){for(var g=y.length,S=g-1,p=-1;++p<g;){var b=s(p,S),m=y[b];y[b]=y[p],y[p]=m}}}var P=C(Math.random);return P.createShuffleInPlace=C,O=P,O}var _,B;function cr(){if(B)return _;B=1;var k=ar(),C=lr(),P=or(),I={attributes:{x:"x",y:"y"},center:0,hierarchyAttributes:[],rng:Math.random,scale:1};function s(r,i,e,n,t){this.wrappedCircle=t||null,this.children={},this.countChildren=0,this.id=r||null,this.next=null,this.previous=null,this.x=i||null,this.y=e||null,t?this.r=1010101:this.r=n||999}s.prototype.hasChildren=function(){return this.countChildren>0},s.prototype.addChild=function(r,i){this.children[r]=i,++this.countChildren},s.prototype.getChild=function(r){if(!this.children.hasOwnProperty(r)){var i=new s;this.children[r]=i,++this.countChildren}return this.children[r]},s.prototype.applyPositionToChildren=function(){if(this.hasChildren()){var r=this;for(var i in r.children){var e=r.children[i];e.x+=r.x,e.y+=r.y,e.applyPositionToChildren()}}};function y(r,i,e){for(var n in i.children){var t=i.children[n];t.hasChildren()?y(r,t,e):e[t.id]={x:t.x,y:t.y}}}function g(r,i){var e=r.r-i.r,n=i.x-r.x,t=i.y-r.y;return e<0||e*e<n*n+t*t}function S(r,i){var e=r.r-i.r+1e-6,n=i.x-r.x,t=i.y-r.y;return e>0&&e*e>n*n+t*t}function p(r,i){for(var e=0;e<i.length;++e)if(!S(r,i[e]))return!1;return!0}function b(r){return new s(null,r.x,r.y,r.r)}function m(r,i){var e=r.x,n=r.y,t=r.r,a=i.x,o=i.y,h=i.r,l=a-e,u=o-n,c=h-t,f=Math.sqrt(l*l+u*u);return new s(null,(e+a+l/f*c)/2,(n+o+u/f*c)/2,(f+t+h)/2)}function F(r,i,e){var n=r.x,t=r.y,a=r.r,o=i.x,h=i.y,l=i.r,u=e.x,c=e.y,f=e.r,d=n-o,v=n-u,w=t-h,x=t-c,E=l-a,M=f-a,N=n*n+t*t-a*a,j=N-o*o-h*h+l*l,R=N-u*u-c*c+f*f,A=v*w-d*x,q=(w*R-x*j)/(A*2)-n,L=(x*E-w*M)/A,T=(v*j-d*R)/(A*2)-t,D=(d*M-v*E)/A,z=L*L+D*D-1,W=2*(a+q*L+T*D),Y=q*q+T*T-a*a,G=-(z?(W+Math.sqrt(W*W-4*z*Y))/(2*z):Y/W);return new s(null,n+q+L*G,t+T+D*G,G)}function rr(r){switch(r.length){case 1:return b(r[0]);case 2:return m(r[0],r[1]);case 3:return F(r[0],r[1],r[2]);default:throw new Error("graphology-layout/circlepack: Invalid basis length "+r.length)}}function er(r,i){var e,n;if(p(i,r))return[i];for(e=0;e<r.length;++e)if(g(i,r[e])&&p(m(r[e],i),r))return[r[e],i];for(e=0;e<r.length-1;++e)for(n=e+1;n<r.length;++n)if(g(m(r[e],r[n]),i)&&g(m(r[e],i),r[n])&&g(m(r[n],i),r[e])&&p(F(r[e],r[n],i),r))return[r[e],r[n],i];throw new Error("graphology-layout/circlepack: extendBasis failure !")}function U(r){var i=r.wrappedCircle,e=r.next.wrappedCircle,n=i.r+e.r,t=(i.x*e.r+e.x*i.r)/n,a=(i.y*e.r+e.y*i.r)/n;return t*t+a*a}function nr(r,i){var e=0,n=r.slice(),t=r.length,a=[],o,h;for(i(n);e<t;)o=n[e],h&&S(h,o)?++e:(a=er(a,o),h=rr(a),e=0);return h}function J(r,i,e){var n=r.x-i.x,t,a,o=r.y-i.y,h,l,u=n*n+o*o;u?(a=i.r+e.r,a*=a,l=r.r+e.r,l*=l,a>l?(t=(u+l-a)/(2*u),h=Math.sqrt(Math.max(0,l/u-t*t)),e.x=r.x-t*n-h*o,e.y=r.y-t*o+h*n):(t=(u+a-l)/(2*u),h=Math.sqrt(Math.max(0,a/u-t*t)),e.x=i.x+t*n-h*o,e.y=i.y+t*o+h*n)):(e.x=i.x+e.r,e.y=i.y)}function K(r,i){var e=r.r+i.r-1e-6,n=i.x-r.x,t=i.y-r.y;return e>0&&e*e>n*n+t*t}function tr(r,i){var e=r.length;if(e===0)return 0;var n,t,a,o,h,l,u,c,f,d;if(n=r[0],n.x=0,n.y=0,e<=1)return n.r;if(t=r[1],n.x=-t.r,t.x=n.r,t.y=0,e<=2)return n.r+t.r;a=r[2],J(t,n,a),n=new s(null,null,null,null,n),t=new s(null,null,null,null,t),a=new s(null,null,null,null,a),n.next=a.previous=t,t.next=n.previous=a,a.next=t.previous=n;r:for(l=3;l<e;++l){a=r[l],J(n.wrappedCircle,t.wrappedCircle,a),a=new s(null,null,null,null,a),u=t.next,c=n.previous,f=t.wrappedCircle.r,d=n.wrappedCircle.r;do if(f<=d){if(K(u.wrappedCircle,a.wrappedCircle)){t=u,n.next=t,t.previous=n,--l;continue r}f+=u.wrappedCircle.r,u=u.next}else{if(K(c.wrappedCircle,a.wrappedCircle)){n=c,n.next=t,t.previous=n,--l;continue r}d+=c.wrappedCircle.r,c=c.previous}while(u!==c.next);for(a.previous=n,a.next=t,n.next=t.previous=t=a,o=U(n);(a=a.next)!==t;)(h=U(a))<o&&(n=a,o=h);t=n.next}n=[t.wrappedCircle],a=t;for(var v=1e4;(a=a.next)!==t&&--v!==0;)n.push(a.wrappedCircle);for(a=nr(n,i),l=0;l<e;++l)n=r[l],n.x-=a.x,n.y-=a.y;return a.r}function Q(r,i){var e=0;if(r.hasChildren()){for(var n in r.children){var t=r.children[n];t.hasChildren()&&(t.r=Q(t,i))}e=tr(Object.values(r.children),i)}return e}function ir(r,i){Q(r,i);for(var e in r.children){var n=r.children[e];n.applyPositionToChildren()}}function V(r,i,e){if(!C(i))throw new Error("graphology-layout/circlepack: the given graph is not a valid graphology instance.");e=k(e,I);var n={},t={},a=i.nodes(),o=e.center,h=e.hierarchyAttributes,l=P.createShuffleInPlace(e.rng),u=e.scale,c=new s;i.forEachNode(function(E,M){var N=M.size?M.size:1,j=new s(E,null,null,N),R=c;h.forEach(function(A){var q=M[A];R=R.getChild(q)}),R.addChild(E,j)}),ir(c,l),y(i,c,n);var f=a.length,d,v,w;for(w=0;w<f;w++){var x=a[w];d=o+u*n[x].x,v=o+u*n[x].y,t[x]={x:d,y:v},r&&(i.setNodeAttribute(x,e.attributes.x,d),i.setNodeAttribute(x,e.attributes.y,v))}return t}var X=V.bind(null,!1);return X.assign=V.bind(null,!0),_=X,_}export{cr as r};
