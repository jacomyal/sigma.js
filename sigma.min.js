(function(e){"use strict";var r={},i=function(e){var t,s,n,d,a;i.classes.dispatcher.extend(this);var o=this,h=e||{};if("string"==typeof h||h instanceof HTMLElement?h={renderers:[h]}:"[object Array]"===Object.prototype.toString.call(h)&&(h={renderers:h}),d=h.renderers||h.renderer||h.container,h.renderers&&0!==h.renderers.length||("string"==typeof d||d instanceof HTMLElement||"object"==typeof d&&"container"in d)&&(h.renderers=[d]),h.id){if(r[h.id])throw'sigma: Instance "'+h.id+'" already exists.';Object.defineProperty(this,"id",{value:h.id})}else{for(a=0;r[a];)a++;Object.defineProperty(this,"id",{value:""+a})}for(r[this.id]=this,this.settings=new i.classes.configurable(i.settings,h.settings||{}),Object.defineProperty(this,"graph",{value:new i.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","overNode","overNodes","outNode","outNodes","downNode","downNodes","upNode","upNodes"],configurable:!0}),this._handler=function(e){var r,i={};for(r in e.data)i[r]=e.data[r];i.renderer=e.target,this.dispatchEvent(e.type,i)}.bind(this),t=0,s=(n=h.renderers||[]).length;t<s;t++)this.addRenderer(n[t]);for(t=0,s=(n=h.middlewares||[]).length;t<s;t++)this.middlewares.push("string"==typeof n[t]?i.middlewares[n[t]]:n[t]);"object"==typeof h.graph&&h.graph&&(this.graph.read(h.graph),this.refresh()),window.addEventListener("resize",function(){o.settings&&o.refresh()})};if(i.prototype.addCamera=function(r){var t,s=this;if(!arguments.length){for(r=0;this.cameras[""+r];)r++;r=""+r}if(this.cameras[r])throw'sigma.addCamera: The camera "'+r+'" already exists.';return t=new i.classes.camera(r,this.graph,this.settings),this.cameras[r]=t,t.quadtree=new i.classes.quad,i.classes.edgequad!==e&&(t.edgequadtree=new i.classes.edgequad),t.bind("coordinatesUpdated",function(e){s.renderCamera(t,t.isAnimated)}),this.renderersPerCamera[r]=[],t},i.prototype.killCamera=function(e){if(!(e="string"==typeof e?this.cameras[e]:e))throw"sigma.killCamera: The camera is undefined.";var r,i=this.renderersPerCamera[e.id];for(r=i.length-1;r>=0;r--)this.killRenderer(i[r]);return delete this.renderersPerCamera[e.id],delete this.cameraFrames[e.id],delete this.cameras[e.id],e.kill&&e.kill(),this},i.prototype.addRenderer=function(e){var r,t,s,n,d=e||{};if("string"==typeof d?d={container:document.getElementById(d)}:d instanceof HTMLElement&&(d={container:d}),"string"==typeof d.container&&(d.container=document.getElementById(d.container)),"id"in d)r=d.id;else{for(r=0;this.renderers[""+r];)r++;r=""+r}if(this.renderers[r])throw'sigma.addRenderer: The renderer "'+r+'" already exists.';if(t=(t="function"==typeof d.type?d.type:i.renderers[d.type])||i.renderers.def,s="camera"in d?d.camera instanceof i.classes.camera?d.camera:this.cameras[d.camera]||this.addCamera(d.camera):this.addCamera(),this.cameras[s.id]!==s)throw"sigma.addRenderer: The camera is not properly referenced.";return n=new t(this.graph,s,this.settings,d),this.renderers[r]=n,Object.defineProperty(n,"id",{value:r}),n.bind&&n.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","overNode","overNodes","overEdge","overEdges","outNode","outNodes","outEdge","outEdges","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler),this.renderersPerCamera[s.id].push(n),n},i.prototype.killRenderer=function(e){if(!(e="string"==typeof e?this.renderers[e]:e))throw"sigma.killRenderer: The renderer is undefined.";var r=this.renderersPerCamera[e.camera.id],i=r.indexOf(e);return i>=0&&r.splice(i,1),e.kill&&e.kill(),delete this.renderers[e.id],this},i.prototype.refresh=function(r){var t,s,n,d,a,o,h=0;for(r=r||{},t=0,s=(d=this.middlewares||[]).length;t<s;t++)d[t].call(this,0===t?"":"tmp"+h+":",t===s-1?"ready:":"tmp"+ ++h+":");for(n in this.cameras)(a=this.cameras[n]).settings("autoRescale")&&this.renderersPerCamera[a.id]&&this.renderersPerCamera[a.id].length?i.middlewares.rescale.call(this,d.length?"ready:":"",a.readPrefix,{width:this.renderersPerCamera[a.id][0].width,height:this.renderersPerCamera[a.id][0].height}):i.middlewares.copy.call(this,d.length?"ready:":"",a.readPrefix),r.skipIndexation||(o=i.utils.getBoundaries(this.graph,a.readPrefix),a.quadtree.index(this.graph.nodes(),{prefix:a.readPrefix,bounds:{x:o.minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY}}),a.edgequadtree!==e&&a.settings("drawEdges")&&a.settings("enableEdgeHovering")&&a.edgequadtree.index(this.graph,{prefix:a.readPrefix,bounds:{x:o.minX,y:o.minY,width:o.maxX-o.minX,height:o.maxY-o.minY}}));for(t=0,s=(d=Object.keys(this.renderers)).length;t<s;t++)if(this.renderers[d[t]].process)if(this.settings("skipErrors"))try{this.renderers[d[t]].process()}catch(e){console.log('Warning: The renderer "'+d[t]+'" crashed on ".process()"')}else this.renderers[d[t]].process();return this.render(),this},i.prototype.render=function(){var e,r,i;for(e=0,r=(i=Object.keys(this.renderers)).length;e<r;e++)if(this.settings("skipErrors"))try{this.renderers[i[e]].render()}catch(r){this.settings("verbose")&&console.log('Warning: The renderer "'+i[e]+'" crashed on ".render()"')}else this.renderers[i[e]].render();return this},i.prototype.renderCamera=function(e,r){var i,t,s,n=this;if(r)for(i=0,t=(s=this.renderersPerCamera[e.id]).length;i<t;i++)if(this.settings("skipErrors"))try{s[i].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+s[i].id+'" crashed on ".render()"')}else s[i].render();else if(!this.cameraFrames[e.id]){for(i=0,t=(s=this.renderersPerCamera[e.id]).length;i<t;i++)if(this.settings("skipErrors"))try{s[i].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+s[i].id+'" crashed on ".render()"')}else s[i].render();this.cameraFrames[e.id]=requestAnimationFrame(function(){delete n.cameraFrames[e.id]})}return this},i.prototype.kill=function(){var e;for(e in this.dispatchEvent("kill"),this.graph.kill(),delete this.middlewares,this.renderers)this.killRenderer(this.renderers[e]);for(e in this.cameras)this.killCamera(this.cameras[e]);for(e in delete this.renderers,delete this.cameras,this)this.hasOwnProperty(e)&&delete this[e];delete r[this.id]},i.instances=function(e){return arguments.length?r[e]:i.utils.extend({},r)},i.version="1.2.1",void 0!==this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=i}).call(this);!function(e){"use strict";if(e.conrad)throw new Error("conrad already exists");var t,r=!1,n={},i={},o=[],a={},f=[],s=!1,u={frameDuration:20,history:!0},l=Object.create(null);function h(e,t){var r,n,i,o,a,f,s=Array.isArray(e)?e:e.split(/ /);for(t=void 0===t?{}:t,r=0,i=s.length;r!==i;r+=1)if(f=s[r],l[f])for(a={type:f,data:t||{}},n=0,o=l[f].length;n!==o;n+=1)try{l[f][n].handler(a)}catch(e){}}function c(){var e,t,r,n,i=!1,a=v(),f=o.shift();if(r=f.job(),a=v()-a,f.done++,f.time+=a,f.currentTime+=a,f.weightTime=f.currentTime/(f.weight||1),f.averageTime=f.time/f.done,!(n=f.count?f.count<=f.done:!r)){for(e=0,t=o.length;e<t;e++)if(o[e].weightTime>f.weightTime){o.splice(e,0,f),i=!0;break}i||o.push(f)}return n?f:null}function d(e){var t=o.length;i[e.id]=e,e.status="running",t&&(e.weightTime=o[t-1].weightTime,e.currentTime=e.weightTime*(e.weight||1)),e.startTime=v(),h("jobStarted",m(e)),o.push(e)}function g(){var e,i,f;for(e in n)(i=n[e]).after?a[e]=i:d(i),delete n[e];for(r=!!o.length;o.length&&v()-t<u.frameDuration;)if(f=c())for(e in p(f.id),a)a[e].after===f.id&&(d(a[e]),delete a[e]);r?(t=v(),h("enterFrame"),setTimeout(g,0)):h("stop")}function p(e){var t,r,s,l,c=!1;if(Array.isArray(e))for(t=0,r=e.length;t<r;t++)p(e[t]);else{if("string"!=typeof e)throw new Error("[conrad.killJob] Wrong arguments.");for(t=0,r=(s=[i,a,n]).length;t<r;t++)e in s[t]&&(l=s[t][e],u.history&&(l.status="done",f.push(l)),h("jobEnded",m(l)),delete s[t][e],"function"==typeof l.end&&l.end(),c=!0);for(t=0,r=(s=o).length;t<r;t++)if(s[t].id===e){s.splice(t,1);break}if(!c)throw new Error('[conrad.killJob] Job "'+e+'" not found.')}return this}function y(e){var t=n[e]||i[e]||a[e];return t?b(t):null}function b(){var e,t,r={};for(e=arguments.length-1;e>=0;e--)for(t in arguments[e])r[t]=arguments[e][t];return r}function m(e){var t,r,n;if(!e)return e;if(Array.isArray(e))for(t=[],r=0,n=e.length;r<n;r++)t.push(m(e[r]));else if("object"==typeof e)for(r in t={},e)t[r]=m(e[r]);else t=e;return t}function w(e){var t,r=[];for(t in e)r.push(e[t]);return r}function v(){return Date.now?Date.now():(new Date).getTime()}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var A={hasJob:y,addJob:function e(i,o){var a,f,u;if(Array.isArray(i)){for(s=!0,a=0,f=i.length;a<f;a++)e(i[a].id,b(i[a],o));s=!1,r||(t=v(),h("start"),g())}else if("object"==typeof i)if("string"==typeof i.id)e(i.id,i);else{for(a in s=!0,i)"function"==typeof i[a]?e(a,b({job:i[a]},o)):e(a,b(i[a],o));s=!1,r||(t=v(),h("start"),g())}else{if("string"!=typeof i)throw new Error("[conrad.addJob] Wrong arguments.");if(y(i))throw new Error('[conrad.addJob] Job with id "'+i+'" already exists.');if("function"==typeof o)u={id:i,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:o};else{if("object"!=typeof o)throw new Error("[conrad.addJob] Wrong arguments.");u=b({id:i,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},o)}n[i]=u,h("jobAdded",m(u)),r||s||(t=v(),h("start"),g())}return this},killJob:p,killAll:function(){var e,t=b(n,i,a);if(u.history)for(e in t)t[e].status="done",f.push(t[e]),"function"==typeof t[e].end&&t[e].end();return n={},a={},i={},o=[],r=!1,this},settings:function(e,t){var r;if("string"==typeof a1&&1===arguments.length)return u[a1];for(var n in r="object"==typeof a1&&1===arguments.length&&a1||{},"string"==typeof a1&&(r[a1]=a2),r)void 0!==r[n]?u[n]=r[n]:delete u[n];return this},getStats:function(e,t){var r,o,s,u,l,h,c;if(!arguments.length){for(o in l=[],n)l.push(n[o]);for(o in a)l.push(a[o]);for(o in i)l.push(i[o]);l=l.concat(f)}if("string"==typeof e)switch(e){case"waiting":l=w(a);break;case"running":l=w(i);break;case"done":l=f;break;default:h=e}if(e instanceof RegExp&&(h=e),!h&&("string"==typeof t||t instanceof RegExp)&&(h=t),h){if(c="string"==typeof h,l instanceof Array)r=l;else if("object"==typeof l)for(o in r=[],l)r=r.concat(l[o]);else{for(o in r=[],n)r.push(n[o]);for(o in a)r.push(a[o]);for(o in i)r.push(i[o]);r=r.concat(f)}for(l=[],s=0,u=r.length;s<u;s++)(c?r[s].id===h:r[s].id.match(h))&&l.push(r[s])}return m(l)},isRunning:function(){return r},clearHistory:function(){return f=[],this},bind:function e(t,r){var n,i,o,a;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(t in arguments[0])e(t,arguments[0][t]);else if(arguments.length>1)for(n=0,i=(a=Array.isArray(t)?t:t.split(/ /)).length;n!==i;n+=1)o=a[n],l[o]||(l[o]=[]),l[o].push({handler:r})},unbind:function(e,t){var r,n,i,o,a,f,s=Array.isArray(e)?e:e.split(/ /);if(arguments.length)if(t)for(r=0,n=s.length;r!==n;r+=1){if(f=s[r],l[f]){for(a=[],i=0,o=l[f].length;i!==o;i+=1)l[f][i].handler!==t&&a.push(l[f][i]);l[f]=a}l[f]&&0===l[f].length&&delete l[f]}else for(r=0,n=s.length;r!==n;r+=1)delete l[s[r]];else l=Object.create(null)},version:"0.1.0"};"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=A),exports.conrad=A),e.conrad=A}(this);(function(t){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var i,e=this;sigma.utils=sigma.utils||{},sigma.utils.extend=function(){var t,i,e={};for(t=arguments.length-1;t>=0;t--)for(i in arguments[t])e[i]=arguments[t][i];return e},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(t){return(t||"").split(".").reduce(function(t,i){return i in t?t[i]:t[i]={}},e)},sigma.utils.id=(i=0,function(){return++i});var a={};sigma.utils.floatColor=function(t){if(a[t])return a[t];var i=t,e=0,n=0,r=0;"#"===t[0]?3===(t=t.slice(1)).length?(e=parseInt(t.charAt(0)+t.charAt(0),16),n=parseInt(t.charAt(1)+t.charAt(1),16),r=parseInt(t.charAt(2)+t.charAt(2),16)):(e=parseInt(t.charAt(0)+t.charAt(1),16),n=parseInt(t.charAt(2)+t.charAt(3),16),r=parseInt(t.charAt(4)+t.charAt(5),16)):t.match(/^ *rgba? *\(/)&&(e=+(t=t.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/))[1],n=+t[2],r=+t[3]);var s=256*e*256+256*n+r;return a[i]=s,s},sigma.utils.zoomTo=function(t,i,e,a,n){var r,s,u,o=t.settings;(s=Math.max(o("zoomMin"),Math.min(o("zoomMax"),t.ratio*a)))!==t.ratio&&(u={x:i*(1-(a=s/t.ratio))+t.x,y:e*(1-a)+t.y,ratio:s},n&&n.duration?(r=sigma.misc.animation.killAll(t),n=sigma.utils.extend(n,{easing:r?"quadraticOut":"quadraticInOut"}),sigma.misc.animation.camera(t,u,n)):(t.goTo(u),n&&n.onComplete&&n.onComplete()))},sigma.utils.getQuadraticControlPoint=function(t,i,e,a){return{x:(t+e)/2+(a-i)/4,y:(i+a)/2+(t-e)/4}},sigma.utils.getPointOnQuadraticCurve=function(t,i,e,a,n,r,s){return{x:Math.pow(1-t,2)*i+2*(1-t)*t*r+Math.pow(t,2)*a,y:Math.pow(1-t,2)*e+2*(1-t)*t*s+Math.pow(t,2)*n}},sigma.utils.getPointOnBezierCurve=function(t,i,e,a,n,r,s,u,o){var l=Math.pow(1-t,3),g=3*t*Math.pow(1-t,2),c=3*Math.pow(t,2)*(1-t),m=Math.pow(t,3);return{x:l*i+g*r+c*u+m*a,y:l*e+g*s+c*o+m*n}},sigma.utils.getSelfLoopControlPoints=function(t,i,e){return{x1:t-7*e,y1:i,x2:t,y2:i+7*e}},sigma.utils.getDistance=function(t,i,e,a){return Math.sqrt(Math.pow(e-t,2)+Math.pow(a-i,2))},sigma.utils.getCircleIntersection=function(t,i,e,a,n,r){var s,u,o,l,g,c,m,f,d;return u=a-t,o=n-i,!((l=Math.sqrt(o*o+u*u))>e+r)&&(!(l<Math.abs(e-r))&&(d=i+o*(s=(e*e-r*r+l*l)/(2*l))/l,{xi:(f=t+u*s/l)+(c=(g=Math.sqrt(e*e-s*s))/l*-o),xi_prime:f-c,yi:d+(m=u*(g/l)),yi_prime:d-m}))},sigma.utils.isPointOnSegment=function(t,i,e,a,n,r,s){return Math.abs((i-a)*(n-e)-(t-e)*(r-a))/sigma.utils.getDistance(e,a,n,r)<s&&Math.min(e,n)<=t&&t<=Math.max(e,n)&&Math.min(a,r)<=i&&i<=Math.max(a,r)},sigma.utils.isPointOnQuadraticCurve=function(t,i,e,a,n,r,s,u,o){var l=sigma.utils.getDistance(e,a,n,r);if(Math.abs(t-e)>l||Math.abs(i-a)>l)return!1;for(var g,c=.5,m=sigma.utils.getDistance(t,i,e,a)<sigma.utils.getDistance(t,i,n,r)?-.01:.01,f=100,d=sigma.utils.getPointOnQuadraticCurve(c,e,a,n,r,s,u),h=sigma.utils.getDistance(t,i,d.x,d.y);f-- >0&&c>=0&&c<=1&&h>o&&(m>.001||m<-.001);)g=h,d=sigma.utils.getPointOnQuadraticCurve(c,e,a,n,r,s,u),(h=sigma.utils.getDistance(t,i,d.x,d.y))>g?c+=m=-m/2:c+m<0||c+m>1?(m/=2,h=g):c+=m;return h<o},sigma.utils.isPointOnBezierCurve=function(t,i,e,a,n,r,s,u,o,l,g){var c=sigma.utils.getDistance(e,a,s,u);if(Math.abs(t-e)>c||Math.abs(i-a)>c)return!1;for(var m,f=.5,d=sigma.utils.getDistance(t,i,e,a)<sigma.utils.getDistance(t,i,n,r)?-.01:.01,h=100,v=sigma.utils.getPointOnBezierCurve(f,e,a,n,r,s,u,o,l),p=sigma.utils.getDistance(t,i,v.x,v.y);h-- >0&&f>=0&&f<=1&&p>g&&(d>.001||d<-.001);)m=p,v=sigma.utils.getPointOnBezierCurve(f,e,a,n,r,s,u,o,l),(p=sigma.utils.getDistance(t,i,v.x,v.y))>m?f+=d=-d/2:f+d<0||f+d>1?(d/=2,p=m):f+=d;return p<g},sigma.utils.getX=function(i){return i.offsetX!==t&&i.offsetX||i.layerX!==t&&i.layerX||i.clientX!==t&&i.clientX},sigma.utils.getY=function(i){return i.offsetY!==t&&i.offsetY||i.layerY!==t&&i.layerY||i.clientY!==t&&i.clientY},sigma.utils.getPixelRatio=function(){var i=1;return window.screen.deviceXDPI!==t&&window.screen.logicalXDPI!==t&&window.screen.deviceXDPI>window.screen.logicalXDPI?i=window.screen.systemXDPI/window.screen.logicalXDPI:window.devicePixelRatio!==t&&(i=window.devicePixelRatio),i},sigma.utils.getWidth=function(i){var e=i.target.ownerSVGElement?i.target.ownerSVGElement.width:i.target.width;return"number"==typeof e&&e||e!==t&&e.baseVal!==t&&e.baseVal.value},sigma.utils.getCenter=function(t){var i=-1!==t.target.namespaceURI.indexOf("svg")?1:sigma.utils.getPixelRatio();return{x:sigma.utils.getWidth(t)/(2*i),y:sigma.utils.getHeight(t)/(2*i)}},sigma.utils.mouseCoords=function(t,i,e){return i=i||sigma.utils.getX(t),e=e||sigma.utils.getY(t),{x:i-sigma.utils.getCenter(t).x,y:e-sigma.utils.getCenter(t).y,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,metaKey:t.metaKey,altKey:t.altKey,shiftKey:t.shiftKey}},sigma.utils.getHeight=function(i){var e=i.target.ownerSVGElement?i.target.ownerSVGElement.height:i.target.height;return"number"==typeof e&&e||e!==t&&e.baseVal!==t&&e.baseVal.value},sigma.utils.getDelta=function(i){return i.wheelDelta!==t&&i.wheelDelta||i.detail!==t&&-i.detail},sigma.utils.getOffset=function(t){for(var i=0,e=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}},sigma.utils.doubleClick=function(t,i,e){var a,n=0;t._doubleClickHandler=t._doubleClickHandler||{},t._doubleClickHandler[i]=t._doubleClickHandler[i]||[],(a=t._doubleClickHandler[i]).push(function(t){if(2===++n)return n=0,e(t);1===n&&setTimeout(function(){n=0},sigma.settings.doubleClickTimeout)}),t.addEventListener(i,a[a.length-1],!1)},sigma.utils.unbindDoubleClick=function(t,i){for(var e,a=(t._doubleClickHandler||{})[i]||[];e=a.pop();)t.removeEventListener(i,e);delete(t._doubleClickHandler||{})[i]},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(t){return t},sigma.utils.easings.quadraticIn=function(t){return t*t},sigma.utils.easings.quadraticOut=function(t){return t*(2-t)},sigma.utils.easings.quadraticInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},sigma.utils.easings.cubicIn=function(t){return t*t*t},sigma.utils.easings.cubicOut=function(t){return--t*t*t+1},sigma.utils.easings.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},sigma.utils.loadShader=function(t,i,e,a){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(a&&a('Error compiling shader "'+n+'":'+t.getShaderInfoLog(n)),t.deleteShader(n),null)},sigma.utils.loadProgram=function(t,i,e,a,n){var r,s=t.createProgram();for(r=0;r<i.length;++r)t.attachShader(s,i[r]);if(e)for(r=0;r<e.length;++r)t.bindAttribLocation(s,locations?locations[r]:r,opt_attribs[r]);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)?s:(n&&n("Error in program linking: "+t.getProgramInfoLog(s)),t.deleteProgram(s),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(t,i){return[1,0,0,0,1,0,t,i,1]},sigma.utils.matrices.rotation=function(t,i){var e=Math.cos(t),a=Math.sin(t);return i?[e,-a,a,e]:[e,-a,0,a,e,0,0,0,1]},sigma.utils.matrices.scale=function(t,i){return i?[t,0,0,t]:[t,0,0,0,t,0,0,0,1]},sigma.utils.matrices.multiply=function(t,i,e){var a=e?2:3,n=t[0*a+0],r=t[0*a+1],s=t[0*a+2],u=t[1*a+0],o=t[1*a+1],l=t[1*a+2],g=t[2*a+0],c=t[2*a+1],m=t[2*a+2],f=i[0*a+0],d=i[0*a+1],h=i[0*a+2],v=i[1*a+0],p=i[1*a+1],w=i[1*a+2],y=i[2*a+0],b=i[2*a+1],P=i[2*a+2];return e?[n*f+r*v,n*d+r*p,u*f+o*v,u*d+o*p]:[n*f+r*v+s*y,n*d+r*p+s*b,n*h+r*w+s*P,u*f+o*v+l*y,u*d+o*p+l*b,u*h+o*w+l*P,g*f+c*v+m*y,g*d+c*p+m*b,g*h+c*w+m*P]}}).call(this);!function(t){"use strict";var n,e=0,i=["ms","moz","webkit","o"];for(n=0;n<i.length&&!t.requestAnimationFrame;n++)t.requestAnimationFrame=t[i[n]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[i[n]+"CancelAnimationFrame"]||t[i[n]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(n,i){var o=(new Date).getTime(),r=Math.max(0,16-(o-e)),a=t.setTimeout(function(){n(o+r)},r);return e=o+r,a}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n,e,i=Array.prototype.slice.call(arguments,1),o=this;return e=function(){return o.apply(this instanceof n&&t?this:t,i.concat(Array.prototype.slice.call(arguments)))},(n=function(){}).prototype=this.prototype,e.prototype=new n,e})}(this);(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");sigma.settings=sigma.utils.extend(sigma.settings||{},{clone:!0,immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200})}).call(this);(function(){"use strict";var t=function(){Object.defineProperty(this,"_handlers",{value:{}})};t.prototype.bind=function(t,e){var s,n,h,i;if(1===arguments.length&&"object"==typeof arguments[0])for(t in arguments[0])this.bind(t,arguments[0][t]);else{if(2!==arguments.length||"function"!=typeof arguments[1])throw"bind: Wrong arguments.";for(s=0,n=(i="string"==typeof t?t.split(" "):t).length;s!==n;s+=1)(h=i[s])&&(this._handlers[h]||(this._handlers[h]=[]),this._handlers[h].push({handler:e}))}return this},t.prototype.unbind=function(t,e){var s,n,h,i,r,o,l,a="string"==typeof t?t.split(" "):t;if(!arguments.length){for(r in this._handlers)delete this._handlers[r];return this}if(e)for(s=0,n=a.length;s!==n;s+=1){if(l=a[s],this._handlers[l]){for(o=[],h=0,i=this._handlers[l].length;h!==i;h+=1)this._handlers[l][h].handler!==e&&o.push(this._handlers[l][h]);this._handlers[l]=o}this._handlers[l]&&0===this._handlers[l].length&&delete this._handlers[l]}else for(s=0,n=a.length;s!==n;s+=1)delete this._handlers[a[s]];return this},t.prototype.dispatchEvent=function(t,e){var s,n,h,i,r,o,l,a="string"==typeof t?t.split(" "):t;for(e=void 0===e?{}:e,s=0,n=a.length;s!==n;s+=1)if(l=a[s],this._handlers[l]){for(o=this.getEvent(l,e),r=[],h=0,i=this._handlers[l].length;h!==i;h+=1)this._handlers[l][h].handler(o),this._handlers[l][h].one||r.push(this._handlers[l][h]);this._handlers[l]=r}return this},t.prototype.getEvent=function(t,e){return{type:t,data:e||{},target:this}},t.extend=function(e,s){var n;for(n in t.prototype)t.prototype.hasOwnProperty(n)&&(e[n]=t.prototype[n]);t.apply(e,s)},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=t):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.dispatcher=t):this.dispatcher=t}).call(this);(function(){"use strict";var t=function(){var e,o,r={},i=Array.prototype.slice.call(arguments,0),s=function(t,e){var o,n,c,f;if(1!==arguments.length||"string"!=typeof t){if("object"==typeof t&&"string"==typeof e)return void 0!==(t||{})[e]?t[e]:s(e);for(o="object"==typeof t&&void 0===e?t:{},"string"==typeof t&&(o[t]=e),n=0,c=(f=Object.keys(o)).length;n<c;n++)r[f[n]]=o[f[n]];return this}if(void 0!==r[t])return r[t];for(n=0,c=i.length;n<c;n++)if(void 0!==i[n][t])return i[n][t]};for(s.embedObjects=function(){var e=i.concat(r).concat(Array.prototype.splice.call(arguments,0));return t.apply({},e)},e=0,o=arguments.length;e<o;e++)s(arguments[e]);return s};void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=t):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.configurable=t):this.configurable=t}).call(this);(function(e){"use strict";var t=Object.create(null),r=Object.create(null),s=Object.create(null),i=Object.create(null),n=Object.create(null),o={immutable:!0,clone:!0},h=function(e){return o[e]},d=function(e){var r,i,n;for(r in n={settings:e||h,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)},s)s[r].call(n);for(r in t)i=g(r,n,t[r]),this[r]=i,n[r]=i};function g(e,t,r){return function(){var s,o;for(s in n[e])n[e][s].apply(t,arguments);for(s in o=r.apply(t,arguments),i[e])i[e][s].apply(t,arguments);return o}}function a(e){var t;for(t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e}d.addMethod=function(e,r){if("string"!=typeof e||"function"!=typeof r||2!==arguments.length)throw"addMethod: Wrong arguments.";if(t[e]||d[e])throw'The method "'+e+'" already exists.';return t[e]=r,i[e]=Object.create(null),n[e]=Object.create(null),this},d.hasMethod=function(e){return!(!t[e]&&!d[e])},d.attach=function(e,t,r,o){if("string"!=typeof e||"string"!=typeof t||"function"!=typeof r||arguments.length<3||arguments.length>4)throw"attach: Wrong arguments.";var h;if("constructor"===e)h=s;else if(o){if(!n[e])throw'The method "'+e+'" does not exist.';h=n[e]}else{if(!i[e])throw'The method "'+e+'" does not exist.';h=i[e]}if(h[t])throw'A function "'+t+'" is already attached to the method "'+e+'".';return h[t]=r,this},d.attachBefore=function(e,t,r){return this.attach(e,t,r,!0)},d.addIndex=function(e,t){if("string"!=typeof e||Object(t)!==t||2!==arguments.length)throw"addIndex: Wrong arguments.";if(r[e])throw'The index "'+e+'" already exists.';var s;for(s in r[e]=t,t){if("function"!=typeof t[s])throw"The bindings must be functions.";d.attach(s,e,t[s])}return this},d.addMethod("addNode",function(e){if(Object(e)!==e||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The node must have a string or number id.";if(this.nodesIndex[e.id])throw'The node "'+e.id+'" already exists.';var t,r=e.id,s=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&(s[t]=e[t]);else s=e;return this.settings("immutable")?Object.defineProperty(s,"id",{value:r,enumerable:!0}):s.id=r,this.inNeighborsIndex[r]=Object.create(null),this.outNeighborsIndex[r]=Object.create(null),this.allNeighborsIndex[r]=Object.create(null),this.inNeighborsCount[r]=0,this.outNeighborsCount[r]=0,this.allNeighborsCount[r]=0,this.nodesArray.push(s),this.nodesIndex[s.id]=s,this}),d.addMethod("addEdge",function(e){if(Object(e)!==e||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The edge must have a string or number id.";if("string"!=typeof e.source&&"number"!=typeof e.source||!this.nodesIndex[e.source])throw"The edge source must have an existing node id.";if("string"!=typeof e.target&&"number"!=typeof e.target||!this.nodesIndex[e.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[e.id])throw'The edge "'+e.id+'" already exists.';var t,r=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&"source"!==t&&"target"!==t&&(r[t]=e[t]);else r=e;return this.settings("immutable")?(Object.defineProperty(r,"id",{value:e.id,enumerable:!0}),Object.defineProperty(r,"source",{value:e.source,enumerable:!0}),Object.defineProperty(r,"target",{value:e.target,enumerable:!0})):(r.id=e.id,r.source=e.source,r.target=e.target),this.edgesArray.push(r),this.edgesIndex[r.id]=r,this.inNeighborsIndex[r.target][r.source]||(this.inNeighborsIndex[r.target][r.source]=Object.create(null)),this.inNeighborsIndex[r.target][r.source][r.id]=r,this.outNeighborsIndex[r.source][r.target]||(this.outNeighborsIndex[r.source][r.target]=Object.create(null)),this.outNeighborsIndex[r.source][r.target][r.id]=r,this.allNeighborsIndex[r.source][r.target]||(this.allNeighborsIndex[r.source][r.target]=Object.create(null)),this.allNeighborsIndex[r.source][r.target][r.id]=r,r.target!==r.source&&(this.allNeighborsIndex[r.target][r.source]||(this.allNeighborsIndex[r.target][r.source]=Object.create(null)),this.allNeighborsIndex[r.target][r.source][r.id]=r),this.inNeighborsCount[r.target]++,this.outNeighborsCount[r.source]++,this.allNeighborsCount[r.target]++,this.allNeighborsCount[r.source]++,this}),d.addMethod("dropNode",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[e])throw'The node "'+e+'" does not exist.';var t,r,s;for(delete this.nodesIndex[e],t=0,s=this.nodesArray.length;t<s;t++)if(this.nodesArray[t].id===e){this.nodesArray.splice(t,1);break}for(t=this.edgesArray.length-1;t>=0;t--)this.edgesArray[t].source!==e&&this.edgesArray[t].target!==e||this.dropEdge(this.edgesArray[t].id);for(r in delete this.inNeighborsIndex[e],delete this.outNeighborsIndex[e],delete this.allNeighborsIndex[e],delete this.inNeighborsCount[e],delete this.outNeighborsCount[e],delete this.allNeighborsCount[e],this.nodesIndex)delete this.inNeighborsIndex[r][e],delete this.outNeighborsIndex[r][e],delete this.allNeighborsIndex[r][e];return this}),d.addMethod("dropEdge",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[e])throw'The edge "'+e+'" does not exist.';var t,r,s;for(s=this.edgesIndex[e],delete this.edgesIndex[e],t=0,r=this.edgesArray.length;t<r;t++)if(this.edgesArray[t].id===e){this.edgesArray.splice(t,1);break}return delete this.inNeighborsIndex[s.target][s.source][s.id],Object.keys(this.inNeighborsIndex[s.target][s.source]).length||delete this.inNeighborsIndex[s.target][s.source],delete this.outNeighborsIndex[s.source][s.target][s.id],Object.keys(this.outNeighborsIndex[s.source][s.target]).length||delete this.outNeighborsIndex[s.source][s.target],delete this.allNeighborsIndex[s.source][s.target][s.id],Object.keys(this.allNeighborsIndex[s.source][s.target]).length||delete this.allNeighborsIndex[s.source][s.target],s.target!==s.source&&(delete this.allNeighborsIndex[s.target][s.source][s.id],Object.keys(this.allNeighborsIndex[s.target][s.source]).length||delete this.allNeighborsIndex[s.target][s.source]),this.inNeighborsCount[s.target]--,this.outNeighborsCount[s.source]--,this.allNeighborsCount[s.source]--,this.allNeighborsCount[s.target]--,this}),d.addMethod("kill",function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsIndex,delete this.outNeighborsIndex,delete this.allNeighborsIndex,delete this.inNeighborsCount,delete this.outNeighborsCount,delete this.allNeighborsCount}),d.addMethod("clear",function(){return this.nodesArray.length=0,this.edgesArray.length=0,a(this.nodesIndex),a(this.edgesIndex),a(this.nodesIndex),a(this.inNeighborsIndex),a(this.outNeighborsIndex),a(this.allNeighborsIndex),a(this.inNeighborsCount),a(this.outNeighborsCount),a(this.allNeighborsCount),this}),d.addMethod("read",function(e){var t,r,s;for(t=0,s=(r=e.nodes||[]).length;t<s;t++)this.addNode(r[t]);for(t=0,s=(r=e.edges||[]).length;t<s;t++)this.addEdge(r[t]);return this}),d.addMethod("nodes",function(e){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.nodesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,r,s=[];for(t=0,r=e.length;t<r;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"nodes: Wrong arguments.";s.push(this.nodesIndex[e[t]])}return s}throw"nodes: Wrong arguments."}),d.addMethod("degree",function(e,t){if(t={in:this.inNeighborsCount,out:this.outNeighborsCount}[t||""]||this.allNeighborsCount,"string"==typeof e||"number"==typeof e)return t[e];if("[object Array]"===Object.prototype.toString.call(e)){var r,s,i=[];for(r=0,s=e.length;r<s;r++){if("string"!=typeof e[r]&&"number"!=typeof e[r])throw"degree: Wrong arguments.";i.push(t[e[r]])}return i}throw"degree: Wrong arguments."}),d.addMethod("edges",function(e){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.edgesIndex[e];if(1===arguments.length&&"[object Array]"===Object.prototype.toString.call(e)){var t,r,s=[];for(t=0,r=e.length;t<r;t++){if("string"!=typeof e[t]&&"number"!=typeof e[t])throw"edges: Wrong arguments.";s.push(this.edgesIndex[e[t]])}return s}throw"edges: Wrong arguments."}),"undefined"!=typeof sigma?(sigma.classes=sigma.classes||Object.create(null),sigma.classes.graph=d):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports.graph=d):this.graph=d}).call(this);(function(t){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes"),sigma.classes.camera=function(t,i,s,a){sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:i}),Object.defineProperty(this,"id",{value:t}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+t+":"}),Object.defineProperty(this,"prefix",{value:"cam"+t+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof a&&a?s.embedObject(a):s},sigma.classes.camera.prototype.goTo=function(i){if(!this.settings("enableCamera"))return this;var s,a,e=i||{},r=["x","y","ratio","angle"];for(s=0,a=r.length;s<a;s++)if(e[r[s]]!==t){if("number"!=typeof e[r[s]]||isNaN(e[r[s]]))throw'Value for "'+r[s]+'" is not a number.';this[r[s]]=e[r[s]]}return this.dispatchEvent("coordinatesUpdated"),this},sigma.classes.camera.prototype.applyView=function(i,s,a){a=a||{},s=s!==t?s:this.prefix,i=i!==t?i:this.readPrefix;var e,r,h,o=a.nodes||this.graph.nodes(),n=a.edges||this.graph.edges(),c=Math.cos(this.angle)/this.ratio,g=Math.sin(this.angle)/this.ratio,l=Math.pow(this.ratio,this.settings("nodesPowRatio")),m=Math.pow(this.ratio,this.settings("edgesPowRatio")),y=(a.width||0)/2-this.x*c-this.y*g,p=(a.height||0)/2-this.y*c+this.x*g;for(e=0,r=o.length;e<r;e++)(h=o[e])[s+"x"]=(h[i+"x"]||0)*c+(h[i+"y"]||0)*g+y,h[s+"y"]=(h[i+"y"]||0)*c-(h[i+"x"]||0)*g+p,h[s+"size"]=(h[i+"size"]||0)/l;for(e=0,r=n.length;e<r;e++)n[e][s+"size"]=(n[e][i+"size"]||0)/m;return this},sigma.classes.camera.prototype.graphPosition=function(t,i,s){var a=0,e=0,r=Math.cos(this.angle),h=Math.sin(this.angle);return s||(a=-(this.x*r+this.y*h)/this.ratio,e=-(this.y*r-this.x*h)/this.ratio),{x:(t*r+i*h)/this.ratio+a,y:(i*r-t*h)/this.ratio+e}},sigma.classes.camera.prototype.cameraPosition=function(t,i,s){var a=0,e=0,r=Math.cos(this.angle),h=Math.sin(this.angle);return s||(a=-(this.x*r+this.y*h)/this.ratio,e=-(this.y*r-this.x*h)/this.ratio),{x:((t-a)*r-(i-e)*h)*this.ratio,y:((i-e)*r+(t-a)*h)*this.ratio}},sigma.classes.camera.prototype.getMatrix=function(){var t=sigma.utils.matrices.scale(1/this.ratio),i=sigma.utils.matrices.rotation(this.angle),s=sigma.utils.matrices.translation(-this.x,-this.y);return sigma.utils.matrices.multiply(s,sigma.utils.matrices.multiply(i,t))},sigma.classes.camera.prototype.getRectangle=function(t,i){var s=this.cameraPosition(t,0,!0),a=this.cameraPosition(0,i,!0),e=this.cameraPosition(t/2,i/2,!0),r=this.cameraPosition(t/4,0,!0).x,h=this.cameraPosition(0,i/4,!0).y;return{x1:this.x-e.x-r,y1:this.y-e.y-h,x2:this.x-e.x+r+s.x,y2:this.y-e.y-h+s.y,height:Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y+2*h,2))}}}).call(this);(function(e){"use strict";var t={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var n=[],r=[],h=0;h<4;h++){var x=this.projection(t[h],e),s=this.projection(i[h],e);n.push(x.x*e.x+x.y*e.y),r.push(s.x*e.x+s.y*e.y)}var o=Math.max.apply(Math,n),y=Math.max.apply(Math,r),a=Math.min.apply(Math,n);return Math.min.apply(Math,r)<=o&&y>=a},collision:function(e,t){for(var i=this.axis(e,t),n=!0,r=0;r<4;r++)n=n&&this.axisCollision(i[r],e,t);return n}};function i(e,t){for(var i=[],n=0;n<4;n++)e.x2>=t[n][0].x&&e.x1<=t[n][1].x&&e.y1+e.height>=t[n][0].y&&e.y1<=t[n][2].y&&i.push(n);return i}function n(e,i){for(var n=[],r=0;r<4;r++)t.collision(e,i[r])&&n.push(r);return n}function r(e,t){var i,n,r=t.level+1,h=Math.round(t.bounds.width/2),s=Math.round(t.bounds.height/2),o=Math.round(t.bounds.x),y=Math.round(t.bounds.y);switch(e){case 0:i=o,n=y;break;case 1:i=o+h,n=y;break;case 2:i=o,n=y+s;break;case 3:i=o+h,n=y+s}return x({x:i,y:n,width:h,height:s},r,t.maxElements,t.maxLevel)}function h(t,n,x){if(x.level<x.maxLevel)for(var s=i(n,x.corners),o=0,y=s.length;o<y;o++)x.nodes[s[o]]===e&&(x.nodes[s[o]]=r(s[o],x)),h(t,n,x.nodes[s[o]]);else x.elements.push(t)}function x(e,i,n,r){return{level:i||0,bounds:e,corners:t.splitSquare(e),maxElements:n||20,maxLevel:r||4,elements:[],nodes:[]}}var s=function(){this._geom=t,this._tree=null,this._cache={query:!1,result:!1}};s.prototype.index=function(e,i){if(!i.bounds)throw"sigma.classes.quad.index: bounds information not given.";var n=i.prefix||"";this._tree=x(i.bounds,0,i.maxElements,i.maxLevel);for(var r=0,s=e.length;r<s;r++)h(e[r],t.pointToSquare({x:e[r][n+"x"],y:e[r][n+"y"],size:e[r][n+"size"]}),this._tree);return this._cache={query:!1,result:!1},this._tree},s.prototype.point=function(t,i){return this._tree&&function t(i,n){if(n.level<n.maxLevel){var r=function(e,t){var i=t.x+t.width/2,n=t.y+t.height/2,r=e.y<n,h=e.x<i;return r?h?0:1:h?2:3}(i,n.bounds);return n.nodes[r]!==e?t(i,n.nodes[r]):[]}return n.elements}({x:t,y:i},this._tree)||[]},s.prototype.area=function(r){var h,x,s=JSON.stringify(r);if(this._cache.query===s)return this._cache.result;t.isAxisAligned(r)?(h=i,x=t.axisAlignedTopPoints(r)):(h=n,x=t.rectangleCorners(r));var o=this._tree?function t(i,n,r,h){if(h=h||{},n.level<n.maxLevel)for(var x=r(i,n.corners),s=0,o=x.length;s<o;s++)n.nodes[x[s]]!==e&&t(i,n.nodes[x[s]],r,h);else for(var y=0,a=n.elements.length;y<a;y++)h[n.elements[y].id]===e&&(h[n.elements[y].id]=n.elements[y]);return h}(x,this._tree,h):[],y=[];for(var a in o)y.push(o[a]);return this._cache.query=s,this._cache.result=y,y},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=s):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports.quad=s):this.quad=s}).call(this);(function(e){"use strict";var t={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},lineToSquare:function(e){return e.y1<e.y2?e.x1<e.x2?{x1:e.x1-e.size,y1:e.y1-e.size,x2:e.x2+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:{x1:e.x2-e.size,y1:e.y1-e.size,x2:e.x1+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:e.x1<e.x2?{x1:e.x1-e.size,y1:e.y2-e.size,x2:e.x2+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}:{x1:e.x2-e.size,y1:e.y2-e.size,x2:e.x1+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}},quadraticCurveToSquare:function(e,t){var i=sigma.utils.getPointOnQuadraticCurve(.5,e.x1,e.y1,e.x2,e.y2,t.x,t.y),x=Math.min(e.x1,e.x2,i.x),s=Math.max(e.x1,e.x2,i.x),r=Math.min(e.y1,e.y2,i.y),y=Math.max(e.y1,e.y2,i.y);return{x1:x-e.size,y1:r-e.size,x2:s+e.size,y2:r-e.size,height:y-r+2*e.size}},selfLoopToSquare:function(e){var t=sigma.utils.getSelfLoopControlPoints(e.x,e.y,e.size),i=Math.min(e.x,t.x1,t.x2),x=Math.max(e.x,t.x1,t.x2),s=Math.min(e.y,t.y1,t.y2),r=Math.max(e.y,t.y1,t.y2);return{x1:i-e.size,y1:s-e.size,x2:x+e.size,y2:s-e.size,height:r-s+2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){var i=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:i*t.x,y:i*t.y}},axisCollision:function(e,t,i){for(var x=[],s=[],r=0;r<4;r++){var y=this.projection(t[r],e),n=this.projection(i[r],e);x.push(y.x*e.x+y.y*e.y),s.push(n.x*e.x+n.y*e.y)}var h=Math.max.apply(Math,x),o=Math.max.apply(Math,s),a=Math.min.apply(Math,x);return Math.min.apply(Math,s)<=h&&o>=a},collision:function(e,t){for(var i=this.axis(e,t),x=!0,s=0;s<4;s++)x=x&&this.axisCollision(i[s],e,t);return x}};function i(e,t){for(var i=[],x=0;x<4;x++)e.x2>=t[x][0].x&&e.x1<=t[x][1].x&&e.y1+e.height>=t[x][0].y&&e.y1<=t[x][2].y&&i.push(x);return i}function x(e,i){for(var x=[],s=0;s<4;s++)t.collision(e,i[s])&&x.push(s);return x}function s(e,t){var i,x,s=t.level+1,r=Math.round(t.bounds.width/2),n=Math.round(t.bounds.height/2),h=Math.round(t.bounds.x),o=Math.round(t.bounds.y);switch(e){case 0:i=h,x=o;break;case 1:i=h+r,x=o;break;case 2:i=h,x=o+n;break;case 3:i=h+r,x=o+n}return y({x:i,y:x,width:r,height:n},s,t.maxElements,t.maxLevel)}function r(t,x,y){if(y.level<y.maxLevel)for(var n=i(x,y.corners),h=0,o=n.length;h<o;h++)y.nodes[n[h]]===e&&(y.nodes[n[h]]=s(n[h],y)),r(t,x,y.nodes[n[h]]);else y.elements.push(t)}function y(e,i,x,s){return{level:i||0,bounds:e,corners:t.splitSquare(e),maxElements:x||40,maxLevel:s||8,elements:[],nodes:[]}}var n=function(){this._geom=t,this._tree=null,this._cache={query:!1,result:!1},this._enabled=!0};n.prototype.index=function(e,i){if(!this._enabled)return this._tree;if(!i.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var x,s,n,h,o,a=i.prefix||"";this._tree=y(i.bounds,0,i.maxElements,i.maxLevel);for(var u=e.edges(),l=0,d=u.length;l<d;l++)s=e.nodes(u[l].source),n=e.nodes(u[l].target),o={x1:s[a+"x"],y1:s[a+"y"],x2:n[a+"x"],y2:n[a+"y"],size:u[l][a+"size"]||0},"curve"===u[l].type||"curvedArrow"===u[l].type?s.id===n.id?(h={x:s[a+"x"],y:s[a+"y"],size:s[a+"size"]||0},r(u[l],t.selfLoopToSquare(h),this._tree)):(x=sigma.utils.getQuadraticControlPoint(o.x1,o.y1,o.x2,o.y2),r(u[l],t.quadraticCurveToSquare(o,x),this._tree)):r(u[l],t.lineToSquare(o),this._tree);return this._cache={query:!1,result:!1},this._tree},n.prototype.point=function(t,i){return this._enabled&&this._tree&&function t(i,x){if(x.level<x.maxLevel){var s=function(e,t){var i=t.x+t.width/2,x=t.y+t.height/2,s=e.y<x,r=e.x<i;return s?r?0:1:r?2:3}(i,x.bounds);return x.nodes[s]!==e?t(i,x.nodes[s]):[]}return x.elements}({x:t,y:i},this._tree)||[]},n.prototype.area=function(s){if(!this._enabled)return[];var r,y,n=JSON.stringify(s);if(this._cache.query===n)return this._cache.result;t.isAxisAligned(s)?(r=i,y=t.axisAlignedTopPoints(s)):(r=x,y=t.rectangleCorners(s));var h=this._tree?function t(i,x,s,r){if(r=r||{},x.level<x.maxLevel)for(var y=s(i,x.corners),n=0,h=y.length;n<h;n++)x.nodes[y[n]]!==e&&t(i,x.nodes[y[n]],s,r);else for(var o=0,a=x.elements.length;o<a;o++)r[x.elements[o].id]===e&&(r[x.elements[o].id]=x.elements[o]);return r}(y,this._tree,r):[],o=[];for(var a in h)o.push(h[a]);return this._cache.query=n,this._cache.result=o,o},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.edgequad=n):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports.edgequad=n):this.edgequad=n}).call(this);(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(e,t,i){var s,o,a,n,u,m,r,l,g,c,d,v=this,p=e,E=t,f=i;function h(e){var t,i,c;if(f("mouseEnabled")&&(v.dispatchEvent("mousemove",sigma.utils.mouseCoords(e)),r))return l=!0,g=!0,d&&clearTimeout(d),d=setTimeout(function(){l=!1},f("dragTimeout")),sigma.misc.animation.killAll(E),E.isMoving=!0,c=E.cameraPosition(sigma.utils.getX(e)-u,sigma.utils.getY(e)-m,!0),t=s-c.x,i=o-c.y,t===E.x&&i===E.y||(a=E.x,n=E.y,E.goTo({x:t,y:i})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function b(e){if(f("mouseEnabled")&&r){r=!1,d&&clearTimeout(d),E.isMoving=!1;var t=sigma.utils.getX(e),i=sigma.utils.getY(e);l?(sigma.misc.animation.killAll(E),sigma.misc.animation.camera(E,{x:E.x+f("mouseInertiaRatio")*(E.x-a),y:E.y+f("mouseInertiaRatio")*(E.y-n)},{easing:"quadraticOut",duration:f("mouseInertiaDuration")})):u===t&&m===i||E.goTo({x:E.x,y:E.y}),v.dispatchEvent("mouseup",sigma.utils.mouseCoords(e)),l=!1}}function k(e){if(f("mouseEnabled"))switch(s=E.x,o=E.y,a=E.x,n=E.y,u=sigma.utils.getX(e),m=sigma.utils.getY(e),g=!1,c=(new Date).getTime(),e.which){case 2:break;case 3:v.dispatchEvent("rightclick",sigma.utils.mouseCoords(e,u,m));break;default:r=!0,v.dispatchEvent("mousedown",sigma.utils.mouseCoords(e,u,m))}}function D(e){f("mouseEnabled")&&v.dispatchEvent("mouseout")}function x(e){if(f("mouseEnabled")){var t=sigma.utils.mouseCoords(e);t.isDragging=(new Date).getTime()-c>100&&g,v.dispatchEvent("click",t)}return e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function y(e){var t,i,s,o=sigma.utils.getDelta(e);if(f("mouseEnabled")&&f("mouseWheelEnabled")&&0!==o)return i=o>0?1/f("zoomingRatio"):f("zoomingRatio"),t=E.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:f("mouseZoomDuration")},sigma.utils.zoomTo(E,t.x,t.y,i,s),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(p,"click",function(e){var t,i,s;if(f("mouseEnabled"))return i=1/f("doubleClickZoomingRatio"),v.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,u,m)),f("doubleClickEnabled")&&(t=E.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:f("doubleClickZoomDuration")},sigma.utils.zoomTo(E,t.x,t.y,i,s)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}),p.addEventListener("DOMMouseScroll",y,!1),p.addEventListener("mousewheel",y,!1),p.addEventListener("mousemove",h,!1),p.addEventListener("mousedown",k,!1),p.addEventListener("click",x,!1),p.addEventListener("mouseout",D,!1),document.addEventListener("mouseup",b,!1),this.kill=function(){sigma.utils.unbindDoubleClick(p,"click"),p.removeEventListener("DOMMouseScroll",y),p.removeEventListener("mousewheel",y),p.removeEventListener("mousemove",h),p.removeEventListener("mousedown",k),p.removeEventListener("click",x),p.removeEventListener("mouseout",D),document.removeEventListener("mouseup",b)}}}).call(this);(function(t){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.touch=function(t,e,a){var i,n,o,s,u,c,r,l,d,h,g,m,v,x,y,f,p=this,E=t,b=e,C=a,k=[];function L(t){var e=sigma.utils.getOffset(E);return{x:t.pageX-e.left,y:t.pageY-e.top}}function D(t){var e,a,x,y,f,p;if(C("touchEnabled"))switch((k=t.touches).length){case 1:b.isMoving=!0,v=1,i=b.x,n=b.y,u=b.x,c=b.y,f=L(k[0]),r=f.x,l=f.y;break;case 2:return b.isMoving=!0,v=2,f=L(k[0]),p=L(k[1]),e=f.x,x=f.y,a=p.x,y=p.y,u=b.x,c=b.y,o=b.angle,s=b.ratio,i=b.x,n=b.y,r=e,l=x,d=a,h=y,g=Math.atan2(h-l,d-r),m=Math.sqrt((h-l)*(h-l)+(d-r)*(d-r)),t.preventDefault(),!1}}function M(t){if(C("touchEnabled")){k=t.touches;var e=C("touchInertiaRatio");switch(f&&(x=!1,clearTimeout(f)),v){case 2:if(1===t.touches.length){D(t),t.preventDefault();break}case 1:b.isMoving=!1,p.dispatchEvent("stopDrag"),x&&(y=!1,sigma.misc.animation.camera(b,{x:b.x+e*(b.x-u),y:b.y+e*(b.y-c)},{easing:"quadraticOut",duration:C("touchInertiaDuration")})),x=!1,v=0}}}function T(t){if(!y&&C("touchEnabled")){var e,a,E,D,M,T,P,w,q,I,O,R,Z,z,V,X,Y;switch(k=t.touches,x=!0,f&&clearTimeout(f),f=setTimeout(function(){x=!1},C("dragTimeout")),v){case 1:e=(w=L(k[0])).x,E=w.y,I=b.cameraPosition(e-r,E-l,!0),z=i-I.x,V=n-I.y,z===b.x&&V===b.y||(u=b.x,c=b.y,b.goTo({x:z,y:V}),p.dispatchEvent("mousemove",sigma.utils.mouseCoords(t,w.x,w.y)),p.dispatchEvent("drag"));break;case 2:w=L(k[0]),q=L(k[1]),e=w.x,E=w.y,a=q.x,D=q.y,O=b.cameraPosition((r+d)/2-sigma.utils.getCenter(t).x,(l+h)/2-sigma.utils.getCenter(t).y,!0),P=b.cameraPosition((e+a)/2-sigma.utils.getCenter(t).x,(E+D)/2-sigma.utils.getCenter(t).y,!0),R=Math.atan2(D-E,a-e)-g,Z=Math.sqrt((D-E)*(D-E)+(a-e)*(a-e))/m,e=O.x,E=O.y,X=s/Z,E*=Z,Y=o-R,a=(e*=Z)*(M=Math.cos(-R))+E*(T=Math.sin(-R)),E=D=E*M-e*T,z=(e=a)-P.x+i,V=E-P.y+n,X===b.ratio&&Y===b.angle&&z===b.x&&V===b.y||(u=b.x,c=b.y,b.angle,b.ratio,b.goTo({x:z,y:V,angle:Y,ratio:X}),p.dispatchEvent("drag"))}return t.preventDefault(),!1}}sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(E,"touchstart",function(t){var e,a,i;if(t.touches&&1===t.touches.length&&C("touchEnabled"))return y=!0,a=1/C("doubleClickZoomingRatio"),e=L(t.touches[0]),p.dispatchEvent("doubleclick",sigma.utils.mouseCoords(t,e.x,e.y)),C("doubleClickEnabled")&&(e=b.cameraPosition(e.x-sigma.utils.getCenter(t).x,e.y-sigma.utils.getCenter(t).y,!0),i={duration:C("doubleClickZoomDuration"),onComplete:function(){y=!1}},sigma.utils.zoomTo(b,e.x,e.y,a,i)),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1}),E.addEventListener("touchstart",D,!1),E.addEventListener("touchend",M,!1),E.addEventListener("touchcancel",M,!1),E.addEventListener("touchleave",M,!1),E.addEventListener("touchmove",T,!1),this.kill=function(){sigma.utils.unbindDoubleClick(E,"touchstart"),E.addEventListener("touchstart",D),E.addEventListener("touchend",M),E.addEventListener("touchcancel",M),E.addEventListener("touchleave",M),E.addEventListener("touchmove",T)}}}).call(this);(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.canvas=function(e,t,s,i){if("object"!=typeof i)throw"sigma.renderers.canvas: Wrong arguments.";if(!(i.container instanceof HTMLElement))throw"Container not found.";var n,h,o,a;for(sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=i,this.container=this.options.container,this.settings="object"==typeof i.settings&&i.settings?s.embedObjects(i.settings):s,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene"),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene,this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],n=0,h=(o=this.options.captors||[sigma.captors.mouse,sigma.captors.touch]).length;n<h;n++)a="function"==typeof o[n]?o[n]:sigma.captors[o[n]],this.captors.push(new a(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.options.prefix),sigma.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},sigma.renderers.canvas.prototype.render=function(t){t=t||{};var s,i,n,h,o,a,d,r,c,g,l,m,p,f={},u=this.graph,x=this.graph.nodes,v=(this.options.prefix,this.settings(t,"drawEdges")),b=this.settings(t,"drawNodes"),E=this.settings(t,"drawLabels"),y=this.settings(t,"drawEdgeLabels"),w=this.settings.embedObjects(t,{prefix:this.options.prefix});for(n in this.resize(!1),this.settings(t,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(v=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.clear(),this.jobs)conrad.hasJob(n)&&conrad.killJob(n);for(this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),s=this.nodesOnScreen,i=0,h=s.length;i<h;i++)f[s[i].id]=s[i];if(v){for(s=u.edges(),i=0,h=s.length;i<h;i++)!f[(o=s[i]).source]&&!f[o.target]||o.hidden||x(o.source).hidden||x(o.target).hidden||this.edgesOnScreen.push(o);if(this.settings(t,"batchEdgesDrawing"))a="edges_"+this.conradId,m=w("canvasEdgesBatchSize"),h=(g=this.edgesOnScreen).length,c=0,d=Math.min(g.length,c+m),r=function(){for(p=this.contexts.edges.globalCompositeOperation,this.contexts.edges.globalCompositeOperation="destination-over",l=sigma.canvas.edges,i=c;i<d;i++)o=g[i],(l[o.type||this.settings(t,"defaultEdgeType")]||l.def)(o,u.nodes(o.source),u.nodes(o.target),this.contexts.edges,w);if(y)for(l=sigma.canvas.edges.labels,i=c;i<d;i++)(o=g[i]).hidden||(l[o.type||this.settings(t,"defaultEdgeType")]||l.def)(o,u.nodes(o.source),u.nodes(o.target),this.contexts.labels,w);return this.contexts.edges.globalCompositeOperation=p,d===g.length?(delete this.jobs[a],!1):(c=d+1,d=Math.min(g.length,c+m),!0)},this.jobs[a]=r,conrad.addJob(a,r.bind(this));else{for(l=sigma.canvas.edges,s=this.edgesOnScreen,i=0,h=s.length;i<h;i++)o=s[i],(l[o.type||this.settings(t,"defaultEdgeType")]||l.def)(o,u.nodes(o.source),u.nodes(o.target),this.contexts.edges,w);if(y)for(l=sigma.canvas.edges.labels,s=this.edgesOnScreen,i=0,h=s.length;i<h;i++)s[i].hidden||(l[s[i].type||this.settings(t,"defaultEdgeType")]||l.def)(s[i],u.nodes(s[i].source),u.nodes(s[i].target),this.contexts.labels,w)}}if(b)for(l=sigma.canvas.nodes,s=this.nodesOnScreen,i=0,h=s.length;i<h;i++)s[i].hidden||(l[s[i].type||this.settings(t,"defaultNodeType")]||l.def)(s[i],this.contexts.nodes,w);if(E)for(l=sigma.canvas.labels,s=this.nodesOnScreen,i=0,h=s.length;i<h;i++)s[i].hidden||(l[s[i].type||this.settings(t,"defaultNodeType")]||l.def)(s[i],this.contexts.labels,w);return this.dispatchEvent("render"),this},sigma.renderers.canvas.prototype.initDOM=function(e,t){var s=document.createElement(e);s.style.position="absolute",s.setAttribute("class","sigma-"+t),this.domElements[t]=s,this.container.appendChild(s),"canvas"===e.toLowerCase()&&(this.contexts[t]=s.getContext("2d"))},sigma.renderers.canvas.prototype.resize=function(t,s){var i,n=this.width,h=this.height,o=sigma.utils.getPixelRatio();if(t!==e&&s!==e?(this.width=t,this.height=s):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,t=this.width,s=this.height),n!==this.width||h!==this.height)for(i in this.domElements)this.domElements[i].style.width=t+"px",this.domElements[i].style.height=s+"px","canvas"===this.domElements[i].tagName.toLowerCase()&&(this.domElements[i].setAttribute("width",t*o+"px"),this.domElements[i].setAttribute("height",s*o+"px"),1!==o&&this.contexts[i].scale(o,o));return this},sigma.renderers.canvas.prototype.clear=function(){for(var e in this.contexts)this.contexts[e].clearRect(0,0,this.width,this.height);return this},sigma.renderers.canvas.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();for(e in delete this.captors,this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.canvas.nodes"),sigma.utils.pkg("sigma.canvas.edges"),sigma.utils.pkg("sigma.canvas.labels")}).call(this);(function(t){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.webgl=function(t,e,s,i){if("object"!=typeof i)throw"sigma.renderers.webgl: Wrong arguments.";if(!(i.container instanceof HTMLElement))throw"Container not found.";var r,a,n,h;for(sigma.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=t,this.camera=e,this.contexts={},this.domElements={},this.options=i,this.container=this.options.container,this.settings="object"==typeof i.settings&&i.settings?s.embedObjects(i.settings):s,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeIndicesArrays",{value:{}}),this.settings(i,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],r=0,a=(n=this.options.captors||[sigma.captors.mouse,sigma.captors.touch]).length;r<a;r++)h="function"==typeof n[r]?n[r]:sigma.captors[n[r]],this.captors.push(new h(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.camera.prefix),sigma.misc.drawHovers.call(this,this.camera.prefix),this.resize()},sigma.renderers.webgl.prototype.process=function(){var t,e,s,i,r,a,n=this.graph,h=sigma.utils.extend(h,this.options),o=this.settings(h,"defaultEdgeType"),g=this.settings(h,"defaultNodeType");for(i in this.nodeFloatArrays)delete this.nodeFloatArrays[i];for(i in this.edgeFloatArrays)delete this.edgeFloatArrays[i];for(i in this.edgeIndicesArrays)delete this.edgeIndicesArrays[i];for(e=0,s=(t=n.edges()).length;e<s;e++)i=(r=t[e].type||o)&&sigma.webgl.edges[r]?r:"def",this.edgeFloatArrays[i]||(this.edgeFloatArrays[i]={edges:[]}),this.edgeFloatArrays[i].edges.push(t[e]);for(e=0,s=(t=n.nodes()).length;e<s;e++)i=(r=t[e].type||g)&&sigma.webgl.nodes[r]?r:"def",this.nodeFloatArrays[i]||(this.nodeFloatArrays[i]={nodes:[]}),this.nodeFloatArrays[i].nodes.push(t[e]);for(i in this.edgeFloatArrays){for(a=sigma.webgl.edges[i],t=this.edgeFloatArrays[i].edges,this.edgeFloatArrays[i].array=new Float32Array(t.length*a.POINTS*a.ATTRIBUTES),e=0,s=t.length;e<s;e++)t[e].hidden||n.nodes(t[e].source).hidden||n.nodes(t[e].target).hidden||a.addEdge(t[e],n.nodes(t[e].source),n.nodes(t[e].target),this.edgeFloatArrays[i].array,e*a.POINTS*a.ATTRIBUTES,h.prefix,this.settings);"function"==typeof a.computeIndices&&(this.edgeIndicesArrays[i]=a.computeIndices(this.edgeFloatArrays[i].array))}for(i in this.nodeFloatArrays)for(a=sigma.webgl.nodes[i],t=this.nodeFloatArrays[i].nodes,this.nodeFloatArrays[i].array=new Float32Array(t.length*a.POINTS*a.ATTRIBUTES),e=0,s=t.length;e<s;e++)this.nodeFloatArrays[i].array||(this.nodeFloatArrays[i].array=new Float32Array(t.length*a.POINTS*a.ATTRIBUTES)),t[e].hidden||a.addNode(t[e],this.nodeFloatArrays[i].array,e*a.POINTS*a.ATTRIBUTES,h.prefix,this.settings);return this},sigma.renderers.webgl.prototype.render=function(e){var s,i,r,a,n,h,o=this,g=(this.graph,this.contexts.nodes),d=this.contexts.edges,l=this.camera.getMatrix(),c=sigma.utils.extend(e,this.options),m=this.settings(c,"drawLabels"),p=this.settings(c,"drawEdges"),y=this.settings(c,"drawNodes");for(a in this.resize(!1),this.settings(c,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(p=!1),this.clear(),l=sigma.utils.matrices.multiply(l,sigma.utils.matrices.translation(this.width/2,this.height/2)),this.jobs)conrad.hasJob(a)&&conrad.killJob(a);if(p)if(this.settings(c,"batchEdgesDrawing"))(function(){var t,e,s,i,r,a,n,h,o,g;s="edges_"+this.conradId,g=this.settings(c,"webglEdgesBatchSize"),(t=Object.keys(this.edgeFloatArrays)).length&&(e=0,o=sigma.webgl.edges[t[e]],r=this.edgeFloatArrays[t[e]].array,h=this.edgeIndicesArrays[t[e]],n=0,a=Math.min(n+g*o.POINTS,r.length/o.ATTRIBUTES),i=function(){return this.edgePrograms[t[e]]||(this.edgePrograms[t[e]]=o.initProgram(d)),n<a&&(d.useProgram(this.edgePrograms[t[e]]),o.render(d,this.edgePrograms[t[e]],r,{settings:this.settings,matrix:l,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(c,"webglOversamplingRatio"),start:n,count:a-n,indicesData:h})),a>=r.length/o.ATTRIBUTES&&e===t.length-1?(delete this.jobs[s],!1):(a>=r.length/o.ATTRIBUTES?(e++,r=this.edgeFloatArrays[t[e]].array,o=sigma.webgl.edges[t[e]],n=0,a=Math.min(n+g*o.POINTS,r.length/o.ATTRIBUTES)):(n=a,a=Math.min(n+g*o.POINTS,r.length/o.ATTRIBUTES)),!0)},this.jobs[s]=i,conrad.addJob(s,i.bind(this)))}).call(this);else for(a in this.edgeFloatArrays)h=sigma.webgl.edges[a],this.edgePrograms[a]||(this.edgePrograms[a]=h.initProgram(d)),this.edgeFloatArrays[a]&&(d.useProgram(this.edgePrograms[a]),h.render(d,this.edgePrograms[a],this.edgeFloatArrays[a].array,{settings:this.settings,matrix:l,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(c,"webglOversamplingRatio"),indicesData:this.edgeIndicesArrays[a]}));if(y)for(a in g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA),g.enable(g.BLEND),this.nodeFloatArrays)h=sigma.webgl.nodes[a],this.nodePrograms[a]||(this.nodePrograms[a]=h.initProgram(g)),this.nodeFloatArrays[a]&&(g.useProgram(this.nodePrograms[a]),h.render(g,this.nodePrograms[a],this.nodeFloatArrays[a].array,{settings:this.settings,matrix:l,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(c,"webglOversamplingRatio")}));if(s=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(t,t,{nodes:s,edges:[],width:this.width,height:this.height}),m)for(n=function(t){return o.settings({prefix:o.camera.prefix},t)},i=0,r=s.length;i<r;i++)s[i].hidden||(sigma.canvas.labels[s[i].type||this.settings(c,"defaultNodeType")]||sigma.canvas.labels.def)(s[i],this.contexts.labels,n);return this.dispatchEvent("render"),this},sigma.renderers.webgl.prototype.initDOM=function(t,e,s){var i=document.createElement(t),r=this;i.style.position="absolute",i.setAttribute("class","sigma-"+e),this.domElements[e]=i,this.container.appendChild(i),"canvas"===t.toLowerCase()&&(this.contexts[e]=i.getContext(s?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),s&&(i.addEventListener("webglcontextlost",function(t){t.preventDefault()},!1),i.addEventListener("webglcontextrestored",function(t){r.render()},!1)))},sigma.renderers.webgl.prototype.resize=function(e,s){var i,r=this.width,a=this.height,n=sigma.utils.getPixelRatio();if(e!==t&&s!==t?(this.width=e,this.height=s):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,e=this.width,s=this.height),r!==this.width||a!==this.height)for(i in this.domElements)this.domElements[i].style.width=e+"px",this.domElements[i].style.height=s+"px","canvas"===this.domElements[i].tagName.toLowerCase()&&(this.contexts[i]&&this.contexts[i].scale?(this.domElements[i].setAttribute("width",e*n+"px"),this.domElements[i].setAttribute("height",s*n+"px"),1!==n&&this.contexts[i].scale(n,n)):(this.domElements[i].setAttribute("width",e*this.settings("webglOversamplingRatio")+"px"),this.domElements[i].setAttribute("height",s*this.settings("webglOversamplingRatio")+"px")));for(i in this.contexts)this.contexts[i]&&this.contexts[i].viewport&&this.contexts[i].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},sigma.renderers.webgl.prototype.clear=function(){return this.contexts.labels.clearRect(0,0,this.width,this.height),this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},sigma.renderers.webgl.prototype.kill=function(){for(var t,e;e=this.captors.pop();)e.kill();for(t in delete this.captors,this.domElements)this.domElements[t].parentNode.removeChild(this.domElements[t]),delete this.domElements[t],delete this.contexts[t];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.webgl.nodes"),sigma.utils.pkg("sigma.webgl.edges"),sigma.utils.pkg("sigma.canvas.labels")}).call(this);(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.svg=function(e,s,t,i){if("object"!=typeof i)throw"sigma.renderers.svg: Wrong arguments.";if(!(i.container instanceof HTMLElement))throw"Container not found.";var n,r,d,h,o=this;for(sigma.classes.dispatcher.extend(this),this.graph=e,this.camera=s,this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}},this.measurementCanvas=null,this.options=i,this.container=this.options.container,this.settings="object"==typeof i.settings&&i.settings?t.embedObjects(i.settings):t,this.settings("freeStyle",!!this.options.freeStyle),this.settings("xmlns","http://www.w3.org/2000/svg"),this.nodesOnScreen=[],this.edgesOnScreen=[],this.options.prefix="renderer"+sigma.utils.id()+":",this.initDOM("svg"),this.captors=[],n=0,r=(d=this.options.captors||[sigma.captors.mouse,sigma.captors.touch]).length;n<r;n++)h="function"==typeof d[n]?d[n]:sigma.captors[d[n]],this.captors.push(new h(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){o.resize()}),sigma.misc.bindDOMEvents.call(this,this.domElements.graph),this.bindHovers(this.options.prefix),this.resize(!1)},sigma.renderers.svg.prototype.render=function(s){s=s||{};var t,i,n,r,d,h,o,a,m,g={},l=this.graph,p=this.graph.nodes,c=(this.options.prefix,this.settings(s,"drawEdges")),u=this.settings(s,"drawNodes"),f=(this.settings(s,"drawLabels"),this.settings.embedObjects(s,{prefix:this.options.prefix,forceLabels:this.options.forceLabels}));for(this.settings(s,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(c=!1),this.camera.applyView(e,this.options.prefix,{width:this.width,height:this.height}),this.hideDOMElements(this.domElements.nodes),this.hideDOMElements(this.domElements.edges),this.hideDOMElements(this.domElements.labels),this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=0,r=(t=this.nodesOnScreen).length;i<r;i++)g[t[i].id]=t[i];for(i=0,r=(t=l.edges()).length;i<r;i++)!g[(d=t[i]).source]&&!g[d.target]||d.hidden||p(d.source).hidden||p(d.target).hidden||this.edgesOnScreen.push(d);if(a=sigma.svg.nodes,m=sigma.svg.labels,u)for(i=0,r=(t=this.nodesOnScreen).length;i<r;i++)t[i].hidden||this.domElements.nodes[t[i].id]||(n=(a[t[i].type]||a.def).create(t[i],f),this.domElements.nodes[t[i].id]=n,this.domElements.groups.nodes.appendChild(n),n=(m[t[i].type]||m.def).create(t[i],f),this.domElements.labels[t[i].id]=n,this.domElements.groups.labels.appendChild(n));if(u)for(i=0,r=(t=this.nodesOnScreen).length;i<r;i++)t[i].hidden||((a[t[i].type]||a.def).update(t[i],this.domElements.nodes[t[i].id],f),(m[t[i].type]||m.def).update(t[i],this.domElements.labels[t[i].id],f));if(a=sigma.svg.edges,c)for(i=0,r=(t=this.edgesOnScreen).length;i<r;i++)this.domElements.edges[t[i].id]||(h=p(t[i].source),o=p(t[i].target),n=(a[t[i].type]||a.def).create(t[i],h,o,f),this.domElements.edges[t[i].id]=n,this.domElements.groups.edges.appendChild(n));if(c)for(i=0,r=(t=this.edgesOnScreen).length;i<r;i++)h=p(t[i].source),o=p(t[i].target),(a[t[i].type]||a.def).update(t[i],this.domElements.edges[t[i].id],h,o,f);return this.dispatchEvent("render"),this},sigma.renderers.svg.prototype.initDOM=function(e){var s,t,i,n=document.createElementNS(this.settings("xmlns"),e),r=this.settings("classPrefix");n.style.position="absolute",n.setAttribute("class",r+"-svg"),n.setAttribute("xmlns",this.settings("xmlns")),n.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),n.setAttribute("version","1.1");var d=document.createElement("canvas");d.setAttribute("class",r+"-measurement-canvas"),this.domElements.graph=this.container.appendChild(n);var h=["edges","nodes","labels","hovers"];for(i=0,t=h.length;i<t;i++)(s=document.createElementNS(this.settings("xmlns"),"g")).setAttributeNS(null,"id",r+"-group-"+h[i]),s.setAttributeNS(null,"class",r+"-group"),this.domElements.groups[h[i]]=this.domElements.graph.appendChild(s);this.container.appendChild(d),this.measurementCanvas=d.getContext("2d")},sigma.renderers.svg.prototype.hideDOMElements=function(e){var s,t;for(t in e)s=e[t],sigma.svg.utils.hide(s);return this},sigma.renderers.svg.prototype.bindHovers=function(e){var s,t=sigma.svg.hovers,i=this;this.bind("overNode",function(n){var r=n.data.node,d=i.settings.embedObjects({prefix:e});if(d("enableHovering")){var h=(t[r.type]||t.def).create(r,i.domElements.nodes[r.id],i.measurementCanvas,d);i.domElements.hovers[r.id]=h,i.domElements.groups.hovers.appendChild(h),s=r}}),this.bind("outNode",function(t){var n=t.data.node;i.settings.embedObjects({prefix:e})("enableHovering")&&(i.domElements.groups.hovers.removeChild(i.domElements.hovers[n.id]),s=null,delete i.domElements.hovers[n.id],i.domElements.groups.nodes.appendChild(i.domElements.nodes[n.id]))}),this.bind("render",function(){if(s){var n=i.settings.embedObjects({prefix:e});i.domElements.groups.hovers.removeChild(i.domElements.hovers[s.id]),delete i.domElements.hovers[s.id];var r=(t[s.type]||t.def).create(s,i.domElements.nodes[s.id],i.measurementCanvas,n);i.domElements.hovers[s.id]=r,i.domElements.groups.hovers.appendChild(r)}})},sigma.renderers.svg.prototype.resize=function(s,t){var i=this.width,n=this.height;return s!==e&&t!==e?(this.width=s,this.height=t):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,s=this.width,t=this.height),i===this.width&&n===this.height||(this.domElements.graph.style.width=s+"px",this.domElements.graph.style.height=t+"px","svg"===this.domElements.graph.tagName.toLowerCase()&&(this.domElements.graph.setAttribute("width",1*s),this.domElements.graph.setAttribute("height",1*t))),this},sigma.utils.pkg("sigma.svg.nodes"),sigma.utils.pkg("sigma.svg.edges"),sigma.utils.pkg("sigma.svg.labels")}).call(this);!function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");var t,r=!!e.WebGLRenderingContext;if(r){t=document.createElement("canvas");try{r=!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(e){r=!1}}sigma.renderers.def=r?sigma.renderers.webgl:sigma.renderers.canvas}(this);!function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(o,t,i,r,a){var e=sigma.utils.floatColor(o.color||a("defaultNodeColor"));t[i++]=o[r+"x"],t[i++]=o[r+"y"],t[i++]=o[r+"size"],t[i++]=e,t[i++]=0,t[i++]=o[r+"x"],t[i++]=o[r+"y"],t[i++]=o[r+"size"],t[i++]=e,t[i++]=2*Math.PI/3,t[i++]=o[r+"x"],t[i++]=o[r+"y"],t[i++]=o[r+"size"],t[i++]=e,t[i++]=4*Math.PI/3},render:function(o,t,i,r){var a,e=o.getAttribLocation(t,"a_position"),n=o.getAttribLocation(t,"a_size"),l=o.getAttribLocation(t,"a_color"),c=o.getAttribLocation(t,"a_angle"),s=o.getUniformLocation(t,"u_resolution"),u=o.getUniformLocation(t,"u_matrix"),f=o.getUniformLocation(t,"u_ratio"),_=o.getUniformLocation(t,"u_scale");a=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,a),o.bufferData(o.ARRAY_BUFFER,i,o.DYNAMIC_DRAW),o.uniform2f(s,r.width,r.height),o.uniform1f(f,1/Math.pow(r.ratio,r.settings("nodesPowRatio"))),o.uniform1f(_,r.scalingRatio),o.uniformMatrix3fv(u,!1,r.matrix),o.enableVertexAttribArray(e),o.enableVertexAttribArray(n),o.enableVertexAttribArray(l),o.enableVertexAttribArray(c),o.vertexAttribPointer(e,2,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),o.vertexAttribPointer(n,1,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),o.vertexAttribPointer(l,1,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),o.vertexAttribPointer(c,1,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),o.drawArrays(o.TRIANGLES,r.start||0,r.count||i.length/this.ATTRIBUTES)},initProgram:function(o){var t,i;return t=sigma.utils.loadShader(o,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),o.VERTEX_SHADER),i=sigma.utils.loadShader(o,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),o.FRAGMENT_SHADER),sigma.utils.loadProgram(o,[t,i])}}}();!function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(o,t,r,i,a){t[r++]=o[i+"x"],t[r++]=o[i+"y"],t[r++]=o[i+"size"],t[r++]=sigma.utils.floatColor(o.color||a("defaultNodeColor"))},render:function(o,t,r,i){var a,e=o.getAttribLocation(t,"a_position"),n=o.getAttribLocation(t,"a_size"),l=o.getAttribLocation(t,"a_color"),c=o.getUniformLocation(t,"u_resolution"),s=o.getUniformLocation(t,"u_matrix"),u=o.getUniformLocation(t,"u_ratio"),f=o.getUniformLocation(t,"u_scale");a=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,a),o.bufferData(o.ARRAY_BUFFER,r,o.DYNAMIC_DRAW),o.uniform2f(c,i.width,i.height),o.uniform1f(u,1/Math.pow(i.ratio,i.settings("nodesPowRatio"))),o.uniform1f(f,i.scalingRatio),o.uniformMatrix3fv(s,!1,i.matrix),o.enableVertexAttribArray(e),o.enableVertexAttribArray(n),o.enableVertexAttribArray(l),o.vertexAttribPointer(e,2,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),o.vertexAttribPointer(n,1,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),o.vertexAttribPointer(l,1,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),o.drawArrays(o.POINTS,i.start||0,i.count||r.length/this.ATTRIBUTES)},initProgram:function(o){var t,r;return t=sigma.utils.loadShader(o,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),o.VERTEX_SHADER),r=sigma.utils.loadShader(o,["precision mediump float;","varying vec4 color;","void main(void) {","float border = 0.01;","float radius = 0.5;","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_PointCoord - vec2(0.5, 0.5);","float dist = radius - sqrt(m.x * m.x + m.y * m.y);","float t = 0.0;","if (dist > border)","t = 1.0;","else if (dist > 0.0)","t = dist / border;","gl_FragColor = mix(color0, color, t);","}"].join("\n"),o.FRAGMENT_SHADER),sigma.utils.loadProgram(o,[t,r])}}}();!function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(t,i,o,r,a,e,n){var l=(t[e+"size"]||1)/2,s=i[e+"x"],u=i[e+"y"],c=o[e+"x"],m=o[e+"y"],f=t.color;if(!f)switch(n("edgeColor")){case"source":f=i.color||n("defaultNodeColor");break;case"target":f=o.color||n("defaultNodeColor");break;default:f=n("defaultEdgeColor")}f=sigma.utils.floatColor(f),r[a++]=s,r[a++]=u,r[a++]=c,r[a++]=m,r[a++]=l,r[a++]=0,r[a++]=f,r[a++]=c,r[a++]=m,r[a++]=s,r[a++]=u,r[a++]=l,r[a++]=1,r[a++]=f,r[a++]=c,r[a++]=m,r[a++]=s,r[a++]=u,r[a++]=l,r[a++]=0,r[a++]=f,r[a++]=c,r[a++]=m,r[a++]=s,r[a++]=u,r[a++]=l,r[a++]=0,r[a++]=f,r[a++]=s,r[a++]=u,r[a++]=c,r[a++]=m,r[a++]=l,r[a++]=1,r[a++]=f,r[a++]=s,r[a++]=u,r[a++]=c,r[a++]=m,r[a++]=l,r[a++]=0,r[a++]=f},render:function(t,i,o,r){var a,e=t.getAttribLocation(i,"a_color"),n=t.getAttribLocation(i,"a_position1"),l=t.getAttribLocation(i,"a_position2"),s=t.getAttribLocation(i,"a_thickness"),u=t.getAttribLocation(i,"a_minus"),c=t.getUniformLocation(i,"u_resolution"),m=t.getUniformLocation(i,"u_matrix"),f=t.getUniformLocation(i,"u_matrixHalfPi"),_=t.getUniformLocation(i,"u_matrixHalfPiMinus"),A=t.getUniformLocation(i,"u_ratio"),g=t.getUniformLocation(i,"u_scale");a=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW),t.uniform2f(c,r.width,r.height),t.uniform1f(A,r.ratio/Math.pow(r.ratio,r.settings("edgesPowRatio"))),t.uniform1f(g,r.scalingRatio),t.uniformMatrix3fv(m,!1,r.matrix),t.uniformMatrix2fv(f,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),t.uniformMatrix2fv(_,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),t.enableVertexAttribArray(e),t.enableVertexAttribArray(n),t.enableVertexAttribArray(l),t.enableVertexAttribArray(s),t.enableVertexAttribArray(u),t.vertexAttribPointer(n,2,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(l,2,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(s,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(u,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),t.vertexAttribPointer(e,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),t.drawArrays(t.TRIANGLES,r.start||0,r.count||o.length/this.ATTRIBUTES)},initProgram:function(t){var i,o;return i=sigma.utils.loadShader(t,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),t.VERTEX_SHADER),o=sigma.utils.loadShader(t,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),t.FRAGMENT_SHADER),sigma.utils.loadProgram(t,[i,o])}}}();!function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(o,r,t,i,a,e,l){o[e+"size"];var c=r[e+"x"],n=r[e+"y"],u=t[e+"x"],s=t[e+"y"],f=o.color;if(!f)switch(l("edgeColor")){case"source":f=r.color||l("defaultNodeColor");break;case"target":f=t.color||l("defaultNodeColor");break;default:f=l("defaultEdgeColor")}f=sigma.utils.floatColor(f),i[a++]=c,i[a++]=n,i[a++]=f,i[a++]=u,i[a++]=s,i[a++]=f},render:function(o,r,t,i){var a,e=o.getAttribLocation(r,"a_color"),l=o.getAttribLocation(r,"a_position"),c=o.getUniformLocation(r,"u_resolution"),n=o.getUniformLocation(r,"u_matrix");a=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,a),o.bufferData(o.ARRAY_BUFFER,t,o.DYNAMIC_DRAW),o.uniform2f(c,i.width,i.height),o.uniformMatrix3fv(n,!1,i.matrix),o.enableVertexAttribArray(l),o.enableVertexAttribArray(e),o.vertexAttribPointer(l,2,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),o.vertexAttribPointer(e,1,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),o.lineWidth(3),o.drawArrays(o.LINES,i.start||0,i.count||t.length/this.ATTRIBUTES)},initProgram:function(o){var r,t;return r=sigma.utils.loadShader(o,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),o.VERTEX_SHADER),t=sigma.utils.loadShader(o,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),o.FRAGMENT_SHADER),sigma.utils.loadProgram(o,[r,t])}}}();!function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(t,a,o,r,i,e,n){var l=(t[e+"size"]||1)/2,s=a[e+"x"],_=a[e+"y"],u=o[e+"x"],A=o[e+"y"],c=o[e+"size"],f=t.color;if(!f)switch(n("edgeColor")){case"source":f=a.color||n("defaultNodeColor");break;case"target":f=o.color||n("defaultNodeColor");break;default:f=n("defaultEdgeColor")}f=sigma.utils.floatColor(f),r[i++]=s,r[i++]=_,r[i++]=u,r[i++]=A,r[i++]=l,r[i++]=c,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=f,r[i++]=u,r[i++]=A,r[i++]=s,r[i++]=_,r[i++]=l,r[i++]=c,r[i++]=1,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=f,r[i++]=u,r[i++]=A,r[i++]=s,r[i++]=_,r[i++]=l,r[i++]=c,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=f,r[i++]=u,r[i++]=A,r[i++]=s,r[i++]=_,r[i++]=l,r[i++]=c,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=f,r[i++]=s,r[i++]=_,r[i++]=u,r[i++]=A,r[i++]=l,r[i++]=c,r[i++]=0,r[i++]=1,r[i++]=0,r[i++]=0,r[i++]=f,r[i++]=s,r[i++]=_,r[i++]=u,r[i++]=A,r[i++]=l,r[i++]=c,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=f,r[i++]=u,r[i++]=A,r[i++]=s,r[i++]=_,r[i++]=l,r[i++]=c,r[i++]=1,r[i++]=0,r[i++]=1,r[i++]=-1,r[i++]=f,r[i++]=u,r[i++]=A,r[i++]=s,r[i++]=_,r[i++]=l,r[i++]=c,r[i++]=1,r[i++]=0,r[i++]=1,r[i++]=0,r[i++]=f,r[i++]=u,r[i++]=A,r[i++]=s,r[i++]=_,r[i++]=l,r[i++]=c,r[i++]=1,r[i++]=0,r[i++]=1,r[i++]=1,r[i++]=f},render:function(t,a,o,r){var i,e=t.getAttribLocation(a,"a_pos1"),n=t.getAttribLocation(a,"a_pos2"),l=t.getAttribLocation(a,"a_thickness"),s=t.getAttribLocation(a,"a_tSize"),_=t.getAttribLocation(a,"a_delay"),u=t.getAttribLocation(a,"a_minus"),A=t.getAttribLocation(a,"a_head"),c=t.getAttribLocation(a,"a_headPosition"),f=t.getAttribLocation(a,"a_color"),m=t.getUniformLocation(a,"u_resolution"),E=t.getUniformLocation(a,"u_matrix"),T=t.getUniformLocation(a,"u_matrixHalfPi"),b=t.getUniformLocation(a,"u_matrixHalfPiMinus"),d=t.getUniformLocation(a,"u_ratio"),g=t.getUniformLocation(a,"u_nodeRatio"),x=t.getUniformLocation(a,"u_arrowHead"),P=t.getUniformLocation(a,"u_scale");i=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW),t.uniform2f(m,r.width,r.height),t.uniform1f(d,r.ratio/Math.pow(r.ratio,r.settings("edgesPowRatio"))),t.uniform1f(g,Math.pow(r.ratio,r.settings("nodesPowRatio"))/r.ratio),t.uniform1f(x,5),t.uniform1f(P,r.scalingRatio),t.uniformMatrix3fv(E,!1,r.matrix),t.uniformMatrix2fv(T,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),t.uniformMatrix2fv(b,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),t.enableVertexAttribArray(e),t.enableVertexAttribArray(n),t.enableVertexAttribArray(l),t.enableVertexAttribArray(s),t.enableVertexAttribArray(_),t.enableVertexAttribArray(u),t.enableVertexAttribArray(A),t.enableVertexAttribArray(c),t.enableVertexAttribArray(f),t.vertexAttribPointer(e,2,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(n,2,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(l,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(s,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),t.vertexAttribPointer(_,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),t.vertexAttribPointer(u,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),t.vertexAttribPointer(A,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),t.vertexAttribPointer(c,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),t.vertexAttribPointer(f,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),t.drawArrays(t.TRIANGLES,r.start||0,r.count||o.length/this.ATTRIBUTES)},initProgram:function(t){var a,o;return a=sigma.utils.loadShader(t,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),t.VERTEX_SHADER),o=sigma.utils.loadShader(t,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),t.FRAGMENT_SHADER),sigma.utils.loadProgram(t,[a,o])}}}();!function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.thickLine={POINTS:4,ATTRIBUTES:6,addEdge:function(t,o,r,i,e,a,n){var l=t[a+"size"]||1,c=o[a+"x"],s=o[a+"y"],_=r[a+"x"],u=r[a+"y"],A=t.color;if(!A)switch(n("edgeColor")){case"source":A=o.color||n("defaultNodeColor");break;case"target":A=r.color||n("defaultNodeColor");break;default:A=n("defaultEdgeColor")}A=sigma.utils.floatColor(A);var E=_-c,f=u-s,T=E*E+f*f;if(T)var g=[-f*(T=1/Math.sqrt(T)),E*T];else g=[0,0];i[e++]=c,i[e++]=s,i[e++]=g[0],i[e++]=g[1],i[e++]=l,i[e++]=A,i[e++]=c,i[e++]=s,i[e++]=-g[0],i[e++]=-g[1],i[e++]=l,i[e++]=A,i[e++]=_,i[e++]=u,i[e++]=g[0],i[e++]=g[1],i[e++]=l,i[e++]=A,i[e++]=_,i[e++]=u,i[e++]=-g[0],i[e++]=-g[1],i[e++]=l,i[e++]=A},computeIndices:function(t){var o,r=new Uint16Array(6*t.length),i=0,e=0;for(0,o=t.length/this.ATTRIBUTES;e<o;e++)r[i++]=e+0,r[i++]=e+1,r[i++]=e+2,r[i++]=e+2,r[i++]=e+1,r[i++]=e+3,e+=3;return r},render:function(t,o,r,i){var e=t.getAttribLocation(o,"a_position"),a=t.getAttribLocation(o,"a_normal"),n=t.getAttribLocation(o,"a_thickness"),l=t.getAttribLocation(o,"a_color"),c=t.getUniformLocation(o,"u_resolution"),s=t.getUniformLocation(o,"u_ratio"),_=t.getUniformLocation(o,"u_matrix"),u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),t.uniform2f(c,i.width,i.height),t.uniform1f(s,i.ratio/Math.pow(i.ratio,i.settings("edgesPowRatio"))),t.uniformMatrix3fv(_,!1,i.matrix),t.enableVertexAttribArray(e),t.enableVertexAttribArray(a),t.enableVertexAttribArray(n),t.enableVertexAttribArray(l),t.vertexAttribPointer(e,2,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(a,2,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(n,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(l,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20);var A=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,A),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i.indicesData,t.STATIC_DRAW),t.drawElements(t.TRIANGLES,i.indicesData.length,t.UNSIGNED_SHORT,i.start||0)},initProgram:function(t){var o,r;return o=sigma.utils.loadShader(t,["attribute vec2 a_position;","attribute vec2 a_normal;","attribute float a_thickness;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform mat3 u_matrix;","varying vec4 v_color;","void main() {","vec2 delta = vec2(a_normal * a_thickness / 2.0);","vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","gl_Position = vec4(position, 0, 1);","gl_PointSize = 10.0;","float c = a_color;","v_color.b = mod(c, 256.0); c = floor(c / 256.0);","v_color.g = mod(c, 256.0); c = floor(c / 256.0);","v_color.r = mod(c, 256.0); c = floor(c / 256.0); v_color /= 255.0;","v_color.a = 1.0;","}"].join("\n"),t.VERTEX_SHADER),r=sigma.utils.loadShader(t,["precision mediump float;","varying vec4 v_color;","void main(void) {","gl_FragColor = v_color;","}"].join("\n"),t.FRAGMENT_SHADER),sigma.utils.loadProgram(t,[o,r])}}}();!function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.thickLineCPU={POINTS:4,ATTRIBUTES:3,addEdge:function(o,t,r,i,e,a,n){var l=(o[a+"size"]||1)/2,c=t[a+"x"],s=t[a+"y"],u=r[a+"x"],f=r[a+"y"],_=o.color;if(!_)switch(n("edgeColor")){case"source":_=t.color||n("defaultNodeColor");break;case"target":_=r.color||n("defaultNodeColor");break;default:_=n("defaultEdgeColor")}_=sigma.utils.floatColor(_);var g=u-c,d=f-s,E=g*g+d*d;if(E)var A=[-d*(E=1/Math.sqrt(E))*l,g*E*l];else A=[0,0];i[e++]=c+A[0],i[e++]=s+A[1],i[e++]=_,i[e++]=c-A[0],i[e++]=s-A[1],i[e++]=_,i[e++]=u+A[0],i[e++]=f+A[1],i[e++]=_,i[e++]=u-A[0],i[e++]=f-A[1],i[e++]=_},computeIndices:function(o){var t,r=new Uint16Array(6*o.length),i=0,e=0;for(0,t=o.length/this.ATTRIBUTES;e<t;e++)r[i++]=e+0,r[i++]=e+1,r[i++]=e+2,r[i++]=e+2,r[i++]=e+1,r[i++]=e+3,e+=3;return r},render:function(o,t,r,i){var e=o.getAttribLocation(t,"a_position"),a=o.getAttribLocation(t,"a_color"),n=o.getUniformLocation(t,"u_resolution"),l=o.getUniformLocation(t,"u_ratio"),c=o.getUniformLocation(t,"u_matrix"),s=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,s),o.bufferData(o.ARRAY_BUFFER,r,o.STATIC_DRAW),o.uniform2f(n,i.width,i.height),o.uniform1f(l,i.ratio/Math.pow(i.ratio,i.settings("edgesPowRatio"))),o.uniformMatrix3fv(c,!1,i.matrix),o.enableVertexAttribArray(e),o.enableVertexAttribArray(a),o.vertexAttribPointer(e,2,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),o.vertexAttribPointer(a,1,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8);var u=o.createBuffer();o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,u),o.bufferData(o.ELEMENT_ARRAY_BUFFER,i.indicesData,o.STATIC_DRAW),o.drawElements(o.TRIANGLES,i.indicesData.length,o.UNSIGNED_SHORT,i.start||0)},initProgram:function(o){var t,r;return t=sigma.utils.loadShader(o,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform mat3 u_matrix;","varying vec4 v_color;","void main() {","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","gl_Position = vec4(position, 0, 1);","gl_PointSize = 10.0;","float c = a_color;","v_color.b = mod(c, 256.0); c = floor(c / 256.0);","v_color.g = mod(c, 256.0); c = floor(c / 256.0);","v_color.r = mod(c, 256.0); c = floor(c / 256.0); v_color /= 255.0;","v_color.a = 1.0;","}"].join("\n"),o.VERTEX_SHADER),r=sigma.utils.loadShader(o,["precision mediump float;","varying vec4 v_color;","void main(void) {","gl_FragColor = v_color;","}"].join("\n"),o.FRAGMENT_SHADER),sigma.utils.loadProgram(o,[t,r])}}}();!function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.thickLineGPU={POINTS:4,ATTRIBUTES:7,addEdge:function(t,o,i,r,e,a,n){var l=t[a+"size"]||1,c=o[a+"x"],s=o[a+"y"],_=i[a+"x"],A=i[a+"y"],E=t.color;if(!E)switch(n("edgeColor")){case"source":E=o.color||n("defaultNodeColor");break;case"target":E=i.color||n("defaultNodeColor");break;default:E=n("defaultEdgeColor")}E=sigma.utils.floatColor(E),r[e++]=c,r[e++]=s,r[e++]=_,r[e++]=A,r[e++]=1,r[e++]=l,r[e++]=E,r[e++]=c,r[e++]=s,r[e++]=_,r[e++]=A,r[e++]=-1,r[e++]=l,r[e++]=E,r[e++]=_,r[e++]=A,r[e++]=c,r[e++]=s,r[e++]=1,r[e++]=l,r[e++]=E,r[e++]=_,r[e++]=A,r[e++]=c,r[e++]=s,r[e++]=-1,r[e++]=l,r[e++]=E},computeIndices:function(t){var o,i=new Uint16Array(6*t.length),r=0,e=0;for(0,o=t.length/this.ATTRIBUTES;e<o;e++)i[r++]=e+0,i[r++]=e+1,i[r++]=e+2,i[r++]=e+2,i[r++]=e+1,i[r++]=e+3,e+=3;return i},render:function(t,o,i,r){var e=t.getAttribLocation(o,"a_position1"),a=t.getAttribLocation(o,"a_position2"),n=t.getAttribLocation(o,"a_direction"),l=t.getAttribLocation(o,"a_thickness"),c=t.getAttribLocation(o,"a_color"),s=t.getUniformLocation(o,"u_resolution"),_=t.getUniformLocation(o,"u_ratio"),A=t.getUniformLocation(o,"u_matrix"),E=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,E),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),t.uniform2f(s,r.width,r.height),t.uniform1f(_,r.ratio/Math.pow(r.ratio,r.settings("edgesPowRatio"))),t.uniformMatrix3fv(A,!1,r.matrix),t.enableVertexAttribArray(e),t.enableVertexAttribArray(a),t.enableVertexAttribArray(n),t.enableVertexAttribArray(l),t.enableVertexAttribArray(c),t.vertexAttribPointer(e,2,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(a,2,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),t.vertexAttribPointer(n,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),t.vertexAttribPointer(l,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),t.vertexAttribPointer(c,1,t.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24);var u=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,u),t.bufferData(t.ELEMENT_ARRAY_BUFFER,r.indicesData,t.STATIC_DRAW),t.drawElements(t.TRIANGLES,r.indicesData.length,t.UNSIGNED_SHORT,r.start||0)},initProgram:function(t){var o,i;return o=sigma.utils.loadShader(t,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_direction;","attribute float a_thickness;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform mat3 u_matrix;","varying vec4 v_color;","void main() {","vec2 translation = a_position2 - a_position1;","vec2 orthogonal = vec2(translation.y, -translation.x);","vec2 delta = a_thickness / 2.0 * a_direction * normalize(orthogonal);","vec2 position = (u_matrix * vec3(a_position1 + delta, 1)).xy;","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","gl_Position = vec4(position, 0, 1);","gl_PointSize = 10.0;","float c = a_color;","v_color.b = mod(c, 256.0); c = floor(c / 256.0);","v_color.g = mod(c, 256.0); c = floor(c / 256.0);","v_color.r = mod(c, 256.0); c = floor(c / 256.0); v_color /= 255.0;","v_color.a = 1.0;","}"].join("\n"),t.VERTEX_SHADER,function(t){console.log(t)}),i=sigma.utils.loadShader(t,["precision mediump float;","varying vec4 v_color;","void main(void) {","gl_FragColor = v_color;","}"].join("\n"),t.FRAGMENT_SHADER),sigma.utils.loadProgram(t,[o,i])}}}();(function(l){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(l,e,a){var t,o=a("prefix")||"",i=l[o+"size"];i<a("labelThreshold")||l.label&&"string"==typeof l.label&&(t="fixed"===a("labelSize")?a("defaultLabelSize"):a("labelSizeRatio")*i,e.font=(a("fontStyle")?a("fontStyle")+" ":"")+t+"px "+a("font"),e.fillStyle="node"===a("labelColor")?l.color||a("defaultNodeColor"):a("defaultLabelColor"),e.fillText(l.label,Math.round(l[o+"x"]+i+3),Math.round(l[o+"y"]+t/3)))}}).call(this);(function(o){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(o,e,l){var a,r,t,d,i,n=l("hoverFontStyle")||l("fontStyle"),s=l("prefix")||"",f=o[s+"size"],h="fixed"===l("labelSize")?l("defaultLabelSize"):l("labelSizeRatio")*f;e.font=(n?n+" ":"")+h+"px "+(l("hoverFont")||l("font")),e.beginPath(),e.fillStyle="node"===l("labelHoverBGColor")?o.color||l("defaultNodeColor"):l("defaultHoverLabelBGColor"),o.label&&l("labelHoverShadow")&&(e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor=l("labelHoverShadowColor")),o.label&&"string"==typeof o.label&&(a=Math.round(o[s+"x"]-h/2-2),r=Math.round(o[s+"y"]-h/2-2),t=Math.round(e.measureText(o.label).width+h/2+f+7),d=Math.round(h+4),i=Math.round(h/2+2),e.moveTo(a,r+i),e.arcTo(a,r,a+i,r,i),e.lineTo(a+t,r),e.lineTo(a+t,r+d),e.lineTo(a+i,r+d),e.arcTo(a,r+d,a,r+d-i,i),e.lineTo(a,r+i),e.closePath(),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0),l("borderSize")>0&&(e.beginPath(),e.fillStyle="node"===l("nodeBorderColor")?o.color||l("defaultNodeColor"):l("defaultNodeBorderColor"),e.arc(o[s+"x"],o[s+"y"],f+l("borderSize"),0,2*Math.PI,!0),e.closePath(),e.fill()),(sigma.canvas.nodes[o.type]||sigma.canvas.nodes.def)(o,e,l),o.label&&"string"==typeof o.label&&(e.fillStyle="node"===l("labelHoverColor")?o.color||l("defaultNodeColor"):l("defaultLabelHoverColor"),e.fillText(o.label,Math.round(o[s+"x"]+f+3),Math.round(o[s+"y"]+h/3)))}}).call(this);!function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes"),sigma.canvas.nodes.def=function(a,i,s){var e=s("prefix")||"";i.fillStyle=a.color||s("defaultNodeColor"),i.beginPath(),i.arc(a[e+"x"],a[e+"y"],a[e+"size"],0,2*Math.PI,!0),i.closePath(),i.fill()}}();!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(e,o,a,s,t){var i=e.color,r=t("prefix")||"",l=e[r+"size"]||1,c=t("edgeColor"),d=t("defaultNodeColor"),g=t("defaultEdgeColor");if(!i)switch(c){case"source":i=o.color||d;break;case"target":i=a.color||d;break;default:i=g}s.strokeStyle=i,s.lineWidth=l,s.beginPath(),s.moveTo(o[r+"x"],o[r+"y"]),s.lineTo(a[r+"x"],a[r+"y"]),s.stroke()}}();!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curve=function(e,o,i,t,a){var r,s=e.color,l=a("prefix")||"",c=e[l+"size"]||1,d=a("edgeColor"),u=a("defaultNodeColor"),g=a("defaultEdgeColor"),n=o[l+"size"],f=o[l+"x"],v=o[l+"y"],C=i[l+"x"],m=i[l+"y"];if(r=o.id===i.id?sigma.utils.getSelfLoopControlPoints(f,v,n):sigma.utils.getQuadraticControlPoint(f,v,C,m),!s)switch(d){case"source":s=o.color||u;break;case"target":s=i.color||u;break;default:s=g}t.strokeStyle=s,t.lineWidth=c,t.beginPath(),t.moveTo(f,v),o.id===i.id?t.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,C,m):t.quadraticCurveTo(r.x,r.y,C,m),t.stroke()}}();!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(e,o,a,i,t){var l=e.color,r=t("prefix")||"",s=t("edgeColor"),n=t("defaultNodeColor"),c=t("defaultEdgeColor"),g=e[r+"size"]||1,d=a[r+"size"],f=o[r+"x"],h=o[r+"y"],u=a[r+"x"],m=a[r+"y"],T=Math.max(2.5*g,t("minArrowSize")),k=Math.sqrt(Math.pow(u-f,2)+Math.pow(m-h,2)),v=f+(u-f)*(k-T-d)/k,w=h+(m-h)*(k-T-d)/k,b=(u-f)*T/k,p=(m-h)*T/k;if(!l)switch(s){case"source":l=o.color||n;break;case"target":l=a.color||n;break;default:l=c}i.strokeStyle=l,i.lineWidth=g,i.beginPath(),i.moveTo(f,h),i.lineTo(v,w),i.stroke(),i.fillStyle=l,i.beginPath(),i.moveTo(v+b,w+p),i.lineTo(v+.6*p,w-.6*b),i.lineTo(v-.6*p,w+.6*b),i.lineTo(v+b,w+p),i.closePath(),i.fill()}}();!function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.curvedArrow=function(e,o,i,t,a){var r,l,s,d,n,c,g=e.color,u=a("prefix")||"",x=a("edgeColor"),y=a("defaultNodeColor"),h=a("defaultEdgeColor"),f=e[u+"size"]||1,m=i[u+"size"],v=o[u+"x"],p=o[u+"y"],w=i[u+"x"],C=i[u+"y"],M=Math.max(2.5*f,a("minArrowSize"));if(r=o.id===i.id?sigma.utils.getSelfLoopControlPoints(v,p,m):sigma.utils.getQuadraticControlPoint(v,p,w,C),o.id===i.id?(l=Math.sqrt(Math.pow(w-r.x1,2)+Math.pow(C-r.y1,2)),s=r.x1+(w-r.x1)*(l-M-m)/l,d=r.y1+(C-r.y1)*(l-M-m)/l,n=(w-r.x1)*M/l,c=(C-r.y1)*M/l):(l=Math.sqrt(Math.pow(w-r.x,2)+Math.pow(C-r.y,2)),s=r.x+(w-r.x)*(l-M-m)/l,d=r.y+(C-r.y)*(l-M-m)/l,n=(w-r.x)*M/l,c=(C-r.y)*M/l),!g)switch(x){case"source":g=o.color||y;break;case"target":g=i.color||y;break;default:g=h}t.strokeStyle=g,t.lineWidth=f,t.beginPath(),t.moveTo(v,p),o.id===i.id?t.bezierCurveTo(r.x2,r.y2,r.x1,r.y1,s,d):t.quadraticCurveTo(r.x,r.y,s,d),t.stroke(),t.fillStyle=g,t.beginPath(),t.moveTo(s+n,d+c),t.lineTo(s+.6*c,d-.6*n),t.lineTo(s-.6*c,d+.6*n),t.lineTo(s+n,d+c),t.closePath(),t.fill()}}();!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(e,o,r,a,l){var t=e.color,i=l("prefix")||"",s=e[i+"size"]||1,d=l("edgeColor"),c=l("defaultNodeColor"),g=l("defaultEdgeColor");if(!t)switch(d){case"source":t=o.color||c;break;case"target":t=r.color||c;break;default:t=g}t="edge"===l("edgeHoverColor")?e.hover_color||t:e.hover_color||l("defaultEdgeHoverColor")||t,s*=l("edgeHoverSizeRatio"),a.strokeStyle=t,a.lineWidth=s,a.beginPath(),a.moveTo(o[i+"x"],o[i+"y"]),a.lineTo(r[i+"x"],r[i+"y"]),a.stroke()}}();!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(e,o,r,i,t){var a,s=e.color,l=t("prefix")||"",d=t("edgeHoverSizeRatio")*(e[l+"size"]||1),g=t("edgeColor"),c=t("defaultNodeColor"),u=t("defaultEdgeColor"),v=o[l+"size"],n=o[l+"x"],f=o[l+"y"],C=r[l+"x"],h=r[l+"y"];if(a=o.id===r.id?sigma.utils.getSelfLoopControlPoints(n,f,v):sigma.utils.getQuadraticControlPoint(n,f,C,h),!s)switch(g){case"source":s=o.color||c;break;case"target":s=r.color||c;break;default:s=u}s="edge"===t("edgeHoverColor")?e.hover_color||s:e.hover_color||t("defaultEdgeHoverColor")||s,i.strokeStyle=s,i.lineWidth=d,i.beginPath(),i.moveTo(n,f),o.id===r.id?i.bezierCurveTo(a.x1,a.y1,a.x2,a.y2,C,h):i.quadraticCurveTo(a.x,a.y,C,h),i.stroke()}}();!function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(e,o,r,l,a){var t=e.color,i=a("prefix")||"",s=a("edgeColor"),c=a("defaultNodeColor"),g=a("defaultEdgeColor"),d=e[i+"size"]||1,h=r[i+"size"],n=o[i+"x"],v=o[i+"y"],f=r[i+"x"],u=r[i+"y"],T=2.5*(d=e.hover?a("edgeHoverSizeRatio")*d:d),k=Math.sqrt(Math.pow(f-n,2)+Math.pow(u-v,2)),m=n+(f-n)*(k-T-h)/k,C=v+(u-v)*(k-T-h)/k,b=(f-n)*T/k,p=(u-v)*T/k;if(!t)switch(s){case"source":t=o.color||c;break;case"target":t=r.color||c;break;default:t=g}t="edge"===a("edgeHoverColor")?e.hover_color||t:e.hover_color||a("defaultEdgeHoverColor")||t,l.strokeStyle=t,l.lineWidth=d,l.beginPath(),l.moveTo(n,v),l.lineTo(m,C),l.stroke(),l.fillStyle=t,l.beginPath(),l.moveTo(m+b,C+p),l.lineTo(m+.6*p,C-.6*b),l.lineTo(m-.6*p,C+.6*b),l.lineTo(m+b,C+p),l.closePath(),l.fill()}}();(function(s){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(s,a,e,i,t){(sigma.canvas.hovers[a.type]||sigma.canvas.hovers.def)(a,i,t),(sigma.canvas.hovers[e.type]||sigma.canvas.hovers.def)(e,i,t)}}).call(this);!function(){"use strict";sigma.utils.pkg("sigma.svg.utils"),sigma.svg.utils={show:function(s){return s.style.display="",this},hide:function(s){return s.style.display="none",this}}}();!function(){"use strict";sigma.utils.pkg("sigma.svg.nodes"),sigma.svg.nodes.def={create:function(t,e){e("prefix");var l=document.createElementNS(e("xmlns"),"circle");return l.setAttributeNS(null,"data-node-id",t.id),l.setAttributeNS(null,"class",e("classPrefix")+"-node"),l.setAttributeNS(null,"fill",t.color||e("defaultNodeColor")),l},update:function(t,e,l){var i=l("prefix")||"";return e.setAttributeNS(null,"cx",t[i+"x"]),e.setAttributeNS(null,"cy",t[i+"y"]),e.setAttributeNS(null,"r",t[i+"size"]),l("freeStyle")||e.setAttributeNS(null,"fill",t.color||l("defaultNodeColor")),e.style.display="",this}}}();!function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.def={create:function(e,t,l,r){var s=e.color,u=(r("prefix"),r("edgeColor")),i=r("defaultNodeColor"),a=r("defaultEdgeColor");if(!s)switch(u){case"source":s=t.color||i;break;case"target":s=l.color||i;break;default:s=a}var n=document.createElementNS(r("xmlns"),"line");return n.setAttributeNS(null,"data-edge-id",e.id),n.setAttributeNS(null,"class",r("classPrefix")+"-edge"),n.setAttributeNS(null,"stroke",s),n},update:function(e,t,l,r,s){var u=s("prefix")||"";return t.setAttributeNS(null,"stroke-width",e[u+"size"]||1),t.setAttributeNS(null,"x1",l[u+"x"]),t.setAttributeNS(null,"y1",l[u+"y"]),t.setAttributeNS(null,"x2",r[u+"x"]),t.setAttributeNS(null,"y2",r[u+"y"]),t.style.display="",this}}}();!function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.curve={create:function(e,t,r,s){var l=e.color,i=(s("prefix"),s("edgeColor")),u=s("defaultNodeColor"),a=s("defaultEdgeColor");if(!l)switch(i){case"source":l=t.color||u;break;case"target":l=r.color||u;break;default:l=a}var o=document.createElementNS(s("xmlns"),"path");return o.setAttributeNS(null,"data-edge-id",e.id),o.setAttributeNS(null,"class",s("classPrefix")+"-edge"),o.setAttributeNS(null,"stroke",l),o},update:function(e,t,r,s,l){var i=l("prefix")||"";t.setAttributeNS(null,"stroke-width",e[i+"size"]||1);var u=(r[i+"x"]+s[i+"x"])/2+(s[i+"y"]-r[i+"y"])/4,a=(r[i+"y"]+s[i+"y"])/2+(r[i+"x"]-s[i+"x"])/4,o="M"+r[i+"x"]+","+r[i+"y"]+" Q"+u+","+a+" "+s[i+"x"]+","+s[i+"y"];return t.setAttributeNS(null,"d",o),t.setAttributeNS(null,"fill","none"),t.style.display="",this}}}();(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.labels"),sigma.svg.labels.def={create:function(e,t){var l=e[(t("prefix")||"")+"size"],i=document.createElementNS(t("xmlns"),"text"),a="fixed"===t("labelSize")?t("defaultLabelSize"):t("labelSizeRatio")*l,s="node"===t("labelColor")?e.color||t("defaultNodeColor"):t("defaultLabelColor");return i.setAttributeNS(null,"data-label-target",e.id),i.setAttributeNS(null,"class",t("classPrefix")+"-label"),i.setAttributeNS(null,"font-size",a),i.setAttributeNS(null,"font-family",t("font")),i.setAttributeNS(null,"fill",s),i.innerHTML=e.label,i.textContent=e.label,i},update:function(e,t,l){var i=l("prefix")||"",a=e[i+"size"],s="fixed"===l("labelSize")?l("defaultLabelSize"):l("labelSizeRatio")*a;if((l("forceLabels")||!(a<l("labelThreshold")))&&"string"==typeof e.label)return t.setAttributeNS(null,"x",Math.round(e[i+"x"]+a+3)),t.setAttributeNS(null,"y",Math.round(e[i+"y"]+s/3)),t.style.display="",this}}}).call(this);(function(t){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.hovers"),sigma.svg.hovers.def={create:function(t,e,l,r){r("hoverFontStyle")||r("fontStyle");var n,i,u,s=r("prefix")||"",a=t[s+"size"],o="fixed"===r("labelSize")?r("defaultLabelSize"):r("labelSizeRatio")*a,d="node"===r("labelHoverColor")?t.color||r("defaultNodeColor"):r("defaultLabelHoverColor"),f=document.createElementNS(r("xmlns"),"g"),b=document.createElementNS(r("xmlns"),"rect"),c=document.createElementNS(r("xmlns"),"circle"),S=document.createElementNS(r("xmlns"),"text");return f.setAttributeNS(null,"class",r("classPrefix")+"-hover"),f.setAttributeNS(null,"data-node-id",t.id),"string"==typeof t.label&&(S.innerHTML=t.label,S.textContent=t.label,S.setAttributeNS(null,"class",r("classPrefix")+"-hover-label"),S.setAttributeNS(null,"font-size",o),S.setAttributeNS(null,"font-family",r("font")),S.setAttributeNS(null,"fill",d),S.setAttributeNS(null,"x",Math.round(t[s+"x"]+a+3)),S.setAttributeNS(null,"y",Math.round(t[s+"y"]+o/3)),Math.round(t[s+"x"]-o/2-2),Math.round(t[s+"y"]-o/2-2),n=Math.round(l.measureText(t.label).width+o/2+a+9),i=Math.round(o+4),u=Math.round(o/2+2),c.setAttributeNS(null,"class",r("classPrefix")+"-hover-area"),c.setAttributeNS(null,"fill","#fff"),c.setAttributeNS(null,"cx",t[s+"x"]),c.setAttributeNS(null,"cy",t[s+"y"]),c.setAttributeNS(null,"r",u),b.setAttributeNS(null,"class",r("classPrefix")+"-hover-area"),b.setAttributeNS(null,"fill","#fff"),b.setAttributeNS(null,"x",t[s+"x"]+u/4),b.setAttributeNS(null,"y",t[s+"y"]-u),b.setAttributeNS(null,"width",n),b.setAttributeNS(null,"height",i)),f.appendChild(c),f.appendChild(b),f.appendChild(S),f.appendChild(e),f}}}).call(this);(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.utils.pkg("sigma.utils"),sigma.middlewares.rescale=function(e,i,a){var t,n,s,m,d,o,g,h,x=this.graph.nodes(),z=this.graph.edges(),r=this.settings.embedObjects(a||{}),M=r("bounds")||sigma.utils.getBoundaries(this.graph,e,!0),S=M.minX,l=M.minY,f=M.maxX,u=M.maxY,c=M.sizeMax,E=M.weightMax,N=r("width")||1,w=r("height")||1,p=r("autoRescale"),y={nodePosition:1,nodeSize:1,edgeSize:1};for(p instanceof Array||(p=["nodePosition","nodeSize","edgeSize"]),t=0,n=p.length;t<n;t++)if(!y[p[t]])throw new Error('The rescale setting "'+p[t]+'" is not recognized.');var O=~p.indexOf("nodePosition"),X=~p.indexOf("nodeSize"),Y=~p.indexOf("edgeSize");for(g="outside"===r("scalingMode")?Math.max(N/Math.max(f-S,1),w/Math.max(u-l,1)):Math.min(N/Math.max(f-S,1),w/Math.max(u-l,1)),f+=h=(r("rescaleIgnoreSize")?0:(r("maxNodeSize")||c)/g)+(r("sideMargin")||0),S-=h,u+=h,l-=h,g="outside"===r("scalingMode")?Math.max(N/Math.max(f-S,1),w/Math.max(u-l,1)):Math.min(N/Math.max(f-S,1),w/Math.max(u-l,1)),r("maxNodeSize")||r("minNodeSize")?r("maxNodeSize")===r("minNodeSize")?(s=0,m=+r("maxNodeSize")):(s=(r("maxNodeSize")-r("minNodeSize"))/c,m=+r("minNodeSize")):(s=1,m=0),r("maxEdgeSize")||r("minEdgeSize")?r("maxEdgeSize")===r("minEdgeSize")?(d=0,o=+r("minEdgeSize")):(d=(r("maxEdgeSize")-r("minEdgeSize"))/E,o=+r("minEdgeSize")):(d=1,o=0),t=0,n=z.length;t<n;t++)z[t][i+"size"]=z[t][e+"size"]*(Y?d:1)+(Y?o:0);for(t=0,n=x.length;t<n;t++)x[t][i+"size"]=x[t][e+"size"]*(X?s:1)+(X?m:0),x[t][i+"x"]=(x[t][e+"x"]-(f+S)/2)*(O?g:1),x[t][i+"y"]=(x[t][e+"y"]-(u+l)/2)*(O?g:1)},sigma.utils.getBoundaries=function(e,i,a){var t,n,s=e.edges(),m=e.nodes(),d=-1/0,o=-1/0,g=1/0,h=1/0,x=-1/0,z=-1/0;if(a)for(t=0,n=s.length;t<n;t++)d=Math.max(s[t][i+"size"],d);for(t=0,n=m.length;t<n;t++)o=Math.max(m[t][i+"size"],o),x=Math.max(m[t][i+"x"],x),g=Math.min(m[t][i+"x"],g),z=Math.max(m[t][i+"y"],z),h=Math.min(m[t][i+"y"],h);return{weightMax:d=d||1,sizeMax:o=o||1,minX:g,minY:h,maxX:x,maxY:z}}}).call(this);(function(i){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.middlewares.copy=function(i,s){var e,t,a;if(s+""!=i+""){for(e=0,t=(a=this.graph.nodes()).length;e<t;e++)a[e][s+"x"]=a[e][i+"x"],a[e][s+"y"]=a[e][i+"y"],a[e][s+"size"]=a[e][i+"size"];for(e=0,t=(a=this.graph.edges()).length;e<t;e++)a[e][s+"size"]=a[e][i+"size"]}}}).call(this);(function(n){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var i,a=(i=0,function(){return""+ ++i});sigma.misc.animation.camera=function(i,t,e){if(!(i instanceof sigma.classes.camera&&"object"==typeof t&&t))throw"animation.camera: Wrong arguments.";if("number"!=typeof t.x&&"number"!=typeof t.y&&"number"!=typeof t.ratio&&"number"!=typeof t.angle)throw"There must be at least one valid coordinate in the given val.";var o,r,m,s,g,l=e||{},u=sigma.utils.dateNow();return g={x:i.x,y:i.y,ratio:i.ratio,angle:i.angle},l.duration,s="function"!=typeof l.easing?sigma.utils.easings[l.easing||"quadraticInOut"]:l.easing,o=function(){var a,e=l.duration?(sigma.utils.dateNow()-u)/l.duration:1;e>=1?(i.isAnimated=!1,i.goTo({x:t.x!==n?t.x:g.x,y:t.y!==n?t.y:g.y,ratio:t.ratio!==n?t.ratio:g.ratio,angle:t.angle!==n?t.angle:g.angle}),cancelAnimationFrame(r),delete sigma.misc.animation.running[r],"function"==typeof l.onComplete&&l.onComplete()):(a=s(e),i.isAnimated=!0,i.goTo({x:t.x!==n?g.x+(t.x-g.x)*a:g.x,y:t.y!==n?g.y+(t.y-g.y)*a:g.y,ratio:t.ratio!==n?g.ratio+(t.ratio-g.ratio)*a:g.ratio,angle:t.angle!==n?g.angle+(t.angle-g.angle)*a:g.angle}),"function"==typeof l.onNewFrame&&l.onNewFrame(),m.frameId=requestAnimationFrame(o))},r=a(),m={frameId:requestAnimationFrame(o),target:i,type:"camera",options:l,fn:o},sigma.misc.animation.running[r]=m,r},sigma.misc.animation.kill=function(n){if(1!==arguments.length||"number"!=typeof n)throw"animation.kill: Wrong arguments.";var i=sigma.misc.animation.running[n];return i&&(cancelAnimationFrame(n),delete sigma.misc.animation.running[i.frameId],"camera"===i.type&&(i.target.isAnimated=!1),"function"==typeof(i.options||{}).onComplete&&i.options.onComplete()),this},sigma.misc.animation.killAll=function(n){var i,a,t=0,e="string"==typeof n?n:null,o="object"==typeof n?n:null,r=sigma.misc.animation.running;for(a in r)e&&r[a].type!==e||o&&r[a].target!==o||(i=sigma.misc.animation.running[a],cancelAnimationFrame(i.frameId),delete sigma.misc.animation.running[a],"camera"===i.type&&(i.target.isAnimated=!1),t++,"function"==typeof(i.options||{}).onComplete&&i.options.onComplete());return t},sigma.misc.animation.has=function(n){var i,a="string"==typeof n?n:null,t="object"==typeof n?n:null,e=sigma.misc.animation.running;for(i in e)if(!(a&&e[i].type!==a||t&&e[i].target!==t))return!0;return!1}}).call(this);(function(t){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindDOMEvents=function(t){var e=this,i=this.graph;function s(t){this.attr=function(e){return t.getAttributeNS(null,e)},this.tag=t.tagName,this.class=this.attr("class"),this.id=this.attr("id"),this.isNode=function(){return!!~this.class.indexOf(e.settings("classPrefix")+"-node")},this.isEdge=function(){return!!~this.class.indexOf(e.settings("classPrefix")+"-edge")},this.isHover=function(){return!!~this.class.indexOf(e.settings("classPrefix")+"-hover")}}function n(t){if(e.settings("eventsEnabled")){e.dispatchEvent("click",t);var n=new s(t.target);n.isNode()?e.dispatchEvent("clickNode",{node:i.nodes(n.attr("data-node-id"))}):e.dispatchEvent("clickStage"),t.preventDefault(),t.stopPropagation()}}function a(t){if(e.settings("eventsEnabled")){e.dispatchEvent("doubleClick",t);var n=new s(t.target);n.isNode()?e.dispatchEvent("doubleClickNode",{node:i.nodes(n.attr("data-node-id"))}):e.dispatchEvent("doubleClickStage"),t.preventDefault(),t.stopPropagation()}}t.addEventListener("click",n,!1),sigma.utils.doubleClick(t,"click",a),t.addEventListener("touchstart",n,!1),sigma.utils.doubleClick(t,"touchstart",a),t.addEventListener("mouseover",function(t){var n=t.toElement||t.target;if(e.settings("eventsEnabled")&&n){var a=new s(n);if(a.isNode())e.dispatchEvent("overNode",{node:i.nodes(a.attr("data-node-id"))});else if(a.isEdge()){var d=i.edges(a.attr("data-edge-id"));e.dispatchEvent("overEdge",{edge:d,source:i.nodes(d.source),target:i.nodes(d.target)})}}},!0),t.addEventListener("mouseout",function(t){var n=t.fromElement||t.originalTarget;if(e.settings("eventsEnabled")){var a=new s(n);if(a.isNode())e.dispatchEvent("outNode",{node:i.nodes(a.attr("data-node-id"))});else if(a.isEdge()){var d=i.edges(a.attr("data-edge-id"));e.dispatchEvent("outEdge",{edge:d,source:i.nodes(d.source),target:i.nodes(d.target)})}}},!0)}}).call(this);(function(t){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindEvents=function(e){var a,i,d,n,s=this;function o(t){t&&(d="x"in t.data?t.data.x:d,n="y"in t.data?t.data.y:n);var a,i,o,c,r,g,h,l,p=[],u=d+s.width/2,v=n+s.height/2,E=s.camera.cameraPosition(d,n),f=s.camera.quadtree.point(E.x,E.y);if(f.length)for(a=0,o=f.length;a<o;a++)if(r=(c=f[a])[e+"x"],g=c[e+"y"],h=c[e+"size"],!c.hidden&&u>r-h&&u<r+h&&v>g-h&&v<g+h&&Math.sqrt(Math.pow(u-r,2)+Math.pow(v-g,2))<h){for(l=!1,i=0;i<p.length;i++)if(c.size>p[i].size){p.splice(i,0,c),l=!0;break}l||p.push(c)}return p}function c(a){if(!s.settings("enableEdgeHovering"))return[];var i=sigma.renderers.canvas&&s instanceof sigma.renderers.canvas;if(!i)throw new Error("The edge events feature is not compatible with the WebGL renderer");a&&(d="x"in a.data?a.data.x:d,n="y"in a.data?a.data.y:n);var o,c,r,g,h,l,p,u,v,E,f=s.settings("edgeHoverPrecision"),m={},b=[],k=d+s.width/2,x=n+s.height/2,y=s.camera.cameraPosition(d,n),C=[];if(i)for(o=0,r=(g=s.camera.quadtree.area(s.camera.getRectangle(s.width,s.height))).length;o<r;o++)m[g[o].id]=g[o];function N(t,e){for(E=!1,c=0;c<t.length;c++)if(e.size>t[c].size){t.splice(c,0,e),E=!0;break}E||t.push(e)}if(s.camera.edgequadtree!==t&&(C=s.camera.edgequadtree.point(y.x,y.y)),C.length)for(o=0,r=C.length;o<r;o++)h=C[o],p=s.graph.nodes(h.source),u=s.graph.nodes(h.target),l=h[e+"size"]||h["read_"+e+"size"],!h.hidden&&!p.hidden&&!u.hidden&&(!i||m[h.source]||m[h.target])&&sigma.utils.getDistance(p[e+"x"],p[e+"y"],k,x)>p[e+"size"]&&sigma.utils.getDistance(u[e+"x"],u[e+"y"],k,x)>u[e+"size"]&&("curve"==h.type||"curvedArrow"==h.type?p.id===u.id?(v=sigma.utils.getSelfLoopControlPoints(p[e+"x"],p[e+"y"],p[e+"size"]),sigma.utils.isPointOnBezierCurve(k,x,p[e+"x"],p[e+"y"],u[e+"x"],u[e+"y"],v.x1,v.y1,v.x2,v.y2,Math.max(l,f))&&N(b,h)):(v=sigma.utils.getQuadraticControlPoint(p[e+"x"],p[e+"y"],u[e+"x"],u[e+"y"]),sigma.utils.isPointOnQuadraticCurve(k,x,p[e+"x"],p[e+"y"],u[e+"x"],u[e+"y"],v.x,v.y,Math.max(l,f))&&N(b,h)):sigma.utils.isPointOnSegment(k,x,p[e+"x"],p[e+"y"],u[e+"x"],u[e+"y"],Math.max(l,f))&&N(b,h));return b}function r(t){var e,a,i={},d={};function n(t){if(s.settings("eventsEnabled")){e=o(t),a=c(t);var n,r,g,h,l=[],p=[],u={},v=e.length,E=[],f=[],m={},b=a.length;for(n=0;n<v;n++)u[(g=e[n]).id]=g,i[g.id]||(p.push(g),i[g.id]=g);for(r in i)u[r]||(l.push(i[r]),delete i[r]);for(n=0,v=p.length;n<v;n++)s.dispatchEvent("overNode",{node:p[n],captor:t.data});for(n=0,v=l.length;n<v;n++)s.dispatchEvent("outNode",{node:l[n],captor:t.data});for(p.length&&s.dispatchEvent("overNodes",{nodes:p,captor:t.data}),l.length&&s.dispatchEvent("outNodes",{nodes:l,captor:t.data}),n=0;n<b;n++)m[(h=a[n]).id]=h,d[h.id]||(f.push(h),d[h.id]=h);for(r in d)m[r]||(E.push(d[r]),delete d[r]);for(n=0,b=f.length;n<b;n++)s.dispatchEvent("overEdge",{edge:f[n],captor:t.data});for(n=0,b=E.length;n<b;n++)s.dispatchEvent("outEdge",{edge:E[n],captor:t.data});f.length&&s.dispatchEvent("overEdges",{edges:f,captor:t.data}),E.length&&s.dispatchEvent("outEdges",{edges:E,captor:t.data})}}t.bind("click",function(t){s.settings("eventsEnabled")&&(s.dispatchEvent("click",t.data),e=o(t),a=c(t),e.length?(s.dispatchEvent("clickNode",{node:e[0],captor:t.data}),s.dispatchEvent("clickNodes",{node:e,captor:t.data})):a.length?(s.dispatchEvent("clickEdge",{edge:a[0],captor:t.data}),s.dispatchEvent("clickEdges",{edge:a,captor:t.data})):s.dispatchEvent("clickStage",{captor:t.data}))}),t.bind("mousedown",n),t.bind("mouseup",n),t.bind("mousemove",n),t.bind("mouseout",function(t){if(s.settings("eventsEnabled")){var e,a,n,o,c=[],r=[];for(e in i)c.push(i[e]);for(i={},a=0,n=c.length;a<n;a++)s.dispatchEvent("outNode",{node:c[a],captor:t.data});for(c.length&&s.dispatchEvent("outNodes",{nodes:c,captor:t.data}),d={},a=0,o=r.length;a<o;a++)s.dispatchEvent("outEdge",{edge:r[a],captor:t.data});r.length&&s.dispatchEvent("outEdges",{edges:r,captor:t.data})}}),t.bind("doubleclick",function(t){s.settings("eventsEnabled")&&(s.dispatchEvent("doubleClick",t.data),e=o(t),a=c(t),e.length?(s.dispatchEvent("doubleClickNode",{node:e[0],captor:t.data}),s.dispatchEvent("doubleClickNodes",{node:e,captor:t.data})):a.length?(s.dispatchEvent("doubleClickEdge",{edge:a[0],captor:t.data}),s.dispatchEvent("doubleClickEdges",{edge:a,captor:t.data})):s.dispatchEvent("doubleClickStage",{captor:t.data}))}),t.bind("rightclick",function(t){s.settings("eventsEnabled")&&(s.dispatchEvent("rightClick",t.data),e=o(t),a=c(t),e.length?(s.dispatchEvent("rightClickNode",{node:e[0],captor:t.data}),s.dispatchEvent("rightClickNodes",{node:e,captor:t.data})):a.length?(s.dispatchEvent("rightClickEdge",{edge:a[0],captor:t.data}),s.dispatchEvent("rightClickEdges",{edge:a,captor:t.data})):s.dispatchEvent("rightClickStage",{captor:t.data}))}),s.bind("render",n)}for(a=0,i=this.captors.length;a<i;a++)r(this.captors[a])}}).call(this);(function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.drawHovers=function(e){var t=this,s={},n={};function i(){var i,o,d,a,r,g=t.contexts.hover.canvas,c=t.settings("defaultNodeType"),v=t.settings("defaultEdgeType"),h=sigma.canvas.hovers,f=sigma.canvas.edgehovers,m=sigma.canvas.extremities,l=t.settings.embedObjects({prefix:e});if(t.contexts.hover.clearRect(0,0,g.width,g.height),l("enableHovering")&&l("singleHover")&&Object.keys(s).length&&(h[(a=s[Object.keys(s)[0]]).type]||h[c]||h.def)(a,t.contexts.hover,l),l("enableHovering")&&!l("singleHover"))for(i in s)(h[s[i].type]||h[c]||h.def)(s[i],t.contexts.hover,l);if(l("enableEdgeHovering")&&l("singleHover")&&Object.keys(n).length&&(r=n[Object.keys(n)[0]],o=t.graph.nodes(r.source),d=t.graph.nodes(r.target),r.hidden||((f[r.type]||f[v]||f.def)(r,o,d,t.contexts.hover,l),l("edgeHoverExtremities")?(m[r.type]||m.def)(r,o,d,t.contexts.hover,l):((sigma.canvas.nodes[o.type]||sigma.canvas.nodes.def)(o,t.contexts.hover,l),(sigma.canvas.nodes[d.type]||sigma.canvas.nodes.def)(d,t.contexts.hover,l)))),l("enableEdgeHovering")&&!l("singleHover"))for(i in n)r=n[i],o=t.graph.nodes(r.source),d=t.graph.nodes(r.target),r.hidden||((f[r.type]||f[v]||f.def)(r,o,d,t.contexts.hover,l),l("edgeHoverExtremities")?(m[r.type]||m.def)(r,o,d,t.contexts.hover,l):((sigma.canvas.nodes[o.type]||sigma.canvas.nodes.def)(o,t.contexts.hover,l),(sigma.canvas.nodes[d.type]||sigma.canvas.nodes.def)(d,t.contexts.hover,l)))}this.bind("overNode",function(e){var t=e.data.node;t.hidden||(s[t.id]=t,i())}),this.bind("outNode",function(e){delete s[e.data.node.id],i()}),this.bind("overEdge",function(e){var t=e.data.edge;t.hidden||(n[t.id]=t,i())}),this.bind("outEdge",function(e){delete n[e.data.edge.id],i()}),this.bind("render",function(e){i()})}}).call(this);